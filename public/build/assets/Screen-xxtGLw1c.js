import{Q as ve,g as v,V as fe,b as N,s as he,H,x as ge,N as pe,y as ne,c as a,e as me,a as t,f as oe,k as re,w as se,j as m,n as B,o as l,F as y,t as S,l as V,u as le,p as we}from"./ssr-BytXMzjc.js";import{_ as xe}from"./ExcalidrawComponent-CcPbE7RG.js";import{_ as be}from"./CheckScreen-BxhyIBub.js";import{_ as ke}from"./app-DPFHnaae.js";import{u as ae}from"./useGsapAnimation-BBvZ-m54.js";import{u as ye}from"./useProcessedQuillContent-zsddfOy5.js";/* empty css            */import"./index-CH_iu5NA.js";const _e={key:0,class:"relative h-[calc(100vh-3rem)] w-full lg:h-[calc(100vh-5.5rem)]"},Ce={class:"bg-background transition-colors"},Te={class:"p-3 pt-6 sm:p-6 sm:pt-12 lg:p-8 lg:pt-16"},Me={class:"mb-8"},Se={key:0,class:"space-y-3"},Re={class:"mb-4 text-3xl font-bold leading-tight text-foreground sm:text-4xl"},je={class:"mb-6 flex flex-wrap items-center gap-3 text-sm"},Be={class:"inline-flex items-center gap-1.5 text-muted-foreground"},Le={class:"font-medium"},He={class:"flex flex-wrap items-center gap-x-2 gap-y-1"},ze={class:"inline-flex items-center gap-1"},Ee={key:0,class:"text-muted-foreground/50"},Ie={key:0,class:"text-muted-foreground/40"},Oe=["title"],Ae={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-3 w-3"},De={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"},Ne={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},Ve={class:"hidden sm:inline"},$e={key:0,class:"space-y-3"},qe={key:1},Pe={class:"content-container"},Fe=["innerHTML"],Ue={key:1,class:"content-placeholder"},We={key:2,class:"mt-10 flex items-center gap-2 border-t border-border/60 pt-6"},Ge={class:"inline-flex items-center gap-2 rounded-md bg-muted/50 px-3 py-1.5 text-sm"},Qe={class:"font-medium text-foreground"},Ke={class:"flex h-full flex-col"},Ye={key:0,class:"py-8 text-center text-sm text-muted-foreground"},Je={key:1,class:"space-y-0.5"},Xe=["onClick"],Ze={class:"rounded-lg border border-border bg-popover shadow-lg"},et={key:0,class:"py-4 text-center text-xs text-muted-foreground"},tt={key:1,class:"space-y-0.5"},nt=["onClick"],ot=Object.assign({name:"WriteByCategoryScreen"},{__name:"Screen",setup(rt){const{props:R}=ve();v(R.category||{});const i=v(R.write||{}),h=v(null),p=v(null),u=v(!1),w=v(!1),z=fe("categories",null),ie=N(()=>z&&Array.isArray(z)&&z.length>0?z:R.categories&&Array.isArray(R.categories)&&R.categories.length>0?R.categories:[]),$=N(()=>{if(!i.value)return[];const o=ie.value;if(o.length===0)return[];const e=[],r=new Set;if(i.value.categories&&Array.isArray(i.value.categories)&&i.value.categories.length>0&&i.value.categories.forEach(n=>{if(n&&n.id&&!r.has(n.id)){r.add(n.id);const s=q(n.id,o);s.length>0&&e.push(s)}}),i.value.category&&i.value.category.id&&!r.has(i.value.category.id)){r.add(i.value.category.id);const n=q(i.value.category.id,o);n.length>0&&e.push(n)}if(i.value.category_id&&!r.has(i.value.category_id)){r.add(i.value.category_id);const n=q(i.value.category_id,o);n.length>0&&e.push(n)}return e}),q=(o,e)=>{if(!o||!e||e.length===0)return[];const r=e.find(d=>d&&d.id===o);if(!r)return[];const n=[r];let s=r;for(;s&&s.parent_id;){const d=e.find(c=>c&&c.id===s.parent_id);if(d)n.unshift(d),s=d;else break}return n},de=o=>route("categories.show",{category:o.slug}),g=v(!1),x=v([]),_=v(!1),C=v(null),E=v(!1),G=v(null),Q=v(null),P=v(new Map),K=()=>{const o=window.innerWidth>=1280;E.value=o,o&&_.value&&x.value.length>0?g.value=!0:o||(g.value=!1)},b=N(()=>!i.value.title),F=ye(h,N(()=>w.value?i.value.content:"")),ue=o=>{if(!o)return"";const e=new Date(o),r=["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],n=e.getDate(),s=r[e.getMonth()],d=e.getFullYear();return`${n} ${s} ${d}`},ce=o=>new Intl.NumberFormat("tr-TR").format(o);let T=null,M=null,I=null,O=null,A=null,j=!1;const U=()=>{if(!h.value)return;T&&(T.disconnect(),T=null),M&&(window.removeEventListener("scroll",M),M=null);const o=h.value.querySelectorAll(".heading-wrapper h1, .heading-wrapper h2, .heading-wrapper h3, .heading-wrapper h4, .heading-wrapper h5, .heading-wrapper h6, h1, h2, h3, h4, h5, h6");if(o.length===0)return;const e=80,r=()=>{if(j)return;let n=null,s=1/0;o.forEach(d=>{if(!d.id)return;const c=d.getBoundingClientRect(),f=c.top-e;c.top<=e+50&&c.bottom>0&&f<=50&&Math.abs(f)<s&&(s=Math.abs(f),n=d.id)}),n||o.forEach(d=>{if(!d.id)return;const c=d.getBoundingClientRect();if(c.top<e+200&&c.bottom>0){const f=Math.abs(c.top-e);f<s&&(s=f,n=d.id)}}),n&&C.value!==n&&(C.value=n)};T=new IntersectionObserver(n=>{j||r()},{root:null,rootMargin:`-${e+10}px 0px -60% 0px`,threshold:[0,.1,.25,.5,.75,1]}),o.forEach(n=>{n.id&&T.observe(n)}),M=()=>{j||r()},window.addEventListener("scroll",M,{passive:!0}),r()};he(()=>{K(),O=()=>{K()},window.addEventListener("resize",O),A=r=>{u.value&&p.value&&p.value.hasUnsavedChanges&&p.value.saveIfNeeded()},window.addEventListener("beforeunload",A),w.value=!1;const o=document.querySelector(".content-placeholder");o?(I=new IntersectionObserver(r=>{r.forEach(n=>{n.isIntersecting&&!w.value&&(w.value=!0,H(()=>{ae(h,{duration:.8}),setTimeout(()=>{W(),x.value.length>0&&(U(),E.value&&(g.value=!0))},100)}))})},{threshold:.1,rootMargin:"50px"}),I.observe(o)):(w.value=!0,H(()=>{ae(h,{duration:.8}),setTimeout(()=>{W(),x.value.length>0&&(U(),E.value&&(g.value=!0))},100)}));const e=new URLSearchParams(window.location.search);if(u.value=e.has("draw"),i.value.content&&i.value.content.includes("<img")){const r=/<img[^>]+src="([^"]+)"/g;let n;for(;(n=r.exec(i.value.content))!==null;){const s=new Image;s.src=n[1]}}}),ge(()=>{I&&I.disconnect(),T&&(T.disconnect(),T=null),M&&(window.removeEventListener("scroll",M),M=null),O&&window.removeEventListener("resize",O),A&&window.removeEventListener("beforeunload",A)}),pe.on("before",async o=>{u.value&&p.value&&p.value.hasUnsavedChanges&&await p.value.saveIfNeeded();const e=document.querySelector(".write-list-container");e&&localStorage.setItem("writeListScrollPosition",e.scrollTop.toString())});const W=()=>{if(!h.value)return;const o=h.value.querySelectorAll(".heading-wrapper h1, .heading-wrapper h2, .heading-wrapper h3, .heading-wrapper h4, .heading-wrapper h5, .heading-wrapper h6, h1, h2, h3, h4, h5, h6"),e=[],r=new Set;o.forEach(n=>{let s=n.id;if(!s){const f=n.closest(".heading-wrapper");if(f){const k=f.querySelector("a.heading-anchor");k&&k.href&&(s=k.href.split("#")[1])}}if(!s){s=n.textContent.trim().toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").substring(0,50)||`heading-${e.length}`;let k=s,D=1;for(;r.has(k);)k=`${s}-${D}`,D++;s=k,n.id||(n.id=s)}if(r.has(s))return;r.add(s);const d=parseInt(n.tagName.charAt(1)),c=n.textContent.trim();c&&e.push({id:s,text:c,level:d})}),x.value=e,_.value=e.length>0},Y=async()=>{u.value&&p.value&&p.value.hasUnsavedChanges&&await p.value.saveIfNeeded(),u.value=!u.value,!u.value&&!w.value&&(w.value=!0)},J=o=>{if(!o)return;let e=document.getElementById(o);if(!e&&h.value&&(e=h.value.querySelector(`#${o}`)),!e&&h.value){const n=h.value.querySelectorAll(".heading-wrapper h1, .heading-wrapper h2, .heading-wrapper h3, .heading-wrapper h4, .heading-wrapper h5, .heading-wrapper h6, h1, h2, h3, h4, h5, h6");for(const s of n)if(s.id===o){e=s;break}}if(!e)return;j=!0,C.value=o,H(()=>{te()});const r=e.closest(".overflow-y-auto");if(r){const n=r.getBoundingClientRect(),s=e.getBoundingClientRect(),d=r.scrollTop,c=s.top-n.top+d;r.scrollTo({top:c-80,behavior:"smooth"})}else e.scrollIntoView({behavior:"smooth",block:"start"});setTimeout(()=>{j=!1},600),window.innerWidth<1280&&(g.value=!1)},X=o=>{switch(o){case 1:return"pl-0";case 2:return"pl-4";case 3:return"pl-6";case 4:return"pl-8";case 5:return"pl-10";case 6:return"pl-12";default:return"pl-0"}},Z=o=>"",L=()=>{g.value=!g.value},ee=(o,e)=>{o?P.value.set(e,o):P.value.delete(e)},te=()=>{if(!C.value)return;const o=P.value.get(C.value);if(!o)return;const e=window.innerWidth>=1280?Q.value:G.value;if(!e)return;const r=e.getBoundingClientRect(),n=o.getBoundingClientRect(),s=n.top<r.top,d=n.bottom>r.bottom;if(s||d){e.scrollTop;const c=o.offsetTop,f=e.clientHeight,k=o.offsetHeight,D=c-f/2+k/2;e.scrollTo({top:D,behavior:"smooth"})}};return ne(F,()=>{w.value&&F.value&&H(()=>{W(),x.value.length>0&&(U(),E.value&&(g.value=!0))})},{flush:"post"}),ne(C,(o,e)=>{o&&o!==e&&!j&&H(()=>{te()})}),(o,e)=>u.value?(l(),a("div",_e,[t("div",{class:"absolute left-4 top-[53px] z-10 lg:top-4"},[t("button",{onClick:Y,class:"flex items-center gap-2 rounded-lg border border-border bg-card px-3 py-2 text-sm text-foreground shadow-lg transition-all hover:bg-accent"},[...e[0]||(e[0]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})],-1),re(" Metne Dön ",-1)])])]),oe(xe,{ref_key:"excalidrawRef",ref:p,write:i.value},null,8,["write"])])):(l(),me(be,{key:1},{default:se(()=>[t("div",{class:B(["mx-auto max-w-4xl transition-all duration-300",{"xl:-translate-x-[100px]":!b.value&&_.value&&g.value&&!u.value}])},[t("div",Ce,[t("div",Te,[t("div",Me,[b.value?(l(),a("div",Se,[...e[1]||(e[1]=[t("div",{class:"skeleton h-8 w-3/4 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-24 rounded-md"},null,-1)])])):(l(),a(y,{key:1},[t("h1",Re,S(i.value.title),1),t("div",je,[t("span",Be,[e[2]||(e[2]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t("span",Le,S(ue(i.value.created_at)),1)]),$.value.length>0?(l(),a(y,{key:0},[e[3]||(e[3]=t("span",{class:"text-muted-foreground/40"},"•",-1)),t("div",He,[(l(!0),a(y,null,V($.value,(r,n)=>(l(),a(y,{key:n},[t("div",ze,[(l(!0),a(y,null,V(r,(s,d)=>(l(),a(y,{key:s.id},[oe(le(we),{href:de(s),class:"font-semibold text-primary transition-colors hover:underline"},{default:se(()=>[re(S(s.name),1)]),_:2},1032,["href"]),d<r.length-1?(l(),a("span",Ee,"/")):m("",!0)],64))),128))]),n<$.value.length-1?(l(),a("span",Ie,",")):m("",!0)],64))),128))])],64)):m("",!0),i.value.hasDraw||i.value.writeDraws&&i.value.writeDraws.length>0?(l(),a(y,{key:1},[e[4]||(e[4]=t("span",{class:"text-muted-foreground/40"},"•",-1)),t("button",{onClick:Y,class:B(["inline-flex h-6 items-center justify-center gap-1 rounded-md border border-input bg-background px-2 text-xs font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",u.value?"bg-accent text-accent-foreground":""]),title:u.value?"Metne Dön":"Çizime Git"},[(l(),a("svg",Ae,[u.value?(l(),a("path",De)):(l(),a("path",Ne))])),t("span",Ve,S(u.value?"Metne Dön":"Çizime Git"),1)],10,Oe)],64)):m("",!0)])],64))]),b.value?(l(),a("div",$e,[...e[5]||(e[5]=[t("div",{class:"skeleton h-4 w-full rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-5/6 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-4/6 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-full rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-3/4 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-5/6 rounded-md"},null,-1),t("div",{class:"skeleton h-32 w-full rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-2/3 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-full rounded-md"},null,-1)])])):(l(),a("div",qe,[t("div",Pe,[w.value?(l(),a("div",{key:0,class:"article-content ql-editor",ref_key:"contentRef",ref:h,innerHTML:le(F)},null,8,Fe)):(l(),a("div",Ue,[...e[6]||(e[6]=[t("div",{class:"space-y-3"},[t("div",{class:"skeleton h-4 w-full rounded-md"}),t("div",{class:"skeleton h-4 w-5/6 rounded-md"}),t("div",{class:"skeleton h-4 w-4/6 rounded-md"}),t("div",{class:"skeleton h-4 w-full rounded-md"}),t("div",{class:"skeleton h-4 w-3/4 rounded-md"})],-1)])]))])])),b.value?m("",!0):(l(),a("div",We,[t("div",Ge,[e[7]||(e[7]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-muted-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),t("span",Qe,S(ce(i.value.views_count)),1),e[8]||(e[8]=t("span",{class:"text-muted-foreground"},"görüntülenme",-1))])]))])])],2),!b.value&&_.value&&!u.value?(l(),a("button",{key:0,onClick:L,class:"fixed right-4 top-1/2 z-50 flex h-10 w-10 -translate-y-1/2 items-center justify-center rounded-full bg-primary text-primary-foreground shadow-lg transition-colors hover:bg-primary/90 xl:hidden"},[...e[9]||(e[9]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-5 w-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1)])])):m("",!0),!b.value&&_.value&&!u.value?(l(),a("div",{key:1,class:B(["fixed right-0 top-12 z-40 h-[calc(100vh-3rem)] w-80 transform border-l border-border bg-popover shadow-2xl transition-transform duration-300 lg:h-[calc(100vh-5.5rem)] xl:hidden",{"translate-x-full":!g.value}])},[t("div",Ke,[t("div",{class:"flex items-center justify-between border-b border-border p-4"},[e[11]||(e[11]=t("h3",{class:"text-lg font-semibold text-foreground"},"İçindekiler",-1)),t("button",{onClick:L,class:"inline-flex h-8 w-8 items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"},[...e[10]||(e[10]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",{ref_key:"mobileTocScrollRef",ref:G,class:"flex-1 overflow-y-auto p-4"},[x.value.length===0?(l(),a("div",Ye," İçindekiler bulunamadı ")):(l(),a("nav",Je,[(l(!0),a(y,null,V(x.value,(r,n)=>(l(),a("a",{key:n,ref_for:!0,ref:s=>ee(s,r.id),onClick:s=>{s.preventDefault(),J(r.id)},class:B(["block cursor-pointer rounded-md px-2 py-1.5 text-sm transition-colors",[X(r.level),Z(r.id),C.value===r.id?"bg-accent font-medium text-accent-foreground":"text-muted-foreground hover:bg-accent/50 hover:text-foreground"]])},S(r.text),11,Xe))),128))]))],512)])],2)):m("",!0),!b.value&&_.value&&!u.value?(l(),a("button",{key:2,onClick:L,class:"fixed right-4 top-28 z-50 hidden h-10 w-10 items-center justify-center rounded-full bg-primary text-primary-foreground shadow-lg transition-colors hover:bg-primary/90 xl:flex"},[...e[12]||(e[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-5 w-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1)])])):m("",!0),!b.value&&_.value&&!u.value?(l(),a("div",{key:3,class:B(["fixed right-4 top-28 z-30 hidden w-64 transition-all duration-300 ease-in-out xl:block",g.value?"translate-x-0 opacity-100":"pointer-events-none translate-x-full opacity-0"])},[t("div",Ze,[t("div",{class:"flex items-center justify-between border-b border-border p-3"},[e[14]||(e[14]=t("h3",{class:"text-sm font-semibold text-foreground"},"İçindekiler",-1)),t("button",{onClick:L,class:"inline-flex h-6 w-6 items-center justify-center rounded-md text-xs font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"},[...e[13]||(e[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",{ref_key:"desktopTocScrollRef",ref:Q,class:"overflow-y-auto p-3",style:{"max-height":"calc(100vh - 220px)"}},[x.value.length===0?(l(),a("div",et," İçindekiler bulunamadı ")):(l(),a("nav",tt,[(l(!0),a(y,null,V(x.value,(r,n)=>(l(),a("a",{key:n,ref_for:!0,ref:s=>ee(s,r.id),onClick:s=>{s.preventDefault(),J(r.id)},class:B(["block cursor-pointer rounded-md px-2 py-1 text-xs transition-colors",[X(r.level),Z(r.id),C.value===r.id?"bg-accent font-medium text-accent-foreground":"text-muted-foreground hover:bg-accent/50 hover:text-foreground"]])},S(r.text),11,nt))),128))]))],512)])],2)):m("",!0),!b.value&&_.value&&g.value&&!u.value?(l(),a("div",{key:4,onClick:L,class:"fixed inset-0 z-30 bg-black/20 xl:hidden"})):m("",!0)]),_:1}))}}),ft=ke(ot,[["__scopeId","data-v-fccf7c1b"]]);export{ft as default};
