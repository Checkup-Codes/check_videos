import{Q as fe,e as f,L as ve,p as V,m as he,D as B,A as ge,N as pe,y as ne,c as i,j as me,a as t,b as oe,f as re,w as se,h as p,n as L,o as l,F as b,t as S,g as N,u as le,i as we}from"./ssr-BDs4_-3i.js";import{_ as xe}from"./ExcalidrawComponent-B6pGRFZm.js";import{_ as ke}from"./CheckScreen-w0JOtJwS.js";import{_ as be}from"./app-bI9-BdM8.js";import{u as ie}from"./useGsapAnimation-DFZGBHrS.js";import{u as ye}from"./useProcessedQuillContent-DOwyTw8g.js";/* empty css            */import"./index-CH_iu5NA.js";const _e={key:0,class:"relative h-[calc(100vh-3rem)] w-full lg:h-[calc(100vh-5.5rem)]"},Ce={class:"bg-background transition-colors"},Te={class:"p-6 pt-12 sm:p-8 sm:pt-16"},Me={class:"mb-8"},Se={key:0,class:"space-y-3"},ze={class:"mb-4 text-3xl font-bold leading-tight text-foreground sm:text-4xl"},Re={class:"mb-6 flex flex-wrap items-center gap-3 text-sm"},Le={class:"inline-flex items-center gap-1.5 text-muted-foreground"},je={class:"font-medium"},Be={class:"flex flex-wrap items-center gap-x-2 gap-y-1"},He={class:"inline-flex items-center gap-1"},Ae={key:0,class:"text-muted-foreground/50"},Ee={key:0,class:"text-muted-foreground/40"},Oe=["title"],De={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-3 w-3"},Ie={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"},Ve={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},Ne={class:"hidden sm:inline"},$e={key:0,class:"space-y-3"},qe={key:1},Pe={class:"content-container"},Fe=["innerHTML"],Ue={key:1,class:"content-placeholder"},Ke={key:2,class:"mt-10 flex items-center gap-2 border-t border-border/60 pt-6"},We={class:"inline-flex items-center gap-2 rounded-md bg-muted/50 px-3 py-1.5 text-sm"},Ge={class:"font-medium text-foreground"},Qe={class:"flex h-full flex-col"},Ye={key:0,class:"py-8 text-center text-sm text-muted-foreground"},Je={key:1,class:"space-y-0.5"},Xe=["onClick"],Ze={class:"rounded-lg border border-border bg-popover shadow-lg"},et={key:0,class:"py-4 text-center text-xs text-muted-foreground"},tt={key:1,class:"space-y-0.5"},nt=["onClick"],ot=Object.assign({name:"WriteByCategoryScreen"},{__name:"Screen",setup(rt){const{props:z}=fe();f(z.category||{});const a=f(z.write||{}),h=f(null),M=f(null),u=f(!1),m=f(!1),H=ve("categories",null),ae=V(()=>H&&Array.isArray(H)&&H.length>0?H:z.categories&&Array.isArray(z.categories)&&z.categories.length>0?z.categories:[]),$=V(()=>{if(!a.value)return[];const r=ae.value;if(r.length===0)return[];const e=[],o=new Set;if(a.value.categories&&Array.isArray(a.value.categories)&&a.value.categories.length>0&&a.value.categories.forEach(n=>{if(n&&n.id&&!o.has(n.id)){o.add(n.id);const s=q(n.id,r);s.length>0&&e.push(s)}}),a.value.category&&a.value.category.id&&!o.has(a.value.category.id)){o.add(a.value.category.id);const n=q(a.value.category.id,r);n.length>0&&e.push(n)}if(a.value.category_id&&!o.has(a.value.category_id)){o.add(a.value.category_id);const n=q(a.value.category_id,r);n.length>0&&e.push(n)}return e}),q=(r,e)=>{if(!r||!e||e.length===0)return[];const o=e.find(d=>d&&d.id===r);if(!o)return[];const n=[o];let s=o;for(;s&&s.parent_id;){const d=e.find(c=>c&&c.id===s.parent_id);if(d)n.unshift(d),s=d;else break}return n},de=r=>route("categories.show",{category:r.slug}),g=f(!1),w=f([]),y=f(!1),_=f(null),A=f(!1),W=f(null),G=f(null),P=f(new Map),Q=()=>{const r=window.innerWidth>=1280;A.value=r,r&&y.value&&w.value.length>0?g.value=!0:r||(g.value=!1)},x=V(()=>!a.value.title),F=ye(h,V(()=>m.value?a.value.content:"")),ue=r=>{if(!r)return"";const e=new Date(r),o=["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],n=e.getDate(),s=o[e.getMonth()],d=e.getFullYear();return`${n} ${s} ${d}`},ce=r=>new Intl.NumberFormat("tr-TR").format(r);let C=null,T=null,E=null,O=null,D=null,R=!1;const U=()=>{if(!h.value)return;C&&(C.disconnect(),C=null),T&&(window.removeEventListener("scroll",T),T=null);const r=h.value.querySelectorAll(".heading-wrapper h1, .heading-wrapper h2, .heading-wrapper h3, .heading-wrapper h4, .heading-wrapper h5, .heading-wrapper h6, h1, h2, h3, h4, h5, h6");if(r.length===0)return;const e=80,o=()=>{if(R)return;let n=null,s=1/0;r.forEach(d=>{if(!d.id)return;const c=d.getBoundingClientRect(),v=c.top-e;c.top<=e+50&&c.bottom>0&&v<=50&&Math.abs(v)<s&&(s=Math.abs(v),n=d.id)}),n||r.forEach(d=>{if(!d.id)return;const c=d.getBoundingClientRect();if(c.top<e+200&&c.bottom>0){const v=Math.abs(c.top-e);v<s&&(s=v,n=d.id)}}),n&&_.value!==n&&(_.value=n)};C=new IntersectionObserver(n=>{R||o()},{root:null,rootMargin:`-${e+10}px 0px -60% 0px`,threshold:[0,.1,.25,.5,.75,1]}),r.forEach(n=>{n.id&&C.observe(n)}),T=()=>{R||o()},window.addEventListener("scroll",T,{passive:!0}),o()};he(()=>{Q(),O=()=>{Q()},window.addEventListener("resize",O),D=o=>{if(u.value&&M.value&&M.value.hasUnsavedChanges)return o.preventDefault(),o.returnValue="Kaydedilmemiş değişiklikler var. Sayfadan ayrılmak istediğinizden emin misiniz?",o.returnValue},window.addEventListener("beforeunload",D),m.value=!1;const r=document.querySelector(".content-placeholder");r?(E=new IntersectionObserver(o=>{o.forEach(n=>{n.isIntersecting&&!m.value&&(m.value=!0,B(()=>{ie(h,{duration:.8}),setTimeout(()=>{K(),w.value.length>0&&(U(),A.value&&(g.value=!0))},100)}))})},{threshold:.1,rootMargin:"50px"}),E.observe(r)):(m.value=!0,B(()=>{ie(h,{duration:.8}),setTimeout(()=>{K(),w.value.length>0&&(U(),A.value&&(g.value=!0))},100)}));const e=new URLSearchParams(window.location.search);if(u.value=e.has("draw"),a.value.content&&a.value.content.includes("<img")){const o=/<img[^>]+src="([^"]+)"/g;let n;for(;(n=o.exec(a.value.content))!==null;){const s=new Image;s.src=n[1]}}}),ge(()=>{E&&E.disconnect(),C&&(C.disconnect(),C=null),T&&(window.removeEventListener("scroll",T),T=null),O&&window.removeEventListener("resize",O),D&&window.removeEventListener("beforeunload",D)}),pe.on("before",r=>{if(u.value&&M.value&&M.value.hasUnsavedChanges&&!confirm("Kaydedilmemiş değişiklikler var. Sayfadan ayrılmak istediğinizden emin misiniz?")){r.preventDefault();return}const e=document.querySelector(".write-list-container");e&&localStorage.setItem("writeListScrollPosition",e.scrollTop.toString())});const K=()=>{if(!h.value)return;const r=h.value.querySelectorAll(".heading-wrapper h1, .heading-wrapper h2, .heading-wrapper h3, .heading-wrapper h4, .heading-wrapper h5, .heading-wrapper h6, h1, h2, h3, h4, h5, h6"),e=[],o=new Set;r.forEach(n=>{let s=n.id;if(!s){const v=n.closest(".heading-wrapper");if(v){const k=v.querySelector("a.heading-anchor");k&&k.href&&(s=k.href.split("#")[1])}}if(!s){s=n.textContent.trim().toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").substring(0,50)||`heading-${e.length}`;let k=s,I=1;for(;o.has(k);)k=`${s}-${I}`,I++;s=k,n.id||(n.id=s)}if(o.has(s))return;o.add(s);const d=parseInt(n.tagName.charAt(1)),c=n.textContent.trim();c&&e.push({id:s,text:c,level:d})}),w.value=e,y.value=e.length>0},Y=()=>{u.value&&M.value&&M.value.hasUnsavedChanges&&!confirm("Kaydedilmemiş değişiklikler var. Metne dönmek istediğinizden emin misiniz?")||(u.value=!u.value,!u.value&&!m.value&&(m.value=!0))},J=r=>{if(!r)return;let e=document.getElementById(r);if(!e&&h.value&&(e=h.value.querySelector(`#${r}`)),!e&&h.value){const n=h.value.querySelectorAll(".heading-wrapper h1, .heading-wrapper h2, .heading-wrapper h3, .heading-wrapper h4, .heading-wrapper h5, .heading-wrapper h6, h1, h2, h3, h4, h5, h6");for(const s of n)if(s.id===r){e=s;break}}if(!e)return;R=!0,_.value=r,B(()=>{te()});const o=e.closest(".overflow-y-auto");if(o){const n=o.getBoundingClientRect(),s=e.getBoundingClientRect(),d=o.scrollTop,c=s.top-n.top+d;o.scrollTo({top:c-80,behavior:"smooth"})}else e.scrollIntoView({behavior:"smooth",block:"start"});setTimeout(()=>{R=!1},600),window.innerWidth<1280&&(g.value=!1)},X=r=>{switch(r){case 1:return"pl-0";case 2:return"pl-4";case 3:return"pl-6";case 4:return"pl-8";case 5:return"pl-10";case 6:return"pl-12";default:return"pl-0"}},Z=r=>"",j=()=>{g.value=!g.value},ee=(r,e)=>{r?P.value.set(e,r):P.value.delete(e)},te=()=>{if(!_.value)return;const r=P.value.get(_.value);if(!r)return;const e=window.innerWidth>=1280?G.value:W.value;if(!e)return;const o=e.getBoundingClientRect(),n=r.getBoundingClientRect(),s=n.top<o.top,d=n.bottom>o.bottom;if(s||d){e.scrollTop;const c=r.offsetTop,v=e.clientHeight,k=r.offsetHeight,I=c-v/2+k/2;e.scrollTo({top:I,behavior:"smooth"})}};return ne(F,()=>{m.value&&F.value&&B(()=>{K(),w.value.length>0&&(U(),A.value&&(g.value=!0))})},{flush:"post"}),ne(_,(r,e)=>{r&&r!==e&&!R&&B(()=>{te()})}),(r,e)=>u.value?(l(),i("div",_e,[t("div",{class:"absolute left-4 top-[53px] z-10 lg:top-4"},[t("button",{onClick:Y,class:"flex items-center gap-2 rounded-lg border border-border bg-card px-3 py-2 text-sm text-foreground shadow-lg transition-all hover:bg-accent"},[...e[0]||(e[0]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})],-1),re(" Metne Dön ",-1)])])]),oe(xe,{ref_key:"excalidrawRef",ref:M,write:a.value},null,8,["write"])])):(l(),me(ke,{key:1},{default:se(()=>[t("div",{class:L(["mx-auto max-w-4xl transition-all duration-300",{"xl:-translate-x-[100px]":!x.value&&y.value&&g.value&&!u.value}])},[t("div",Ce,[t("div",Te,[t("div",Me,[x.value?(l(),i("div",Se,[...e[1]||(e[1]=[t("div",{class:"skeleton h-8 w-3/4 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-24 rounded-md"},null,-1)])])):(l(),i(b,{key:1},[t("h1",ze,S(a.value.title),1),t("div",Re,[t("span",Le,[e[2]||(e[2]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t("span",je,S(ue(a.value.created_at)),1)]),$.value.length>0?(l(),i(b,{key:0},[e[3]||(e[3]=t("span",{class:"text-muted-foreground/40"},"•",-1)),t("div",Be,[(l(!0),i(b,null,N($.value,(o,n)=>(l(),i(b,{key:n},[t("div",He,[(l(!0),i(b,null,N(o,(s,d)=>(l(),i(b,{key:s.id},[oe(le(we),{href:de(s),class:"font-semibold text-primary transition-colors hover:underline"},{default:se(()=>[re(S(s.name),1)]),_:2},1032,["href"]),d<o.length-1?(l(),i("span",Ae,"/")):p("",!0)],64))),128))]),n<$.value.length-1?(l(),i("span",Ee,",")):p("",!0)],64))),128))])],64)):p("",!0),a.value.hasDraw||a.value.writeDraws&&a.value.writeDraws.length>0?(l(),i(b,{key:1},[e[4]||(e[4]=t("span",{class:"text-muted-foreground/40"},"•",-1)),t("button",{onClick:Y,class:L(["inline-flex h-6 items-center justify-center gap-1 rounded-md border border-input bg-background px-2 text-xs font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",u.value?"bg-accent text-accent-foreground":""]),title:u.value?"Metne Dön":"Çizime Git"},[(l(),i("svg",De,[u.value?(l(),i("path",Ie)):(l(),i("path",Ve))])),t("span",Ne,S(u.value?"Metne Dön":"Çizime Git"),1)],10,Oe)],64)):p("",!0)])],64))]),x.value?(l(),i("div",$e,[...e[5]||(e[5]=[t("div",{class:"skeleton h-4 w-full rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-5/6 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-4/6 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-full rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-3/4 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-5/6 rounded-md"},null,-1),t("div",{class:"skeleton h-32 w-full rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-2/3 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-full rounded-md"},null,-1)])])):(l(),i("div",qe,[t("div",Pe,[m.value?(l(),i("div",{key:0,class:"article-content ql-editor",ref_key:"contentRef",ref:h,innerHTML:le(F)},null,8,Fe)):(l(),i("div",Ue,[...e[6]||(e[6]=[t("div",{class:"space-y-3"},[t("div",{class:"skeleton h-4 w-full rounded-md"}),t("div",{class:"skeleton h-4 w-5/6 rounded-md"}),t("div",{class:"skeleton h-4 w-4/6 rounded-md"}),t("div",{class:"skeleton h-4 w-full rounded-md"}),t("div",{class:"skeleton h-4 w-3/4 rounded-md"})],-1)])]))])])),x.value?p("",!0):(l(),i("div",Ke,[t("div",We,[e[7]||(e[7]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-muted-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),t("span",Ge,S(ce(a.value.views_count)),1),e[8]||(e[8]=t("span",{class:"text-muted-foreground"},"görüntülenme",-1))])]))])])],2),!x.value&&y.value&&!u.value?(l(),i("button",{key:0,onClick:j,class:"fixed right-4 top-1/2 z-50 flex h-10 w-10 -translate-y-1/2 items-center justify-center rounded-full bg-primary text-primary-foreground shadow-lg transition-colors hover:bg-primary/90 xl:hidden"},[...e[9]||(e[9]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-5 w-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1)])])):p("",!0),!x.value&&y.value&&!u.value?(l(),i("div",{key:1,class:L(["fixed right-0 top-12 z-40 h-[calc(100vh-3rem)] w-80 transform border-l border-border bg-popover shadow-2xl transition-transform duration-300 lg:h-[calc(100vh-5.5rem)] xl:hidden",{"translate-x-full":!g.value}])},[t("div",Qe,[t("div",{class:"flex items-center justify-between border-b border-border p-4"},[e[11]||(e[11]=t("h3",{class:"text-lg font-semibold text-foreground"},"İçindekiler",-1)),t("button",{onClick:j,class:"inline-flex h-8 w-8 items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"},[...e[10]||(e[10]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",{ref_key:"mobileTocScrollRef",ref:W,class:"flex-1 overflow-y-auto p-4"},[w.value.length===0?(l(),i("div",Ye," İçindekiler bulunamadı ")):(l(),i("nav",Je,[(l(!0),i(b,null,N(w.value,(o,n)=>(l(),i("a",{key:n,ref_for:!0,ref:s=>ee(s,o.id),onClick:s=>{s.preventDefault(),J(o.id)},class:L(["block cursor-pointer rounded-md px-2 py-1.5 text-sm transition-colors",[X(o.level),Z(o.id),_.value===o.id?"bg-accent font-medium text-accent-foreground":"text-muted-foreground hover:bg-accent/50 hover:text-foreground"]])},S(o.text),11,Xe))),128))]))],512)])],2)):p("",!0),!x.value&&y.value&&!u.value?(l(),i("button",{key:2,onClick:j,class:"fixed right-4 top-28 z-50 hidden h-10 w-10 items-center justify-center rounded-full bg-primary text-primary-foreground shadow-lg transition-colors hover:bg-primary/90 xl:flex"},[...e[12]||(e[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-5 w-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1)])])):p("",!0),!x.value&&y.value&&!u.value?(l(),i("div",{key:3,class:L(["fixed right-4 top-28 z-30 hidden w-64 transition-all duration-300 ease-in-out xl:block",g.value?"translate-x-0 opacity-100":"pointer-events-none translate-x-full opacity-0"])},[t("div",Ze,[t("div",{class:"flex items-center justify-between border-b border-border p-3"},[e[14]||(e[14]=t("h3",{class:"text-sm font-semibold text-foreground"},"İçindekiler",-1)),t("button",{onClick:j,class:"inline-flex h-6 w-6 items-center justify-center rounded-md text-xs font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"},[...e[13]||(e[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",{ref_key:"desktopTocScrollRef",ref:G,class:"overflow-y-auto p-3",style:{"max-height":"calc(100vh - 220px)"}},[w.value.length===0?(l(),i("div",et," İçindekiler bulunamadı ")):(l(),i("nav",tt,[(l(!0),i(b,null,N(w.value,(o,n)=>(l(),i("a",{key:n,ref_for:!0,ref:s=>ee(s,o.id),onClick:s=>{s.preventDefault(),J(o.id)},class:L(["block cursor-pointer rounded-md px-2 py-1 text-xs transition-colors",[X(o.level),Z(o.id),_.value===o.id?"bg-accent font-medium text-accent-foreground":"text-muted-foreground hover:bg-accent/50 hover:text-foreground"]])},S(o.text),11,nt))),128))]))],512)])],2)):p("",!0),!x.value&&y.value&&g.value&&!u.value?(l(),i("div",{key:4,onClick:j,class:"fixed inset-0 z-30 bg-black/20 xl:hidden"})):p("",!0)]),_:1}))}}),vt=be(ot,[["__scopeId","data-v-8f5b05d2"]]);export{vt as default};
