import{Q as z,l as b,i as S,x as B,P as E,c as N,o as i,w as D,b as e,g as u,t as c,h as v,n as L,u as T,e as j,a as P,f as $,N as W}from"./app-gEdnwVJa.js";import{_ as H}from"./ExcalidrawComponent-DpllIxZZ.js";import{_ as I}from"./CheckScreen-DIiVMeUW.js";/* empty css            */const O={class:"card border border-base-200 bg-base-100 shadow-md transition-all duration-200"},R={class:"card-body p-4 sm:p-6"},q={class:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between"},V={class:"mb-3 w-full sm:mb-0"},G={class:"break-words text-xl font-bold sm:text-2xl"},U={class:"mt-2"},F={key:0,class:"badge badge-outline text-xs"},Q={class:"mt-2 flex flex-shrink-0 gap-2 sm:mt-0"},J={key:0,class:"dropdown dropdown-end"},K=e("button",{class:"btn btn-ghost btn-sm"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})])],-1),X={class:"dropdown-content menu z-[1] w-52 rounded-box border border-base-200 bg-base-100 p-2 shadow-md"},Y=["href"],Z=e("div",{class:"divider my-2"},null,-1),ee={key:0,class:"min-h-[500px]"},te={key:1,class:"content-container"},se={key:0,class:"alert alert-info mb-4 px-3 py-2 text-sm sm:mb-6 sm:p-4"},oe=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"h-5 w-5 shrink-0 stroke-current"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),ne=["innerHTML"],re={class:"text-base-content/70 mt-6 flex flex-col space-y-2 p-2 text-xs sm:flex-row sm:items-center sm:justify-between sm:space-y-0 sm:p-3 sm:text-sm"},ae={class:"flex flex-wrap items-center gap-2"},le={class:"flex items-center gap-1"},ie=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",class:"h-3.5 w-3.5 sm:h-4 sm:w-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),ce={key:0,class:"whitespace-nowrap"},we=Object.assign({name:"ShowWriteScreen"},{__name:"Screen",setup(de){const{props:m}=z(),o=b(m.write||{});m.auth;const h=b(null),r=b(!1),g=S(()=>{if(!o.value.content)return"";const s=new DOMParser().parseFromString(o.value.content,"text/html");return s.querySelectorAll("img").forEach((t,p)=>{const a=`content-img-${p}`;t.id=a,t.setAttribute("loading","lazy"),t.setAttribute("decoding","async"),t.setAttribute("importance","low"),!t.hasAttribute("width")&&!t.hasAttribute("height")&&(t.setAttribute("width","800"),t.setAttribute("height","600"));const l=s.createElement("div");l.className="img-skeleton-wrapper relative",l.style.width="100%",l.style.marginBottom="1rem",l.style.marginTop="1rem";const f=s.createElement("div");f.className="skeleton img-skeleton absolute inset-0 h-full w-full rounded-lg",f.id=`skeleton-${a}`;const _=t.parentNode;if(_){const w=s.createElement("div");w.className="img-wrapper relative",w.style.width="100%",t.style.opacity="0",t.style.transition="opacity 0.3s ease-in-out",t.setAttribute("onload",`
        this.style.opacity = '1';
        const skeleton = document.getElementById('skeleton-${a}');
        if (skeleton) skeleton.style.display = 'none';
      `),t.setAttribute("onerror",`
        const skeleton = document.getElementById('skeleton-${a}');
        if (skeleton) {
          skeleton.style.display = 'none';
          skeleton.insertAdjacentHTML('afterend', '<div class="text-error text-sm py-2">Görsel yüklenemedi</div>');
        }
        this.style.display = 'none';
      `);const M=t.cloneNode(!0);w.appendChild(M),l.appendChild(f),l.appendChild(w);try{_.insertBefore(l,t),_.removeChild(t)}catch(C){console.error("DOM manipülasyon hatası:",C)}}}),s.body.innerHTML}),y=n=>{const s={year:"numeric",month:"short",day:"numeric"};return new Date(n).toLocaleDateString("tr-TR",s)};B(()=>{h.value&&k(),window.location.pathname.includes("categories")?r.value=!0:r.value=m.showDraw||!1;const n=new URLSearchParams(window.location.search);r.value=n.has("draw"),r.value||E(()=>{const s=new IntersectionObserver(t=>{t.forEach(p=>{if(p.isIntersecting){const a=p.target;a.setAttribute("loading","eager"),a.setAttribute("importance","high"),s.unobserve(a)}})},{rootMargin:"200px 0px",threshold:.01});document.querySelectorAll(".article-content img").forEach(t=>s.observe(t))})});const k=()=>{if(!h.value)return;h.value.querySelectorAll("a").forEach(s=>{const d=s.getAttribute("href");d&&!d.startsWith("/")&&!d.startsWith("#")&&(s.setAttribute("target","_blank"),s.setAttribute("rel","noopener noreferrer"))})},x=()=>{r.value=!r.value;const n=new URL(window.location.href);r.value?n.searchParams.set("draw","1"):n.searchParams.delete("draw"),window.history.pushState({},"",n)},A=n=>{confirm("Bu yazıyı silmek istediğinize emin misiniz?")&&W.delete(route("writes.destroy",n))};return(n,s)=>(i(),N(I,null,{default:D(()=>[e("div",O,[e("div",R,[e("div",q,[e("div",V,[e("h1",G,c(o.value.title),1),e("div",U,[o.value.category?(i(),u("span",F,c(o.value.category.name),1)):v("",!0)])]),e("div",Q,[e("button",{onClick:x,class:L(["btn btn-sm",r.value?"btn-primary":"btn-ghost"])},c(r.value?"Metni Göster":"Çizim Göster"),3),T(m).auth.user?(i(),u("div",J,[K,e("ul",X,[e("li",null,[e("a",{href:n.route("writes.edit",o.value.id),class:"text-sm"},"Düzenle",8,Y)]),e("li",null,[e("a",{href:"#",class:"text-sm text-error",onClick:s[0]||(s[0]=j(d=>A(o.value.id),["prevent"]))},"Sil")])])])):v("",!0)])]),Z,r.value?(i(),u("div",ee,[P(H,{write:o.value},null,8,["write"])])):(i(),u("div",te,[o.value.summary?(i(),u("div",se,[oe,e("span",null,c(o.value.summary),1)])):v("",!0),e("div",{class:"article-content ql-editor",ref_key:"contentRef",ref:h,innerHTML:g.value},null,8,ne)])),e("div",re,[e("div",null,"Oluşturma: "+c(y(o.value.created_at)),1),e("div",ae,[e("span",le,[ie,$(" "+c(o.value.views_count)+" görüntüleme ",1)]),o.value.updated_at!==o.value.created_at?(i(),u("span",ce," Son güncelleme: "+c(y(o.value.updated_at)),1)):v("",!0)])])])])]),_:1}))}});export{we as default};
