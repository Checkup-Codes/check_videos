import{Q as K,l as v,T as Y,L as w,x as O,A as P,g as n,o as d,b as e,p as Q,e as W,h as _,j as p,q as g,u as s,n as m,t as u,D as H,F as $,m as J,v as X,s as Z,N as ee}from"./app-DZUIv2iJ.js";import{Q as te}from"./quill.snow-U4YRBQ78.js";import"./lodash-C-VRMdHZ.js";/* empty css            */const se={class:"card"},le={class:"card-body p-6"},ae=Q('<div class="card-title flex items-center justify-between"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg><h2 class="text-gray-800 dark:text-white">Yazıyı Güncelle</h2></div></div>',1),oe={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},re={class:"md:col-span-2"},ie={class:"form-control w-full"},ne=e("label",{class:"label"},[e("span",{class:"label-text"},"Başlık")],-1),de={class:"relative"},ce={key:0,class:"label"},ue={class:"label-text-alt text-error"},_e={class:"form-control w-full"},me=e("label",{class:"label"},[e("span",{class:"label-text"},"Slug")],-1),pe={class:"relative"},ve={key:0,class:"label"},ge={class:"label-text-alt text-error"},be={class:"md:col-span-2"},he={class:"form-control w-full"},ye=e("label",{class:"label"},[e("span",{class:"label-text"},"Özet")],-1),fe={class:"relative"},xe={key:0,class:"label"},ke={class:"label-text-alt text-error"},we={class:"md:col-span-2"},ze={class:"form-control w-full"},Te=e("label",{class:"label"},[e("span",{class:"label-text"},"İçerik")],-1),Me={class:"relative"},Be={key:0,class:"upload-loading-overlay bg-base-100/50 absolute inset-0 z-20 flex items-center justify-center"},De=e("div",{class:"flex flex-col items-center gap-2"},[e("span",{class:"loading loading-spinner loading-lg text-primary"}),e("span",{class:"text-sm"},"Resim yükleniyor...")],-1),Ee=[De],Le={key:0,class:"label"},Ue={class:"label-text-alt text-error"},Se={key:1,class:"toast toast-end z-50"},Ce=e("label",{class:"label"},[e("span",{class:"label-text"},"Kategori")],-1),Fe=e("option",{value:"",disabled:""},"Kategori seç",-1),Ve=["value"],je={key:0,class:"label"},He={class:"label-text-alt text-error"},Ie=e("label",{class:"label"},[e("span",{class:"label-text"},"Durumu")],-1),Re=e("option",{value:"draft"},"Şablon",-1),Ae=e("option",{value:"published"},"Yayında",-1),Ne=e("option",{value:"private"},"Gizli",-1),Ge=[Re,Ae,Ne],qe={key:0,class:"label"},Ke={class:"label-text-alt text-error"},Ye={class:"form-control w-full"},Oe=e("label",{class:"label"},[e("span",{class:"label-text"},"Kapak Resmi URL")],-1),Pe={class:"relative"},Qe={key:0,class:"label"},We={class:"label-text-alt text-error"},$e={class:"form-control w-full"},Je=e("label",{class:"label"},[e("span",{class:"label-text"},"Etiketler")],-1),Xe={class:"relative"},Ze={key:0,class:"label"},et={class:"label-text-alt text-error"},tt={class:"form-control w-full"},st=e("label",{class:"label"},[e("span",{class:"label-text"},"SEO Anahtar Kelimeleri")],-1),lt={class:"relative"},at={key:0,class:"label"},ot={class:"label-text-alt text-error"},rt={class:"form-control w-full"},it=e("label",{class:"label"},[e("span",{class:"label-text"},"SEO Meta Açıklaması")],-1),nt={class:"relative"},dt={class:"mt-1 text-xs text-gray-500"},ct={key:0,class:"label"},ut={class:"label-text-alt text-error"},_t=e("div",{class:"mt-1 text-xs text-gray-500"},[e("span",null,"İpucu: Bu açıklama arama sonuçlarında gösterilir. Boş bırakırsanız, özet kısmı kullanılacaktır.")],-1),mt={class:"form-control w-full"},pt=e("label",{class:"label"},[e("span",{class:"label-text"},"Görüntülenme Sayısı")],-1),vt={class:"relative"},gt={class:"flex items-center space-x-2"},bt={class:"label cursor-pointer justify-start gap-2"},ht=e("span",{class:"label-text"},"Çizim İçerir",-1),yt=e("div",{class:"divider"},null,-1),ft={class:"flex justify-end space-x-3"},xt=["disabled"],Bt=Object.assign({name:"WriteUpdateForm"},{__name:"WriteUpdateForm",setup(kt){const{props:L}=K(),I=v(L.categories),c=v(L.write),t=Y({title:c.value.title||"",slug:c.value.slug||"",content:c.value.content||"",published_at:c.value.published_at||"",summary:c.value.summary||"",status:c.value.status||"draft",category_id:c.value.category_id||"",cover_image:c.value.cover_image||"",seo_keywords:c.value.seo_keywords||"",meta_description:c.value.meta_description||"",tags:c.value.tags||"",views_count:c.value.views_count||0,hasDraw:c.value.hasDraw||!1}),l=v({title:"",slug:"",content:"",published_at:"",summary:"",status:"",category_id:"",cover_image:"",seo_keywords:"",meta_description:"",tags:""}),R=()=>{l.value.title=t.title?"":"Başlık zorunludur.",l.value.slug=t.slug?"":"Slug zorunludur.",l.value.content=t.content?"":"İçerik zorunludur.",l.value.published_at=t.published_at?"":"Yayınlama tarihi zorunludur.",l.value.summary=t.summary?"":"Özet zorunludur.",l.value.category_id=t.category_id?"":"Kategori seçilmelidir."},A=()=>{R(),Object.values(l.value).some(r=>r!=="")||t.put(route("writes.update",{write:c.value.slug}),{onSuccess:()=>{ee.visit(route("writes.show",{write:t.slug}))}})};let z=!0;w(()=>t.title,r=>{z||(t.slug=r.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim())}),w(()=>t.slug,(r,a)=>{r!==a&&(z=!0)}),w(()=>t.slug,r=>{r===""&&(z=!1)});const h=v(null);let i,U=!1;const T=v(!1),N=v(""),M=v(!1),S=v(""),C=v("alert-info"),F=["#570DF8","#F000B8","#37CDBE","#3ABFF8","#36D399","#FBBD23","#F87272","#1f2937","#2A303C","#ffffff","#000000"],f=(r,a="alert-info")=>{S.value=r,C.value=a,M.value=!0,setTimeout(()=>{M.value=!1},3e3)},G=()=>{const r=document.createElement("input");r.setAttribute("type","file"),r.setAttribute("accept","image/*"),r.click(),r.onchange=async()=>{var o,V;const a=r.files[0];if(!a)return;if(!["image/jpeg","image/png","image/gif","image/jpg"].includes(a.type)){f("Sadece JPEG, PNG veya GIF formatları desteklenmektedir.","alert-error");return}if(a.size>10*1024*1024){f("Resim boyutu 10MB'dan küçük olmalıdır.","alert-error");return}T.value=!0,N.value="";try{const y=i.getSelection(),E="img-loading-"+Date.now(),q=`
        <div id="${E}" class="skeleton-placeholder w-full my-4">
          <div class="skeleton h-32 w-full rounded-lg"></div>
          <div class="flex justify-center mt-2">
            <span class="loading loading-dots loading-md"></span>
          </div>
        </div>
      `;i.clipboard.dangerouslyPasteHTML(y.index,q);const j=new FormData;j.append("image",a);const x=await Z.post("/image-upload",j,{headers:{"Content-Type":"multipart/form-data"}});if(x.data.success&&x.data.url){const b=document.getElementById(E);if(b){const k=i.getIndex(i.scroll.descendant(Node,b)[0][0]);i.deleteText(k,b.outerHTML.length),i.insertEmbed(k,"image",x.data.url)}else i.insertEmbed(y.index,"image",x.data.url);f("Resim başarıyla yüklendi","alert-success")}else{const b=document.getElementById(E);if(b){const k=i.getIndex(i.scroll.descendant(Node,b)[0][0]);i.deleteText(k,b.outerHTML.length)}console.error("Resim yüklenemedi"),f("Resim yüklenirken bir hata oluştu.","alert-error")}}catch(y){console.error("Resim yükleme hatası:",y),f("Resim yüklenirken bir hata oluştu: "+(((V=(o=y.response)==null?void 0:o.data)==null?void 0:V.message)||y.message),"alert-error")}finally{T.value=!1}}};O(()=>{i=new te(h.value,{theme:"snow",modules:{toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{color:F},{background:F}],[{font:[]}],[{align:[]}],["link","image"],["clean"]],handlers:{image:G}}},placeholder:"İçeriği buraya yazın...",bounds:h.value,maxLength:1/0}),i.on("text-change",()=>{try{const r=i.root.innerHTML;t.content=r}catch(r){console.error("Content update error:",r)}}),setTimeout(()=>{if(t.content&&!U)try{i.root.innerHTML=t.content,U=!0}catch(r){console.error("Initial content load error:",r)}},100),h.value.style.height="400px",h.value&&h.value.classList.add("daisy-quill-editor")});let B=null;return w(()=>t.content,r=>{B&&clearTimeout(B),B=setTimeout(()=>{if(i&&r!==i.root.innerHTML)try{i.root.innerHTML=r||""}catch(a){console.error("Content update error in watcher:",a)}},300)}),P(()=>{i&&(i=null)}),(r,a)=>{var D;return d(),n("div",se,[e("div",le,[ae,e("form",{onSubmit:W(A,["prevent"]),class:"space-y-6"},[e("div",oe,[e("div",re,[e("div",ie,[ne,e("div",de,[p(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>s(t).title=o),placeholder:"Yazının başlığını girin",class:m(["input-bordered input w-full",{"input-error":l.value.title||s(t).errors.title}])},null,2),[[g,s(t).title]])]),l.value.title||s(t).errors.title?(d(),n("label",ce,[e("span",ue,u(l.value.title||s(t).errors.title),1)])):_("",!0)])]),e("div",null,[e("div",_e,[me,e("div",pe,[p(e("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=o=>s(t).slug=o),placeholder:"örnek-yazı-slug",class:m(["input-bordered input w-full",{"input-error":l.value.slug||s(t).errors.slug}])},null,2),[[g,s(t).slug]])]),l.value.slug||s(t).errors.slug?(d(),n("label",ve,[e("span",ge,u(l.value.slug||s(t).errors.slug),1)])):_("",!0)])]),e("div",be,[e("div",he,[ye,e("div",fe,[p(e("textarea",{"onUpdate:modelValue":a[2]||(a[2]=o=>s(t).summary=o),rows:"3",placeholder:"Yazının kısa özeti",class:m(["textarea-bordered textarea w-full",{"textarea-error":l.value.summary||s(t).errors.summary}])},null,2),[[g,s(t).summary]])]),l.value.summary||s(t).errors.summary?(d(),n("label",xe,[e("span",ke,u(l.value.summary||s(t).errors.summary),1)])):_("",!0)])]),e("div",we,[e("div",ze,[Te,e("div",Me,[e("div",{ref_key:"quillEditor",ref:h,class:m(["min-h-[300px] rounded border border-base-300 bg-base-100 p-3",{"border-error":l.value.content||s(t).errors.content}]),style:{height:"400px"}},null,2),T.value?(d(),n("div",Be,Ee)):_("",!0)]),l.value.content||s(t).errors.content?(d(),n("label",Le,[e("span",Ue,u(l.value.content||s(t).errors.content),1)])):_("",!0),M.value?(d(),n("div",Se,[e("div",{class:m(`alert ${C.value}`)},[e("span",null,u(S.value),1)],2)])):_("",!0)])]),e("div",null,[Ce,p(e("select",{"onUpdate:modelValue":a[3]||(a[3]=o=>s(t).category_id=o),class:m(["select-bordered select w-full",{"select-error":l.value.category_id||s(t).errors.category_id}])},[Fe,(d(!0),n($,null,J(I.value,o=>(d(),n("option",{key:o.id,value:o.id},u(o.name),9,Ve))),128))],2),[[H,s(t).category_id]]),l.value.category_id||s(t).errors.category_id?(d(),n("label",je,[e("span",He,u(l.value.category_id||s(t).errors.category_id),1)])):_("",!0)]),e("div",null,[Ie,p(e("select",{"onUpdate:modelValue":a[4]||(a[4]=o=>s(t).status=o),class:m(["select-bordered select w-full",{"select-error":l.value.status||s(t).errors.status}])},Ge,2),[[H,s(t).status]]),l.value.status||s(t).errors.status?(d(),n("label",qe,[e("span",Ke,u(l.value.status||s(t).errors.status),1)])):_("",!0)]),e("div",null,[e("div",Ye,[Oe,e("div",Pe,[p(e("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=o=>s(t).cover_image=o),placeholder:"https://example.com/image.jpg",class:m(["input-bordered input w-full",{"input-error":l.value.cover_image||s(t).errors.cover_image}])},null,2),[[g,s(t).cover_image]])]),l.value.cover_image||s(t).errors.cover_image?(d(),n("label",Qe,[e("span",We,u(l.value.cover_image||s(t).errors.cover_image),1)])):_("",!0)])]),e("div",null,[e("div",$e,[Je,e("div",Xe,[p(e("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=o=>s(t).tags=o),placeholder:"etiket1, etiket2, etiket3",class:m(["input-bordered input w-full",{"input-error":l.value.tags||s(t).errors.tags}])},null,2),[[g,s(t).tags]])]),l.value.tags||s(t).errors.tags?(d(),n("label",Ze,[e("span",et,u(l.value.tags||s(t).errors.tags),1)])):_("",!0)])]),e("div",null,[e("div",tt,[st,e("div",lt,[p(e("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=o=>s(t).seo_keywords=o),placeholder:"anahtar1, anahtar2, anahtar3",class:m(["input-bordered input w-full",{"input-error":l.value.seo_keywords||s(t).errors.seo_keywords}])},null,2),[[g,s(t).seo_keywords]])]),l.value.seo_keywords||s(t).errors.seo_keywords?(d(),n("label",at,[e("span",ot,u(l.value.seo_keywords||s(t).errors.seo_keywords),1)])):_("",!0)])]),e("div",null,[e("div",rt,[it,e("div",nt,[p(e("textarea",{"onUpdate:modelValue":a[8]||(a[8]=o=>s(t).meta_description=o),placeholder:"Arama motorları için kısa bir açıklama (max 160 karakter)",class:m(["textarea-bordered textarea w-full",{"textarea-error":l.value.meta_description||s(t).errors.meta_description}]),maxlength:"160",rows:"2"},null,2),[[g,s(t).meta_description]]),e("div",dt,u(((D=s(t).meta_description)==null?void 0:D.length)||0)+"/160",1)]),l.value.meta_description||s(t).errors.meta_description?(d(),n("label",ct,[e("span",ut,u(l.value.meta_description||s(t).errors.meta_description),1)])):_("",!0),_t])]),e("div",null,[e("div",mt,[pt,e("div",vt,[p(e("input",{type:"number","onUpdate:modelValue":a[9]||(a[9]=o=>s(t).views_count=o),class:"input-bordered input w-full",readonly:""},null,512),[[g,s(t).views_count]])])])]),e("div",gt,[e("label",bt,[p(e("input",{type:"checkbox","onUpdate:modelValue":a[10]||(a[10]=o=>s(t).hasDraw=o),class:"checkbox checkbox-primary"},null,512),[[X,s(t).hasDraw]]),ht])])]),yt,e("div",ft,[e("button",{type:"submit",class:m(["btn btn-primary",{loading:s(t).processing}]),disabled:s(t).processing}," Güncelle ",10,xt)])],32)])])}}});export{Bt as default};
