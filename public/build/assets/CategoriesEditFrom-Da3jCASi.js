import{Q as V,l as c,T as j,i as C,L as D,x as P,g as r,o as n,b as e,e as U,j as g,h as u,q as f,u as o,t as b,O as $,F as q,m as N,D as A,f as G,P as O}from"./app-Dg69v9io.js";/* empty css            */const R={class:"mx-auto mt-6 w-full max-w-full bg-base-100 px-3 sm:px-5 lg:mt-0"},X={class:"container mx-auto p-0 sm:p-4"},H={class:"card border border-base-200 bg-base-100 shadow-md"},I={class:"card-body p-4 sm:p-6"},Q=e("h2",{class:"card-title text-primary"},"Kategori Düzenle",-1),W=e("p",{class:"text-xs opacity-70 sm:text-sm"}," Kategorileriniz için düzenlemeler yapabilirsiniz. İsterseniz bir üst kategori seçebilirsiniz. ",-1),J=e("div",{class:"divider my-3"},null,-1),Y={class:"form-control w-full"},Z=e("label",{class:"label py-1.5"},[e("span",{class:"label-text"},"İsim")],-1),ee={key:0,class:"label py-1"},te={class:"label-text-alt text-error"},se={class:"form-control mt-3 w-full"},oe=e("label",{class:"label py-1.5"},[e("span",{class:"label-text"},"Slug")],-1),ae={key:0,class:"label py-1"},le={class:"label-text-alt text-error"},re={class:"form-control mt-3 w-full"},ne=e("label",{class:"label py-1.5"},[e("span",{class:"label-text"},"Üst Kategori")],-1),ie={class:"relative w-full"},de={key:0,class:"absolute z-30 mt-1 w-full"},ce={class:"menu max-h-60 w-full overflow-y-auto rounded-box border border-base-200 bg-base-100 p-2 shadow-md"},ue=["onMousedown"],pe={key:1,class:"mt-2 flex items-center"},me={class:"badge badge-sm"},be=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),_e=[be],ge={key:0,class:"label py-1"},ve={class:"label-text-alt text-error"},he={class:"form-control mt-3 w-full"},fe=e("label",{class:"label py-1.5"},[e("span",{class:"label-text"},"Durum")],-1),ye=e("option",{value:"public"},"Açık",-1),xe=e("option",{value:"hidden"},"Gizli",-1),we=[ye,xe],ke={key:0,class:"label py-1"},Ce={class:"label-text-alt text-error"},ze={class:"mt-5 flex flex-col justify-between gap-3 sm:flex-row"},Ke=["disabled"],Le={key:0,class:"loading loading-spinner loading-xs sm:loading-sm"},Be=Object.assign({name:"CategoriesEditFrom"},{__name:"CategoriesEditFrom",setup(Ee){var w,k;const{props:_}=V(),p=c(_.categories||[]),m=c(_.category||{}),t=j({name:m.value.name||"",slug:m.value.slug||"",parent_id:m.value.parent_id||null,status:m.value.status||"public"}),i=c(((w=_.category.parent)==null?void 0:w.name)||""),v=c(((k=_.category.parent)==null?void 0:k.name)||""),d=c(!1),y=c(!1),x=c(null),h=C(()=>!p.value||p.value.length===0?[]:p.value.filter(s=>s&&s.id!==m.value.id&&(!i.value||s.name&&s.name.toLowerCase().includes(i.value.toLowerCase())))),z=C(()=>!t.name||!t.slug);D(()=>t.name,s=>{s&&(t.slug=s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))}),P(()=>{(!p.value||p.value.length===0)&&B(),document.addEventListener("keydown",s=>{s.key==="Escape"&&(d.value=!1)})});const K=()=>{clearTimeout(x.value),h.value.length>0&&(d.value=!0)},L=()=>{x.value=setTimeout(()=>{d.value=!1},100)},E=()=>{t.parent_id="",i.value.length>=1&&(d.value=!0)},M=s=>{!s||!s.id||(t.parent_id=s.id,i.value=s.name,v.value=s.name,O(()=>{d.value=!1}))},S=()=>{t.parent_id="",i.value="",v.value=""},F=()=>{t.put(route("categories.update",{category:m.value.id}),{preserveScroll:!0,onSuccess:()=>{console.log("Category updated successfully")},onError:s=>{console.error("Error updating category:",s)}})},B=async()=>{y.value=!0;try{const s=await fetch(route("categories.index"),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!s.ok)throw new Error("Failed to fetch categories");const a=await s.json();p.value=a.categories||[]}catch(s){console.error("Error fetching categories:",s)}finally{y.value=!1}},T=s=>{confirm("Bu kategoriyi silmek istediğinize emin misiniz?")&&t.delete(route("categories.destroy",{category:s})).then(()=>{console.log("Kategori başarıyla silindi")}).catch(a=>{console.error("Kategori silinirken hata:",a)})};return(s,a)=>(n(),r("div",R,[e("div",X,[e("div",H,[e("div",I,[Q,W,J,e("form",{onSubmit:U(F,["prevent"])},[e("div",Y,[Z,g(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=l=>o(t).name=l),class:"input-bordered input w-full",placeholder:"Kategori ismi"},null,512),[[f,o(t).name]]),o(t).errors.name?(n(),r("label",ee,[e("span",te,b(o(t).errors.name),1)])):u("",!0)]),e("div",se,[oe,g(e("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=l=>o(t).slug=l),class:"input-bordered input w-full",placeholder:"kategori-slug"},null,512),[[f,o(t).slug]]),o(t).errors.slug?(n(),r("label",ae,[e("span",le,b(o(t).errors.slug),1)])):u("",!0)]),e("div",re,[ne,e("div",ie,[g(e("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=l=>i.value=l),onFocus:K,onBlur:L,onInput:E,onKeydown:a[3]||(a[3]=$(l=>d.value=!1,["esc"])),class:"input-bordered input w-full",placeholder:"Üst kategori ara"},null,544),[[f,i.value]]),d.value&&h.value.length>0?(n(),r("div",de,[e("ul",ce,[(n(!0),r(q,null,N(h.value,l=>(n(),r("li",{key:l.id},[e("a",{onMousedown:Me=>M(l),class:"py-2 text-sm hover:bg-base-200"},b(l.name),41,ue)]))),128))])])):u("",!0),o(t).parent_id?(n(),r("div",pe,[e("div",me,b(v.value),1),e("button",{type:"button",onClick:S,class:"btn btn-ghost btn-xs ml-2","aria-label":"Üst kategoriyi kaldır"},_e)])):u("",!0)]),o(t).errors.parent_id?(n(),r("label",ge,[e("span",ve,b(o(t).errors.parent_id),1)])):u("",!0)]),e("div",he,[fe,g(e("select",{"onUpdate:modelValue":a[4]||(a[4]=l=>o(t).status=l),class:"select-bordered select w-full"},we,512),[[A,o(t).status]]),o(t).errors.status?(n(),r("label",ke,[e("span",Ce,b(o(t).errors.status),1)])):u("",!0)]),e("div",ze,[e("button",{type:"button",onClick:a[5]||(a[5]=l=>T(o(_).category.id)),class:"btn btn-error btn-outline btn-sm order-2 sm:btn-md sm:order-1"}," Kategoriyi Sil "),e("button",{type:"submit",class:"btn btn-primary btn-sm order-1 sm:btn-md sm:order-2",disabled:o(t).processing||z.value},[o(t).processing?(n(),r("span",Le)):u("",!0),G(" Kategoriyi Güncelle ")],8,Ke)])],32)])])])]))}});export{Be as default};
