import{Q as N,r as m,T as $,m as S,s as z,c as i,o as n,a as e,y as F,l as K,h as d,n as _,u as s,t as c,k as f,v as w,e as M,F as O,g as I,E as U,N as A}from"./ssr-Cy795t1Y.js";import G from"./RichTextEditor-CBtLcxtp.js";import"./quill.snow-zMzE9p30.js";import"./app-J8fRyDi-.js";const H={class:"card"},J={class:"card-body p-6"},R=F('<div class="card-title flex items-center justify-between"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg><h2 class="text-gray-800 dark:text-white">Yeni Yazı Oluştur</h2></div></div>',1),W={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},Q={class:"md:col-span-2"},q={class:"form-control w-full"},P=e("label",{class:"label"},[e("span",{class:"label-text"},"Başlık")],-1),X={class:"relative"},Z=["value"],ee={key:0,class:"label"},te={class:"label-text-alt text-error"},se={class:"form-control w-full"},le=e("label",{class:"label"},[e("span",{class:"label-text"},"Slug")],-1),ae={class:"relative"},oe=["value"],re={key:0,class:"label"},ie={class:"label-text-alt text-error"},ne={class:"form-control w-full"},ue=e("label",{class:"label"},[e("span",{class:"label-text"},"Yayınlama Tarihi")],-1),de={class:"flex space-x-2"},ce={key:0,class:"label"},_e={class:"label-text-alt text-error"},ve={class:"md:col-span-2"},pe={class:"form-control w-full"},be=e("label",{class:"label"},[e("span",{class:"label-text"},"Özet")],-1),me={class:"relative"},he=["value"],ge={key:0,class:"label"},ye={class:"label-text-alt text-error"},xe={class:"md:col-span-2"},fe=e("label",{class:"label"},[e("span",{class:"label-text"},"Durumu")],-1),we={class:"dropdown w-full"},ke={class:"relative"},Se={key:0,tabindex:"0",class:"dropdown-content menu z-[1] max-h-60 w-full overflow-y-auto rounded-box bg-base-100 p-2 shadow"},ze=["onClick"],Ce={key:0,class:"label"},Oe={class:"label-text-alt text-error"},Ie=e("label",{class:"label"},[e("span",{class:"label-text"},"Kategori")],-1),Ve={class:"dropdown w-full"},Te={class:"relative"},Ee={key:0,tabindex:"0",class:"dropdown-content menu z-[1] max-h-60 w-full overflow-y-auto rounded-box bg-base-100 p-2 shadow"},Le=["onClick"],je={key:0,class:"label"},De={class:"label-text-alt text-error"},Ye={class:"form-control w-full"},Be=e("label",{class:"label"},[e("span",{class:"label-text"},"Etiketler")],-1),Ne={class:"relative"},$e=["value"],Fe={key:0,class:"label"},Ke={class:"label-text-alt text-error"},Me={class:"form-control w-full"},Ue=e("label",{class:"label"},[e("span",{class:"label-text"},"SEO Anahtar Kelimeleri")],-1),Ae={class:"relative"},Ge=["value"],He={key:0,class:"label"},Je={class:"label-text-alt text-error"},Re={class:"form-control w-full"},We=e("label",{class:"label"},[e("span",{class:"label-text"},"SEO Meta Açıklaması")],-1),Qe={class:"relative"},qe=["value"],Pe={class:"mt-1 text-xs text-gray-500"},Xe={key:0,class:"label"},Ze={class:"label-text-alt text-error"},et=e("div",{class:"mt-1 text-xs text-gray-500"},[e("span",null,"İpucu: Bu açıklama arama sonuçlarında gösterilir. Boş bırakırsanız, özet kısmı kullanılacaktır.")],-1),tt={class:"form-control w-full"},st=e("label",{class:"label"},[e("span",{class:"label-text"},"Görüntülenme Sayısı")],-1),lt={class:"relative"},at=["value"],ot={class:"flex items-center space-x-2"},rt={class:"label cursor-pointer justify-start gap-2"},it=e("span",{class:"label-text"},"Çizim İçerir",-1),nt=e("div",{class:"divider"},null,-1),ut={class:"flex justify-end space-x-3"},dt=["disabled"],C="write_create_form",mt=Object.assign({name:"WriteCreateForm"},{__name:"WriteCreateForm",setup(ct){const{props:h}=N();m(h.categories||[]);const t=$({title:"",slug:"",content:"",published_at:"",summary:"",status:"draft",category_id:"",seo_keywords:"",meta_description:"",tags:"",views_count:0,hasDraw:!1}),a=m({title:"",slug:"",content:"",published_at:"",summary:"",status:"",category_id:"",seo_keywords:"",meta_description:"",tags:""}),u=m({date:"",time:""}),y=[{value:"draft",label:"Şablon"},{value:"published",label:"Yayında"},{value:"private",label:"Gizli"},{value:"link_only",label:"Sadece Link"}],p=m(""),b=m(""),x=m(y),g=m(h.categories||[]),V=()=>{const r=p.value.toLowerCase();x.value=y.filter(l=>l.label.toLowerCase().includes(r))},T=()=>{const r=b.value.toLowerCase();g.value=h.categories.filter(l=>l.name.toLowerCase().includes(r))},E=r=>{t.status=r.value,p.value=r.label,x.value=y},L=r=>{t.category_id=r.id,b.value=r.name,g.value=h.categories},j=()=>{p.value="",t.status="",x.value=y},D=()=>{b.value="",t.category_id="",g.value=h.categories};S(()=>{const r=y.find(l=>l.value===t.status);if(r&&(p.value=r.label),t.category_id){const l=h.categories.find(v=>v.id===t.category_id);l&&(b.value=l.name)}}),S(()=>{const r=new Date;u.value.date=r.toISOString().split("T")[0],u.value.time=r.toTimeString().slice(0,5)}),z(u.value,()=>{u.value.date&&u.value.time&&(t.published_at=`${u.value.date}T${u.value.time}:00`)},{deep:!0}),z(t,r=>{localStorage.setItem(C,JSON.stringify(r))},{deep:!0}),S(()=>{const r=localStorage.getItem(C);if(r){const l=JSON.parse(r);Object.assign(t,l)}});const Y=()=>{a.value.title=t.title?"":"Başlık zorunludur.",a.value.slug=t.slug?"":"Slug zorunludur.",a.value.content=t.content?"":"İçerik zorunludur.",a.value.published_at=u.value.date&&u.value.time?"":"Yayınlama tarihi zorunludur.",a.value.summary=t.summary?"":"Özet zorunludur.",a.value.category_id=t.category_id?"":"Kategori seçilmelidir.",a.value.published_at||(t.published_at=`${u.value.date}T${u.value.time}:00`)},B=()=>{Y(),Object.values(a.value).some(r=>r!=="")||t.post(route("writes.store"),{onSuccess:()=>{localStorage.removeItem(C),A.visit(route("dashboard"))}})};return z(()=>t.title,r=>{const l={ı:"i",İ:"i",ğ:"g",Ğ:"g",ü:"u",Ü:"u",ş:"s",Ş:"s",ö:"o",Ö:"o",ç:"c",Ç:"c"};let v=r;Object.entries(l).forEach(([o,k])=>{v=v.replace(new RegExp(o,"g"),k)}),t.slug=v.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}),(r,l)=>{var v;return n(),i("div",H,[e("div",J,[R,e("form",{onSubmit:K(B,["prevent"]),class:"space-y-6"},[e("div",W,[e("div",Q,[e("div",q,[P,e("div",X,[e("input",{type:"text",value:s(t).title,onInput:l[0]||(l[0]=o=>s(t).title=o.target.value),placeholder:"Yazının başlığını girin",class:_(["input-bordered input w-full",{"input-error":a.value.title||s(t).errors.title}])},null,42,Z)]),a.value.title||s(t).errors.title?(n(),i("label",ee,[e("span",te,c(a.value.title||s(t).errors.title),1)])):d("",!0)])]),e("div",null,[e("div",se,[le,e("div",ae,[e("input",{type:"text",value:s(t).slug,onInput:l[1]||(l[1]=o=>s(t).slug=o.target.value),placeholder:"örnek-yazı-slug",class:_(["input-bordered input w-full",{"input-error":a.value.slug||s(t).errors.slug}])},null,42,oe)]),a.value.slug||s(t).errors.slug?(n(),i("label",re,[e("span",ie,c(a.value.slug||s(t).errors.slug),1)])):d("",!0)])]),e("div",null,[e("div",ne,[ue,e("div",de,[f(e("input",{type:"date","onUpdate:modelValue":l[2]||(l[2]=o=>u.value.date=o),class:_(["input-bordered input w-full",{"input-error":a.value.published_at||s(t).errors.published_at}])},null,2),[[w,u.value.date]]),f(e("input",{type:"time","onUpdate:modelValue":l[3]||(l[3]=o=>u.value.time=o),class:_(["input-bordered input w-full",{"input-error":a.value.published_at||s(t).errors.published_at}])},null,2),[[w,u.value.time]])]),a.value.published_at||s(t).errors.published_at?(n(),i("label",ce,[e("span",_e,c(a.value.published_at||s(t).errors.published_at),1)])):d("",!0)])]),e("div",ve,[e("div",pe,[be,e("div",me,[e("textarea",{value:s(t).summary,onInput:l[4]||(l[4]=o=>s(t).summary=o.target.value),placeholder:"Yazının kısa özeti",rows:"3",class:_(["textarea-bordered textarea w-full",{"textarea-error":a.value.summary||s(t).errors.summary}])},null,42,he)]),a.value.summary||s(t).errors.summary?(n(),i("label",ge,[e("span",ye,c(a.value.summary||s(t).errors.summary),1)])):d("",!0)])]),e("div",xe,[M(G,{modelValue:s(t).content,"onUpdate:modelValue":l[5]||(l[5]=o=>s(t).content=o),label:"İçerik",error:a.value.content||s(t).errors.content,placeholder:"İçeriği buraya yazın...",height:"400px"},null,8,["modelValue","error"])]),e("div",null,[fe,e("div",we,[e("div",ke,[f(e("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=o=>p.value=o),onInput:V,placeholder:"Durum seçin veya arayın...",class:_(["input-bordered input w-full pr-10",{"input-error":a.value.status||s(t).errors.status}]),tabindex:"0"},null,34),[[w,p.value]]),p.value?(n(),i("button",{key:0,onClick:j,class:"btn btn-ghost btn-xs btn-circle absolute right-2 top-1/2 -translate-y-1/2"}," ✕ ")):d("",!0)]),x.value.length>0?(n(),i("ul",Se,[(n(!0),i(O,null,I(x.value,o=>(n(),i("li",{key:o.value},[e("a",{onClick:k=>E(o)},c(o.label),9,ze)]))),128))])):d("",!0)]),a.value.status||s(t).errors.status?(n(),i("label",Ce,[e("span",Oe,c(a.value.status||s(t).errors.status),1)])):d("",!0)]),e("div",null,[Ie,e("div",Ve,[e("div",Te,[f(e("input",{type:"text","onUpdate:modelValue":l[7]||(l[7]=o=>b.value=o),onInput:T,placeholder:"Kategori seçin veya arayın...",class:_(["input-bordered input w-full pr-10",{"input-error":a.value.category_id||s(t).errors.category_id}]),tabindex:"0"},null,34),[[w,b.value]]),b.value?(n(),i("button",{key:0,onClick:D,class:"btn btn-ghost btn-xs btn-circle absolute right-2 top-1/2 -translate-y-1/2"}," ✕ ")):d("",!0)]),g.value&&g.value.length>0?(n(),i("ul",Ee,[(n(!0),i(O,null,I(g.value,o=>(n(),i("li",{key:o.id},[e("a",{onClick:k=>L(o)},c(o.name),9,Le)]))),128))])):d("",!0)]),a.value.category_id||s(t).errors.category_id?(n(),i("label",je,[e("span",De,c(a.value.category_id||s(t).errors.category_id),1)])):d("",!0)]),e("div",null,[e("div",Ye,[Be,e("div",Ne,[e("input",{type:"text",value:s(t).tags,onInput:l[8]||(l[8]=o=>s(t).tags=o.target.value),placeholder:"etiket1, etiket2, etiket3",class:_(["input-bordered input w-full",{"input-error":a.value.tags||s(t).errors.tags}])},null,42,$e)]),a.value.tags||s(t).errors.tags?(n(),i("label",Fe,[e("span",Ke,c(a.value.tags||s(t).errors.tags),1)])):d("",!0)])]),e("div",null,[e("div",Me,[Ue,e("div",Ae,[e("input",{type:"text",value:s(t).seo_keywords,onInput:l[9]||(l[9]=o=>s(t).seo_keywords=o.target.value),placeholder:"anahtar1, anahtar2, anahtar3",class:_(["input-bordered input w-full",{"input-error":a.value.seo_keywords||s(t).errors.seo_keywords}])},null,42,Ge)]),a.value.seo_keywords||s(t).errors.seo_keywords?(n(),i("label",He,[e("span",Je,c(a.value.seo_keywords||s(t).errors.seo_keywords),1)])):d("",!0)])]),e("div",null,[e("div",Re,[We,e("div",Qe,[e("textarea",{value:s(t).meta_description,onInput:l[10]||(l[10]=o=>s(t).meta_description=o.target.value),placeholder:"Arama motorları için kısa bir açıklama (max 160 karakter)",class:_(["textarea-bordered textarea w-full",{"textarea-error":a.value.meta_description||s(t).errors.meta_description}]),maxlength:"160",rows:"2"},null,42,qe),e("div",Pe,c(((v=s(t).meta_description)==null?void 0:v.length)||0)+"/160",1)]),a.value.meta_description||s(t).errors.meta_description?(n(),i("label",Xe,[e("span",Ze,c(a.value.meta_description||s(t).errors.meta_description),1)])):d("",!0),et])]),e("div",null,[e("div",tt,[st,e("div",lt,[e("input",{type:"number",value:s(t).views_count,onInput:l[11]||(l[11]=o=>s(t).views_count=o.target.value),class:"input-bordered input w-full",readonly:""},null,40,at)])])]),e("div",ot,[e("label",rt,[f(e("input",{type:"checkbox","onUpdate:modelValue":l[12]||(l[12]=o=>s(t).hasDraw=o),class:"checkbox checkbox-neutral"},null,512),[[U,s(t).hasDraw]]),it])])]),nt,e("div",ut,[e("button",{type:"submit",class:_(["btn btn-primary",{loading:s(t).processing}]),disabled:s(t).processing}," Yazıyı Kaydet ",10,dt)])],32)])])}}});export{mt as default};
