import{Q as S,i as c,l as x,E as F,g as t,b as u,F as P,m as R,t as l,h as d,j as L,q as N,U as T,n as b,N as z,o as s,e as E}from"./app-DhQCxfTn.js";/* empty css            */const M={class:"flex min-h-screen flex-col items-center justify-center"},W={key:0,class:"w-full max-w-md rounded-2xl border border-gray-200 bg-white p-6 shadow-sm"},j=u("h2",{class:"mb-2 text-2xl font-semibold text-gray-900"},"Quiz Completed!",-1),U=u("p",{class:"mb-4 text-gray-600"},"You have finished the quiz. Here's how you did:",-1),V={class:"space-y-2 text-left text-sm text-gray-800"},q={key:0,class:"ml-2 text-xs text-gray-500"},A={key:1,class:"relative w-full max-w-md rounded-2xl border border-gray-200 bg-white p-6 shadow-sm"},B={key:0,class:"absolute right-4 top-3 text-xs text-gray-400"},D={key:1,class:"mb-4 text-xl font-semibold text-gray-900"},G=["disabled"],H={__name:"TranslateWord",props:{gameType:String,packSlug:String,words:Array},setup(y){const i=y,f=S().props.languagePacks||[];c(()=>i.packSlug?f.find(r=>r.slug===i.packSlug):null);const e=x({isLoading:!0,isPlaying:!1,currentQuestion:null,userInput:"",showFeedback:!1,isCorrect:null,currentIndex:0,totalQuestions:0,userResponses:[]}),a=x([]),g=c(()=>Object.fromEntries(a.value.map(r=>[r.id,r]))),m=async()=>{if(!i.words||i.words.length<5){alert("Oyunu başlatmak için en az 5 kelime gereklidir.");return}e.value.isLoading=!0,await new Promise(r=>{a.value=[...i.words].sort(()=>Math.random()-.5),e.value.totalQuestions=a.value.length,e.value.currentIndex=0,e.value.userResponses=[],r()}),e.value.isLoading=!1,e.value.isPlaying=!0,v()},v=()=>{if(e.value.currentIndex>=a.value.length){k();return}e.value.currentQuestion=a.value[e.value.currentIndex],e.value.userInput="",e.value.showFeedback=!1,e.value.isCorrect=null},p=()=>{!e.value.userInput.trim()||e.value.showFeedback||(e.value.showFeedback=!0,e.value.isCorrect=e.value.userInput.toLowerCase().trim()===e.value.currentQuestion.meaning.toLowerCase().trim(),e.value.userResponses.push({word_id:e.value.currentQuestion.id,correct:e.value.isCorrect}),setTimeout(()=>{e.value.currentIndex++,v()},2e3))},k=()=>{e.value.isPlaying=!1,C()},_=()=>{m()},C=()=>{if(!e.value.userResponses.length)return;const r=e.value.userResponses.map(n=>({word_id:n.word_id,review_count:1,incorrect_count:n.correct?0:1}));z.post("/update-words",{words:r},{preserveState:!0,onSuccess:()=>console.log("Words updated successfully"),onError:n=>console.error("Failed to update word stats",n)})},Q=c(()=>e.value.currentQuestion?e.value.isCorrect?"Correct!":`Wrong! The correct translation is: ${e.value.currentQuestion.meaning}`:""),I=c(()=>e.value.totalQuestions?`${e.value.currentIndex+1}/${e.value.totalQuestions}`:"0/0");return c(()=>a.value.length&&e.value.currentIndex===a.value.length-1),F(()=>{m()}),(r,n)=>(s(),t("div",M,[e.value.isPlaying?(s(),t("div",A,[a.value.length?(s(),t("span",B,l(I.value),1)):d("",!0),e.value.currentQuestion?(s(),t("h2",D,' What is the meaning of "'+l(e.value.currentQuestion.word)+'"? ',1)):d("",!0),L(u("input",{"onUpdate:modelValue":n[0]||(n[0]=o=>e.value.userInput=o),disabled:e.value.showFeedback,type:"text",placeholder:"Enter the translation",class:"w-full rounded-lg border border-gray-300 p-3 text-base text-gray-900 shadow-sm placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",onKeyup:T(p,["enter"])},null,40,G),[[N,e.value.userInput]]),e.value.showFeedback?(s(),t("p",{key:2,class:b(["mt-4 text-sm font-medium",e.value.isCorrect?"text-green-600":"text-red-600"])},l(Q.value),3)):d("",!0),e.value.showFeedback?d("",!0):(s(),t("button",{key:3,onClick:p,class:"mt-6 w-full rounded-lg bg-black px-4 py-2 text-sm font-medium text-white shadow-md transition hover:bg-gray-700"}," Submit Answer "))])):(s(),t("div",W,[j,U,u("ul",V,[(s(!0),t(P,null,R(e.value.userResponses,o=>{var h,w;return s(),t("li",{key:o.word_id,class:"flex justify-between rounded-md bg-gray-50 px-4 py-2"},[u("span",{class:b(o.correct?"text-green-600":"text-red-600")},l(((h=g.value[o.word_id])==null?void 0:h.word)||"Unknown"),3),u("span",null,[E(l(o.correct?"✓":"✗")+" ",1),o.correct?d("",!0):(s(),t("span",q," (Correct: "+l(((w=g.value[o.word_id])==null?void 0:w.meaning)||"Unknown")+") ",1))])])}),128))]),u("button",{onClick:_,class:"mt-6 w-full rounded-lg bg-black px-4 py-2 text-sm font-medium text-white transition hover:bg-gray-700"}," Restart Quiz ")]))]))}};export{H as default};
