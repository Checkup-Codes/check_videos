import{Q as se,e as f,U as re,p as A,m as le,D as P,A as ie,N as ae,y as de,c as l,j as ue,a as t,b as W,f as Q,w as Y,h,o as r,F as x,t as M,g as D,u as J,i as ce,n as T,l as X}from"./ssr-B6-2V9vM.js";import{_ as ve}from"./ExcalidrawComponent-BQXGCdFt.js";import{_ as fe}from"./CheckScreen-Bm-pS_MC.js";import{_ as he}from"./app-C42vRrUM.js";import{u as Z}from"./useGsapAnimation-tlMQfVaN.js";import{u as ge}from"./useProcessedQuillContent-vbmPJbgE.js";/* empty css            */import"./index-CH_iu5NA.js";const me={key:0,class:"relative h-[calc(100vh-3rem)] w-full lg:h-[calc(100vh-5.5rem)]"},pe={class:"mx-auto max-w-4xl"},we={class:"bg-background transition-colors"},xe={class:"p-6 pt-12 sm:p-8 sm:pt-16"},ke={class:"mb-8"},be={key:0,class:"space-y-3"},ye={class:"mb-4 text-3xl font-bold leading-tight text-foreground sm:text-4xl"},_e={class:"mb-6 flex flex-wrap items-center gap-3 text-sm"},Ce={class:"inline-flex items-center gap-1.5 text-muted-foreground"},Me={class:"font-medium"},ze={class:"flex flex-wrap items-center gap-x-2 gap-y-1"},je={class:"inline-flex items-center gap-1"},Te={key:0,class:"text-muted-foreground/50"},Le={key:0,class:"text-muted-foreground/40"},Se=["title"],Be={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-3 w-3"},Ee={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"},Oe={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},He={class:"hidden sm:inline"},Ae={key:0,class:"space-y-3"},De={key:1},Ie={class:"content-container"},Ne=["innerHTML"],Re={key:1,class:"content-placeholder"},Ve={key:2,class:"mt-10 flex items-center gap-2 border-t border-border/60 pt-6"},$e={class:"inline-flex items-center gap-2 rounded-md bg-muted/50 px-3 py-1.5 text-sm"},Pe={class:"font-medium text-foreground"},Ue={class:"flex h-full flex-col"},qe={class:"flex-1 overflow-y-auto p-4"},Fe={key:0,class:"py-8 text-center text-sm text-muted-foreground"},Ke={key:1,class:"space-y-0.5"},Ge=["onClick"],We={class:"rounded-lg border border-border bg-popover shadow-lg"},Qe={class:"overflow-y-auto p-3",style:{"max-height":"calc(100vh - 220px)"}},Ye={key:0,class:"py-4 text-center text-xs text-muted-foreground"},Je={key:1,class:"space-y-0.5"},Xe=["onClick"],Ze=Object.assign({name:"WriteByCategoryScreen"},{__name:"Screen",setup(et){const{props:z}=se();f(z.category||{});const a=f(z.write||{}),k=f(null),_=f(null),u=f(!1),g=f(!1),L=re("categories",null),ee=A(()=>L&&Array.isArray(L)&&L.length>0?L:z.categories&&Array.isArray(z.categories)&&z.categories.length>0?z.categories:[]),I=A(()=>{if(!a.value)return[];const o=ee.value;if(o.length===0)return[];const e=[],n=new Set;if(a.value.categories&&Array.isArray(a.value.categories)&&a.value.categories.length>0&&a.value.categories.forEach(s=>{if(s&&s.id&&!n.has(s.id)){n.add(s.id);const i=N(s.id,o);i.length>0&&e.push(i)}}),a.value.category&&a.value.category.id&&!n.has(a.value.category.id)){n.add(a.value.category.id);const s=N(a.value.category.id,o);s.length>0&&e.push(s)}if(a.value.category_id&&!n.has(a.value.category_id)){n.add(a.value.category_id);const s=N(a.value.category_id,o);s.length>0&&e.push(s)}return e}),N=(o,e)=>{if(!o||!e||e.length===0)return[];const n=e.find(d=>d&&d.id===o);if(!n)return[];const s=[n];let i=n;for(;i&&i.parent_id;){const d=e.find(c=>c&&c.id===i.parent_id);if(d)s.unshift(d),i=d;else break}return s},te=o=>route("categories.show",{category:o.slug}),v=f(!1),m=f([]),C=f(!1),S=f(null),B=f(!1),U=()=>{const o=window.innerWidth>=1536;B.value=o,o&&C.value&&m.value.length>0?v.value=!0:o||(v.value=!1)},b=A(()=>!a.value.title),R=ge(k,A(()=>g.value?a.value.content:"")),ne=o=>{if(!o)return"";const e=new Date(o),n=["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],s=e.getDate(),i=n[e.getMonth()],d=e.getFullYear();return`${s} ${i} ${d}`},oe=o=>new Intl.NumberFormat("tr-TR").format(o);let p=null,E=null,O=null,H=null;const V=()=>{if(!k.value)return;p&&p.disconnect();const o=k.value.querySelectorAll("h1, h2, h3, h4, h5, h6");if(o.length===0)return;const e=80,n=()=>{let i=null,d=1/0;o.forEach(c=>{if(!c.id)return;const w=c.getBoundingClientRect(),y=Math.abs(w.top-e);w.top<=e+20&&w.bottom>e&&y<d&&(d=y,i=c.id)}),i||o.forEach(c=>{if(!c.id)return;const w=c.getBoundingClientRect();if(w.top<=e+100){const y=Math.abs(w.top-e);y<d&&(d=y,i=c.id)}}),i&&(S.value=i)};p=new IntersectionObserver(i=>{n()},{root:null,rootMargin:`-${e}px 0px -70% 0px`,threshold:[0,.1,.25,.5,.75,1]}),o.forEach(i=>{i.id&&p.observe(i)});const s=()=>{n()};window.addEventListener("scroll",s,{passive:!0}),p._scrollHandler=s,n()};le(()=>{U(),O=()=>{U()},window.addEventListener("resize",O),H=n=>{if(u.value&&_.value&&_.value.hasUnsavedChanges)return n.preventDefault(),n.returnValue="Kaydedilmemiş değişiklikler var. Sayfadan ayrılmak istediğinizden emin misiniz?",n.returnValue},window.addEventListener("beforeunload",H),g.value=!1;const o=document.querySelector(".content-placeholder");o?(E=new IntersectionObserver(n=>{n.forEach(s=>{s.isIntersecting&&!g.value&&(g.value=!0,P(()=>{Z(k,{duration:.8}),setTimeout(()=>{$(),m.value.length>0&&(V(),B.value&&(v.value=!0))},100)}))})},{threshold:.1,rootMargin:"50px"}),E.observe(o)):(g.value=!0,P(()=>{Z(k,{duration:.8}),setTimeout(()=>{$(),m.value.length>0&&(V(),B.value&&(v.value=!0))},100)}));const e=new URLSearchParams(window.location.search);if(u.value=e.has("draw"),a.value.content&&a.value.content.includes("<img")){const n=/<img[^>]+src="([^"]+)"/g;let s;for(;(s=n.exec(a.value.content))!==null;){const i=new Image;i.src=s[1]}}}),ie(()=>{E&&E.disconnect(),p&&(p.disconnect(),p._scrollHandler&&window.removeEventListener("scroll",p._scrollHandler)),O&&window.removeEventListener("resize",O),H&&window.removeEventListener("beforeunload",H)}),ae.on("before",o=>{if(u.value&&_.value&&_.value.hasUnsavedChanges&&!confirm("Kaydedilmemiş değişiklikler var. Sayfadan ayrılmak istediğinizden emin misiniz?")){o.preventDefault();return}const e=document.querySelector(".write-list-container");e&&localStorage.setItem("writeListScrollPosition",e.scrollTop.toString())});const $=()=>{if(!k.value)return;const o=k.value.querySelectorAll(".heading-wrapper h1, .heading-wrapper h2, .heading-wrapper h3, .heading-wrapper h4, .heading-wrapper h5, .heading-wrapper h6"),e=[];o.forEach(n=>{var c,w,y;const s=n.id||((y=(w=(c=n.closest(".heading-wrapper"))==null?void 0:c.querySelector("a.heading-anchor"))==null?void 0:w.href)==null?void 0:y.split("#")[1])||`heading-${e.length}`;n.id||(n.id=s);const i=parseInt(n.tagName.charAt(1)),d=n.textContent.trim();d&&e.push({id:s,text:d,level:i})}),m.value=e,C.value=e.length>0},q=()=>{u.value&&_.value&&_.value.hasUnsavedChanges&&!confirm("Kaydedilmemiş değişiklikler var. Metne dönmek istediğinizden emin misiniz?")||(u.value=!u.value,!u.value&&!g.value&&(g.value=!0))},F=o=>{const e=document.getElementById(o);if(e){S.value=o;const i=e.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:i,behavior:"smooth"}),window.innerWidth<1536&&(v.value=!1)}},K=o=>{switch(o){case 1:return"pl-0";case 2:return"pl-4";case 3:return"pl-6";case 4:return"pl-8";case 5:return"pl-10";case 6:return"pl-12";default:return"pl-0"}},G=o=>"",j=()=>{v.value=!v.value};return de(R,()=>{g.value&&R.value&&P(()=>{$(),m.value.length>0&&(V(),B.value&&(v.value=!0))})},{flush:"post"}),(o,e)=>u.value?(r(),l("div",me,[t("div",{class:"absolute left-4 top-[53px] z-10 lg:top-4"},[t("button",{onClick:q,class:"flex items-center gap-2 rounded-lg border border-border bg-card px-3 py-2 text-sm text-foreground shadow-lg transition-all hover:bg-accent"},[...e[0]||(e[0]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})],-1),Q(" Metne Dön ",-1)])])]),W(ve,{ref_key:"excalidrawRef",ref:_,write:a.value},null,8,["write"])])):(r(),ue(fe,{key:1},{default:Y(()=>[t("div",pe,[t("div",we,[t("div",xe,[t("div",ke,[b.value?(r(),l("div",be,[...e[1]||(e[1]=[t("div",{class:"skeleton h-8 w-3/4 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-24 rounded-md"},null,-1)])])):(r(),l(x,{key:1},[t("h1",ye,M(a.value.title),1),t("div",_e,[t("span",Ce,[e[2]||(e[2]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t("span",Me,M(ne(a.value.created_at)),1)]),I.value.length>0?(r(),l(x,{key:0},[e[3]||(e[3]=t("span",{class:"text-muted-foreground/40"},"•",-1)),t("div",ze,[(r(!0),l(x,null,D(I.value,(n,s)=>(r(),l(x,{key:s},[t("div",je,[(r(!0),l(x,null,D(n,(i,d)=>(r(),l(x,{key:i.id},[W(J(ce),{href:te(i),class:"font-semibold text-primary transition-colors hover:underline"},{default:Y(()=>[Q(M(i.name),1)]),_:2},1032,["href"]),d<n.length-1?(r(),l("span",Te,"/")):h("",!0)],64))),128))]),s<I.value.length-1?(r(),l("span",Le,",")):h("",!0)],64))),128))])],64)):h("",!0),a.value.hasDraw||a.value.writeDraws&&a.value.writeDraws.length>0?(r(),l(x,{key:1},[e[4]||(e[4]=t("span",{class:"text-muted-foreground/40"},"•",-1)),t("button",{onClick:q,class:T(["inline-flex h-6 items-center justify-center gap-1 rounded-md border border-input bg-background px-2 text-xs font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",u.value?"bg-accent text-accent-foreground":""]),title:u.value?"Metne Dön":"Çizime Git"},[(r(),l("svg",Be,[u.value?(r(),l("path",Ee)):(r(),l("path",Oe))])),t("span",He,M(u.value?"Metne Dön":"Çizime Git"),1)],10,Se)],64)):h("",!0)])],64))]),b.value?(r(),l("div",Ae,[...e[5]||(e[5]=[t("div",{class:"skeleton h-4 w-full rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-5/6 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-4/6 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-full rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-3/4 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-5/6 rounded-md"},null,-1),t("div",{class:"skeleton h-32 w-full rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-2/3 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-full rounded-md"},null,-1)])])):(r(),l("div",De,[t("div",Ie,[g.value?(r(),l("div",{key:0,class:"article-content ql-editor",ref_key:"contentRef",ref:k,innerHTML:J(R)},null,8,Ne)):(r(),l("div",Re,[...e[6]||(e[6]=[t("div",{class:"space-y-3"},[t("div",{class:"skeleton h-4 w-full rounded-md"}),t("div",{class:"skeleton h-4 w-5/6 rounded-md"}),t("div",{class:"skeleton h-4 w-4/6 rounded-md"}),t("div",{class:"skeleton h-4 w-full rounded-md"}),t("div",{class:"skeleton h-4 w-3/4 rounded-md"})],-1)])]))])])),b.value?h("",!0):(r(),l("div",Ve,[t("div",$e,[e[7]||(e[7]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-muted-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),t("span",Pe,M(oe(a.value.views_count)),1),e[8]||(e[8]=t("span",{class:"text-muted-foreground"},"görüntülenme",-1))])]))])])]),!b.value&&C.value&&!u.value?(r(),l("button",{key:0,onClick:j,class:"fixed right-4 top-1/2 z-50 flex h-10 w-10 -translate-y-1/2 items-center justify-center rounded-full bg-primary text-primary-foreground shadow-lg transition-colors hover:bg-primary/90 2xl:hidden"},[...e[9]||(e[9]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-5 w-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1)])])):h("",!0),!b.value&&C.value&&!u.value?(r(),l("div",{key:1,class:T(["fixed right-0 top-12 z-40 h-[calc(100vh-3rem)] lg:h-[calc(100vh-5.5rem)] w-80 transform border-l border-border bg-popover shadow-2xl transition-transform duration-300 2xl:hidden",{"translate-x-full":!v.value}])},[t("div",Ue,[t("div",{class:"flex items-center justify-between border-b border-border p-4"},[e[11]||(e[11]=t("h3",{class:"text-lg font-semibold text-foreground"},"İçindekiler",-1)),t("button",{onClick:j,class:"inline-flex h-8 w-8 items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"},[...e[10]||(e[10]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",qe,[m.value.length===0?(r(),l("div",Fe," İçindekiler bulunamadı ")):(r(),l("nav",Ke,[(r(!0),l(x,null,D(m.value,(n,s)=>(r(),l("a",{key:s,onClick:X(i=>F(n.id),["prevent"]),class:T(["block rounded-md px-2 py-1.5 text-sm transition-colors",[K(n.level),G(n.id),S.value===n.id?"bg-accent font-medium text-accent-foreground":"text-muted-foreground hover:bg-accent/50 hover:text-foreground"]])},M(n.text),11,Ge))),128))]))])])],2)):h("",!0),!b.value&&C.value&&!u.value?(r(),l("button",{key:2,onClick:j,class:"fixed right-4 top-28 z-50 hidden h-10 w-10 items-center justify-center rounded-full bg-primary text-primary-foreground shadow-lg transition-colors hover:bg-primary/90 2xl:flex"},[...e[12]||(e[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-5 w-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1)])])):h("",!0),!b.value&&C.value&&!u.value?(r(),l("div",{key:3,class:T(["fixed right-4 top-28 z-30 hidden w-64 transition-all duration-300 ease-in-out 2xl:block",v.value?"translate-x-0 opacity-100":"pointer-events-none translate-x-full opacity-0"])},[t("div",We,[t("div",{class:"flex items-center justify-between border-b border-border p-3"},[e[14]||(e[14]=t("h3",{class:"text-sm font-semibold text-foreground"},"İçindekiler",-1)),t("button",{onClick:j,class:"inline-flex h-6 w-6 items-center justify-center rounded-md text-xs font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"},[...e[13]||(e[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Qe,[m.value.length===0?(r(),l("div",Ye," İçindekiler bulunamadı ")):(r(),l("nav",Je,[(r(!0),l(x,null,D(m.value,(n,s)=>(r(),l("a",{key:s,onClick:X(i=>F(n.id),["prevent"]),class:T(["block rounded-md px-2 py-1 text-xs transition-colors",[K(n.level),G(n.id),S.value===n.id?"bg-accent font-medium text-accent-foreground":"text-muted-foreground hover:bg-accent/50 hover:text-foreground"]])},M(n.text),11,Xe))),128))]))])])],2)):h("",!0),!b.value&&C.value&&v.value&&!u.value?(r(),l("div",{key:4,onClick:j,class:"fixed inset-0 z-30 bg-black/20 2xl:hidden"})):h("",!0)]),_:1}))}}),dt=he(Ze,[["__scopeId","data-v-1992a886"]]);export{dt as default};
