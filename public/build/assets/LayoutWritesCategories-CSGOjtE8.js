import{Q as L,g as c,y as M,B as O,b as t,s as j,z as I,c as V,f as W,u as A,w as S,a as D,n as H,r as K,e as _,j as Q,o as f,L as q,$ as G,F as J,M as k}from"./ssr-ig3NHSec.js";import{_ as R}from"./CheckLayout-BMfdLN4X.js";import T from"./SidebarLayoutWrite-DoUyWp7v.js";import X from"./SidebarLayoutCategory-DrWwq6kB.js";import{_ as Y}from"./FlashMessage-CfURZB1K.js";import{u as Z}from"./useSidebar-DY2OGuvv.js";import"./WriteList-DbuC1ccX.js";import"./IconCalendar-BfkwtWG1.js";import"./IconEye-CLXoZaiO.js";import"./IconLock-DjTjDc7T.js";import"./IconLink-BTJjiR8W.js";import"./app-BD4itwoa.js";/* empty css            */import"./SubSidebarScreen-D78j-fFx.js";import"./IconMenu-Q_lVPW_H.js";import"./IconFolder-DzIRb_WB.js";import"./IconX-Cxs00XqT.js";import"./IconFilter-BCDMulbE.js";import"./CategoryTree-lNNLcgLQ.js";import"./IconChevronDown-CNbZZX62.js";function ee(){var a;const{props:d}=L(),i=c(((a=d.flash)==null?void 0:a.success)||"");return M(()=>{var s;return(s=d.flash)==null?void 0:s.success},s=>{s?i.value=s:i.value=""}),{flashMessage:i}}const ye=Object.assign({name:"LayoutWritesCategories"},{__name:"LayoutWritesCategories",setup(d){const{isCollapsed:i}=Z(),{flashMessage:a}=ee(),s=O(),m=c(typeof window<"u"?window.innerWidth:1024),v=t(()=>m.value<1024),h=()=>{typeof window<"u"&&(m.value=window.innerWidth)},N=()=>{a.value=""},o=L(),p=t(()=>{var e;return((e=o.props.screen)==null?void 0:e.name)||"writes"}),P={writes:T,categories:X},x=t(()=>!!(o.props.auth&&o.props.auth.user)),C=t(()=>{const e=o.url||"",l=e.startsWith("/writes/")&&e!=="/writes"&&!e.includes("/writes/create")&&!e.includes("/writes/edit"),g=e==="/writes/create"||e.includes("/writes/edit"),u=e.startsWith("/categories/")&&e!=="/categories"&&!e.includes("/categories/create")&&!e.includes("/categories/edit"),$=e==="/categories/create"||e.includes("/categories/edit");return l||g||u||$}),r=t(()=>{if(x.value)return!1;const e=o.url||"",l=e.includes("/writes/")&&!e.includes("/writes/create")&&!e.includes("/writes/edit"),g=e.includes("/categories/")&&!e.includes("/categories/create")&&!e.includes("/categories/edit");if(l||g){const u=o.props.write;if(u&&u.status==="link_only")return!0}return!1}),w=t(()=>v.value?!C.value:!0),b=t(()=>v.value?C.value:!0),B=t(()=>i.value&&p.value&&!r.value&&w.value&&P[p.value]||null),n=c(s.getters["Writes/isCollapsed"]);M(()=>s.getters["Writes/isCollapsed"],e=>{n.value=e},{immediate:!0});const E=t(()=>({"transition-all duration-300":!0,"lg:ml-[-200px]":n.value&&!r.value,"lg:ml-[00px]":!n.value&&!r.value,"lg:ml-0":r.value})),z=e=>{n.value=e},y=c(!1);j(()=>{y.value=!0,document.body.style.overflow="hidden",typeof window<"u"&&(m.value=window.innerWidth,window.addEventListener("resize",h))}),I(()=>{document.body.style.overflow="",typeof window<"u"&&window.removeEventListener("resize",h)});const F=t(()=>o.props.categories||[]),U=t(()=>o.props.writes||[]);return k("categories",F),k("writes",U),(e,l)=>(f(),V(J,null,[W(Y,{message:A(a),onClose:N},null,8,["message"]),W(R,{isCollapsed:!r.value,"show-sidebar-on-mobile":w.value,"show-main-content-on-mobile":b.value},{sidebar:S(()=>[w.value&&!r.value&&y.value?(f(),_(q,{key:0,max:5,include:["SidebarLayoutWrite","SidebarLayoutCategory"]},[(f(),_(G(B.value),{key:p.value,"onUpdate:isNarrow":z},null,32))],1024)):Q("",!0)]),default:S(()=>[D("div",{class:H([b.value?"block":"hidden lg:block",E.value])},[K(e.$slots,"screen")],2)]),_:3},8,["isCollapsed","show-sidebar-on-mobile","show-main-content-on-mobile"])],64))}});export{ye as default};
