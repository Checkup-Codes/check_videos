import{Q as W,r as N,s as h,D,p as i,m as F,z as H,Y as S,c as P,e as _,u as c,w as k,a as j,n as p,b as z,j as L,h as I,o as f,_ as V,$ as A,F as E}from"./ssr-COd_82OS.js";import{_ as K,a as O}from"./FlashMessage-DjzFBhBL.js";import Q from"./SidebarLayoutWrite-B1HoV6Mm.js";import Y from"./SidebarLayoutCategory-BdF5NX7X.js";import{u as q}from"./useSidebar-KcsnjOHv.js";import"./WriteList-DeekeFea.js";import"./app-udAvpmnU.js";/* empty css            */import"./CheckSubsidebar-DxX88Bkq.js";import"./SubSidebarScreen-BduBfr8C.js";import"./CategoryTree-rrpPRD2C.js";function G(){var l;const{props:d}=W(),o=N(((l=d.flash)==null?void 0:l.success)||"");return h(()=>{var t;return(t=d.flash)==null?void 0:t.success},t=>{t&&(o.value=t,setTimeout(()=>{o.value=""},3e3))}),{flashMessage:o}}const le=Object.assign({name:"LayoutWritesCategories"},{__name:"LayoutWritesCategories",setup(d){var C;const{isCollapsed:o,isMobile:l,sidebarStyle:t}=q(),{flashMessage:x}=G(),m=D(),B=i(()=>m.getters["Theme/getCurrentTheme"]),b=W(),{props:s}=b,n=((C=s.screen)==null?void 0:C.name)||"",M={writes:Q,categories:Y},v=i(()=>!!(s.auth&&s.auth.user)),a=i(()=>{var y;if(console.log("LayoutWritesCategories Debug:",{isLoggedIn:v.value,currentUrl:s.url,currentWrite:s.write,writeStatus:(y=s.write)==null?void 0:y.status,screenName:n}),v.value)return console.log("User is logged in, showing sidebar"),!1;const e=b.url||s.url||"",g=e.includes("/writes/")&&!e.includes("/writes/create")&&!e.includes("/writes/edit"),w=e.includes("/categories/")&&!e.includes("/categories/create")&&!e.includes("/categories/edit");if(console.log("Page check:",{currentUrl:e,isWriteShowPage:g,isCategoryShowPage:w}),g||w){const r=s.write;if(console.log("Current write status:",r==null?void 0:r.status),r&&r.status==="link_only")return console.log("Hiding sidebar for link-only write"),!0}return console.log("Showing sidebar (default)"),!1});h(a,e=>{console.log("shouldHideSidebarContent changed:",e)},{immediate:!0});const U=i(()=>o.value&&n&&!a.value&&M[n]||null),u=N(m.getters["Writes/isCollapsed"]);h(()=>m.getters["Writes/isCollapsed"],e=>{u.value=e},{immediate:!0});const T=i(()=>({"transition-all duration-300":!0,"lg:ml-[-200px]":u.value&&!a.value,"lg:ml-[00px]":!u.value&&!a.value,"lg:ml-0":a.value})),$=e=>{u.value=e};return F(()=>{document.body.style.overflow="hidden"}),H(()=>{document.body.style.overflow=""}),S("categories",s.categories||[]),S("writes",s.writes||[]),(e,g)=>(f(),P(E,null,[_(K,{message:c(x)},null,8,["message"]),_(O,{isCollapsed:!a.value,class:p(B.value)},{sidebar:k(()=>[a.value?I("",!0):(f(),L(V,{key:0,max:5,include:["SidebarLayoutWrite","SidebarLayoutCategory"]},[(f(),L(A(U.value),{key:c(n),class:p(c(t)),"onUpdate:isNarrow":$},null,40,["class"]))],1024))]),default:k(()=>[j("div",{class:p([c(l)?"hidden lg:block":"block",T.value])},[z(e.$slots,"screen")],2)]),_:3},8,["isCollapsed","class"])],64))}});export{le as default};
