import{l as d,T as F,i as w,L as P,x as V,g as r,o as n,b as e,e as j,j as v,h as p,q as g,u as a,t as _,O as z,F as S,m as E,f as $,P as q}from"./app-bzSXT2H4.js";/* empty css            */const D={class:"bg-base-100 mx-auto mt-10 w-full max-w-full px-5 lg:mt-0"},N={class:"container mx-auto p-4"},U={class:"card bg-base-100 shadow-xl"},A={class:"card-body"},H=e("h2",{class:"card-title text-primary"},"Yeni Kategori",-1),O=e("p",{class:"text-sm opacity-80"}," Kategorileriniz için kategoriler oluşturun. İsterseniz bir üst kategori seçebilirsiniz. ",-1),R=e("div",{class:"divider"},null,-1),X={class:"form-control w-full"},I=e("label",{class:"label"},[e("span",{class:"label-text"},"İsim")],-1),W={key:0,class:"label"},Y={class:"label-text-alt text-error"},G={class:"form-control mt-4 w-full"},J=e("label",{class:"label"},[e("span",{class:"label-text"},"Slug")],-1),Q={key:0,class:"label"},Z={class:"label-text-alt text-error"},ee={class:"form-control mt-4 w-full"},te=e("label",{class:"label"},[e("span",{class:"label-text"},"Üst Kategori")],-1),se={class:"relative w-full"},ae={key:0,class:"absolute z-30 mt-1 w-full"},le={class:"menu bg-base-100 rounded-box border-base-300 max-h-60 w-full overflow-y-auto border p-2 shadow-lg"},oe=["onMousedown"],re={key:1,class:"mt-2 flex items-center"},ne={class:"badge badge-primary"},ie=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),ue=[ie],ce={key:0,class:"label"},de={class:"label-text-alt text-error"},pe={class:"card-actions mt-6 justify-end"},_e=["disabled"],he={key:0,class:"loading loading-spinner loading-sm"},fe={__name:"CategoriesCreateFrom",props:{categories:{type:Array,default:()=>[]}},setup(x){const i=d(x.categories||[]),s=F({name:"",slug:"",parent_id:""}),u=d(""),h=d(""),c=d(!1),b=d(!1),f=d(null),y=()=>{clearTimeout(f.value),m.value.length>0&&(c.value=!0)},k=()=>{f.value=setTimeout(()=>{c.value=!1},100)},m=w(()=>!i.value||i.value.length===0?[]:u.value?i.value.filter(t=>t&&t.name&&t.name.toLowerCase().includes(u.value.toLowerCase())):i.value),C=w(()=>!s.name||!s.slug),K=()=>{s.parent_id="",u.value.length>=1&&(c.value=!0)},L=t=>{!t||!t.id||(s.parent_id=t.id,u.value=t.name,h.value=t.name,q(()=>{c.value=!1}))},T=()=>{s.parent_id="",u.value="",h.value=""};P(()=>s.name,t=>{t&&(s.slug=t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))});const M=()=>{s.post(route("categories.store")).then(()=>{console.log("Kategori başarıyla oluşturuldu"),s.reset(),u.value="",h.value=""}).catch(t=>{console.error("Kategori oluşturulurken hata:",t)})};V(()=>{(!i.value||i.value.length===0)&&B(),document.addEventListener("keydown",t=>{t.key==="Escape"&&(c.value=!1)})});const B=async()=>{b.value=!0;try{const t=await fetch(route("categories.index"),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw new Error(`HTTP error: ${t.status}`);const l=await t.json();l&&l.categories&&(i.value=l.categories,console.log("Kategoriler yüklendi:",i.value.length))}catch(t){console.error("Kategoriler yüklenirken hata:",t)}finally{b.value=!1}};return(t,l)=>(n(),r("div",D,[e("div",N,[e("div",U,[e("div",A,[H,O,R,e("form",{onSubmit:j(M,["prevent"])},[e("div",X,[I,v(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=o=>a(s).name=o),class:"input input-bordered w-full",placeholder:"Kategori ismi"},null,512),[[g,a(s).name]]),a(s).errors.name?(n(),r("label",W,[e("span",Y,_(a(s).errors.name),1)])):p("",!0)]),e("div",G,[J,v(e("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=o=>a(s).slug=o),class:"input input-bordered w-full",placeholder:"kategori-slug"},null,512),[[g,a(s).slug]]),a(s).errors.slug?(n(),r("label",Q,[e("span",Z,_(a(s).errors.slug),1)])):p("",!0)]),e("div",ee,[te,e("div",se,[v(e("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=o=>u.value=o),onFocus:y,onBlur:k,onInput:K,onKeydown:l[3]||(l[3]=z(o=>c.value=!1,["esc"])),class:"input input-bordered w-full",placeholder:"Üst kategori ara"},null,544),[[g,u.value]]),c.value&&m.value.length>0?(n(),r("div",ae,[e("ul",le,[(n(!0),r(S,null,E(m.value,o=>(n(),r("li",{key:o.id},[e("a",{onMousedown:ve=>L(o),class:"hover:bg-primary hover:text-primary-content"},_(o.name),41,oe)]))),128))])])):p("",!0),a(s).parent_id?(n(),r("div",re,[e("div",ne,_(h.value),1),e("button",{type:"button",onClick:T,class:"btn btn-ghost btn-xs ml-2","aria-label":"Üst kategoriyi kaldır"},ue)])):p("",!0)]),a(s).errors.parent_id?(n(),r("label",ce,[e("span",de,_(a(s).errors.parent_id),1)])):p("",!0)]),e("div",pe,[e("button",{type:"submit",class:"btn btn-primary",disabled:a(s).processing||C.value},[a(s).processing?(n(),r("span",he)):p("",!0),$(" Kategori Oluştur ")],8,_e)])],32)])])])]))}};export{fe as default};
