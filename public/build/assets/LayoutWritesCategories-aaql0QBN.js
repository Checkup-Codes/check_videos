import{Q as L,e as c,y as M,s as O,p as t,m as j,x as I,c as V,b as W,u as A,w as S,a as D,n as H,r as K,j as _,h as Q,o as v,L as q,$ as G,F as J,M as k}from"./ssr-CVKOEYhR.js";import{_ as R}from"./CheckLayout-BySOnfDa.js";import T from"./SidebarLayoutWrite-CqQfCqD6.js";import X from"./SidebarLayoutCategory-Cg2y_I4I.js";import{_ as Y}from"./FlashMessage-DhvP2lcm.js";import{u as Z}from"./useSidebar-BmBZYynl.js";import"./WriteList-Dxz9SwhW.js";import"./IconCalendar-ByvuyHt1.js";import"./IconEye-YSj31Dsl.js";import"./IconLock-Bh5zsCT0.js";import"./IconLink-CtP4zBZy.js";import"./app--BojfMby.js";/* empty css            */import"./SubSidebarScreen-Ujxqa4GJ.js";import"./IconMenu-UGYQoEhE.js";import"./IconFolder-oL2a--g1.js";import"./IconX-CmOP9j7K.js";import"./IconFilter-CDn_Wxh8.js";import"./CategoryTree-oHLx5vgV.js";import"./IconChevronDown-C6GB1noY.js";function ee(){var a;const{props:d}=L(),i=c(((a=d.flash)==null?void 0:a.success)||"");return M(()=>{var s;return(s=d.flash)==null?void 0:s.success},s=>{s?i.value=s:i.value=""}),{flashMessage:i}}const ye=Object.assign({name:"LayoutWritesCategories"},{__name:"LayoutWritesCategories",setup(d){const{isCollapsed:i}=Z(),{flashMessage:a}=ee(),s=O(),m=c(typeof window<"u"?window.innerWidth:1024),f=t(()=>m.value<1024),h=()=>{typeof window<"u"&&(m.value=window.innerWidth)},x=()=>{a.value=""},o=L(),p=t(()=>{var e;return((e=o.props.screen)==null?void 0:e.name)||"writes"}),N={writes:T,categories:X},P=t(()=>!!(o.props.auth&&o.props.auth.user)),C=t(()=>{const e=o.url||"",l=e.startsWith("/writes/")&&e!=="/writes"&&!e.includes("/writes/create")&&!e.includes("/writes/edit"),g=e==="/writes/create"||e.includes("/writes/edit"),u=e.startsWith("/categories/")&&e!=="/categories"&&!e.includes("/categories/create")&&!e.includes("/categories/edit"),z=e==="/categories/create"||e.includes("/categories/edit");return l||g||u||z}),r=t(()=>{if(P.value)return!1;const e=o.url||"",l=e.includes("/writes/")&&!e.includes("/writes/create")&&!e.includes("/writes/edit"),g=e.includes("/categories/")&&!e.includes("/categories/create")&&!e.includes("/categories/edit");if(l||g){const u=o.props.write;if(u&&u.status==="link_only")return!0}return!1}),w=t(()=>f.value?!C.value:!0),b=t(()=>f.value?C.value:!0),B=t(()=>i.value&&p.value&&!r.value&&w.value&&N[p.value]||null),n=c(s.getters["Writes/isCollapsed"]);M(()=>s.getters["Writes/isCollapsed"],e=>{n.value=e},{immediate:!0});const E=t(()=>({"transition-all duration-300":!0,"lg:ml-[-200px]":n.value&&!r.value,"lg:ml-[00px]":!n.value&&!r.value,"lg:ml-0":r.value})),F=e=>{n.value=e},y=c(!1);j(()=>{y.value=!0,document.body.style.overflow="hidden",typeof window<"u"&&(m.value=window.innerWidth,window.addEventListener("resize",h))}),I(()=>{document.body.style.overflow="",typeof window<"u"&&window.removeEventListener("resize",h)});const U=t(()=>o.props.categories||[]),$=t(()=>o.props.writes||[]);return k("categories",U),k("writes",$),(e,l)=>(v(),V(J,null,[W(Y,{message:A(a),onClose:x},null,8,["message"]),W(R,{isCollapsed:!r.value,"show-sidebar-on-mobile":w.value,"show-main-content-on-mobile":b.value},{sidebar:S(()=>[w.value&&!r.value&&y.value?(v(),_(q,{key:0,max:5,include:["SidebarLayoutWrite","SidebarLayoutCategory"]},[(v(),_(G(B.value),{key:p.value,"onUpdate:isNarrow":F},null,32))],1024)):Q("",!0)]),default:S(()=>[D("div",{class:H([b.value?"block":"hidden lg:block",E.value])},[K(e.$slots,"screen")],2)]),_:3},8,["isCollapsed","show-sidebar-on-mobile","show-main-content-on-mobile"])],64))}});export{ye as default};
