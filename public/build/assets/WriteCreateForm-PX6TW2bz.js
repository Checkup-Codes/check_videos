import{Q as K,r as g,T as N,m as C,s as z,c as i,a as t,A as $,l as A,h as c,n as p,u as s,t as v,k,v as w,e as M,F as E,g as I,H as U,o as n,N as G}from"./ssr-CAy-S3_r.js";import H from"./RichTextEditor-DEK7qunV.js";import"./quill.snow-h3o3GN4v.js";import"./app-CfiUSdJ9.js";/* empty css            */const J={class:"card"},P={class:"card-body p-6"},R={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},W={class:"md:col-span-2"},Q={class:"form-control w-full"},q={class:"relative"},X=["value"],Z={key:0,class:"label"},ee={class:"label-text-alt text-error"},te={class:"form-control w-full"},le={class:"relative"},se=["value"],ae={key:0,class:"label"},re={class:"label-text-alt text-error"},oe={class:"form-control w-full"},ie={class:"flex space-x-2"},ne={key:0,class:"label"},ue={class:"label-text-alt text-error"},de={class:"md:col-span-2"},ce={class:"form-control w-full"},ve={class:"relative"},pe=["value"],me={key:0,class:"label"},be={class:"label-text-alt text-error"},ge={class:"md:col-span-2"},_e={class:"dropdown w-full"},ye={class:"relative"},fe={key:0,tabindex:"0",class:"dropdown-content menu z-[1] max-h-60 w-full overflow-y-auto rounded-box bg-base-100 p-2 shadow"},he=["onClick"],xe={key:0,class:"label"},ke={class:"label-text-alt text-error"},we={class:"dropdown w-full"},Se={class:"relative"},Ce={key:0,tabindex:"0",class:"dropdown-content menu z-[1] max-h-60 w-full overflow-y-auto rounded-box bg-base-100 p-2 shadow"},ze=["onClick"],Ee={key:0,class:"label"},Ie={class:"label-text-alt text-error"},Oe={class:"form-control w-full"},Fe={class:"relative"},Ve=["value"],je={key:0,class:"label"},De={class:"label-text-alt text-error"},Le={class:"form-control w-full"},Te={class:"relative"},Ye=["value"],Be={key:0,class:"label"},Ke={class:"label-text-alt text-error"},Ne={class:"form-control w-full"},$e={class:"relative"},Ae=["value"],Me={class:"mt-1 text-xs text-gray-500"},Ue={key:0,class:"label"},Ge={class:"label-text-alt text-error"},He={class:"form-control w-full"},Je={class:"relative"},Pe=["value"],Re={class:"flex items-center space-x-2"},We={class:"label cursor-pointer justify-start gap-2"},Qe={class:"flex justify-end space-x-3"},qe=["disabled"],Xe=["disabled","title"],f="write_create_form",rt=Object.assign({name:"WriteCreateForm"},{__name:"WriteCreateForm",setup(Ze){const{props:_}=K();g(_.categories||[]);const e=N({title:"",slug:"",content:"",published_at:"",summary:"",status:"draft",category_id:"",seo_keywords:"",meta_description:"",tags:"",views_count:0,hasDraw:!1});e.processing=!1;const a=g({title:"",slug:"",content:"",published_at:"",summary:"",status:"",category_id:"",seo_keywords:"",meta_description:"",tags:""}),u=g({date:"",time:""}),h=[{value:"draft",label:"Şablon"},{value:"published",label:"Yayında"},{value:"private",label:"Gizli"},{value:"link_only",label:"Sadece Link"}],m=g(""),b=g(""),x=g(h),y=g(_.categories||[]),O=()=>{const o=m.value.toLowerCase();x.value=h.filter(l=>l.label.toLowerCase().includes(o))},F=()=>{const o=b.value.toLowerCase();y.value=_.categories.filter(l=>l.name.toLowerCase().includes(o))},V=o=>{e.status=o.value,m.value=o.label,x.value=h},j=o=>{e.category_id=o.id,b.value=o.name,y.value=_.categories},D=()=>{m.value="",e.status="",x.value=h},L=()=>{b.value="",e.category_id="",y.value=_.categories};C(()=>{const o=h.find(l=>l.value===e.status);if(o&&(m.value=o.label),e.category_id){const l=_.categories.find(d=>d.id===e.category_id);l&&(b.value=l.name)}}),C(()=>{const o=new Date;u.value.date=o.toISOString().split("T")[0],u.value.time=o.toTimeString().slice(0,5)}),z(u.value,()=>{u.value.date&&u.value.time&&(e.published_at=`${u.value.date}T${u.value.time}:00`)},{deep:!0}),z(e,o=>{const{processing:l,...d}=o;localStorage.setItem(f,JSON.stringify(d))},{deep:!0}),C(()=>{e.processing=!1;const o=localStorage.getItem(f);if(o)try{const l=JSON.parse(o),{processing:d,...r}=l;Object.keys(r).length>0&&(r.title||r.content||r.category_id)?Object.assign(e,r):localStorage.removeItem(f)}catch(l){console.error("Error parsing localStorage data:",l),localStorage.removeItem(f)}e.processing=!1,console.log("Form mounted. Processing:",e.processing),console.log("Form data:",e.data())});const T=()=>{Object.keys(a.value).forEach(o=>{a.value[o]=""}),(!e.title||e.title.trim()==="")&&(a.value.title="Başlık zorunludur."),(!e.slug||e.slug.trim()==="")&&(a.value.slug="Slug zorunludur."),(!e.content||e.content.trim()==="")&&(a.value.content="İçerik zorunludur."),e.category_id||(a.value.category_id="Kategori seçilmelidir."),(!e.summary||e.summary.trim()==="")&&(a.value.summary="Özet önerilir (opsiyonel)."),u.value.date&&u.value.time?e.published_at=`${u.value.date}T${u.value.time}:00`:e.published_at=null,console.log("Validation completed. Errors:",a.value)},Y=()=>{T(),console.log("Form errors:",a.value),console.log("Form data:",e.data()),console.log("Publish date obj:",u.value),["title","slug","content","category_id"].some(d=>a.value[d]!=="")?console.log("Form validation failed - critical errors present"):e.post(route("writes.store"),{onSuccess:()=>{localStorage.removeItem(f),G.visit(route("dashboard"))},onError:d=>{console.log("Server errors:",d)}})},B=()=>{e.reset(),e.processing=!1,Object.keys(a.value).forEach(o=>{a.value[o]=""}),u.value={date:"",time:""},localStorage.removeItem(f),console.log("Form reset completed")};return z(()=>e.title,o=>{const l={ı:"i",İ:"i",ğ:"g",Ğ:"g",ü:"u",Ü:"u",ş:"s",Ş:"s",ö:"o",Ö:"o",ç:"c",Ç:"c"};let d=o;Object.entries(l).forEach(([r,S])=>{d=d.replace(new RegExp(r,"g"),S)}),e.slug=d.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}),(o,l)=>{var d;return n(),i("div",J,[t("div",P,[l[26]||(l[26]=$('<div class="card-title flex items-center justify-between"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg><h2 class="text-gray-800 dark:text-white">Yeni Yazı Oluştur</h2></div></div>',1)),t("form",{onSubmit:A(Y,["prevent"]),class:"space-y-6"},[t("div",R,[t("div",W,[t("div",Q,[l[13]||(l[13]=t("label",{class:"label"},[t("span",{class:"label-text"},"Başlık")],-1)),t("div",q,[t("input",{type:"text",value:s(e).title,onInput:l[0]||(l[0]=r=>s(e).title=r.target.value),placeholder:"Yazının başlığını girin",class:p(["input-bordered input w-full",{"input-error":a.value.title||s(e).errors.title}])},null,42,X)]),a.value.title||s(e).errors.title?(n(),i("label",Z,[t("span",ee,v(a.value.title||s(e).errors.title),1)])):c("",!0)])]),t("div",null,[t("div",te,[l[14]||(l[14]=t("label",{class:"label"},[t("span",{class:"label-text"},"Slug")],-1)),t("div",le,[t("input",{type:"text",value:s(e).slug,onInput:l[1]||(l[1]=r=>s(e).slug=r.target.value),placeholder:"örnek-yazı-slug",class:p(["input-bordered input w-full",{"input-error":a.value.slug||s(e).errors.slug}])},null,42,se)]),a.value.slug||s(e).errors.slug?(n(),i("label",ae,[t("span",re,v(a.value.slug||s(e).errors.slug),1)])):c("",!0)])]),t("div",null,[t("div",oe,[l[15]||(l[15]=t("label",{class:"label"},[t("span",{class:"label-text"},"Yayınlama Tarihi")],-1)),t("div",ie,[k(t("input",{type:"date","onUpdate:modelValue":l[2]||(l[2]=r=>u.value.date=r),class:p(["input-bordered input w-full",{"input-error":a.value.published_at||s(e).errors.published_at}])},null,2),[[w,u.value.date]]),k(t("input",{type:"time","onUpdate:modelValue":l[3]||(l[3]=r=>u.value.time=r),class:p(["input-bordered input w-full",{"input-error":a.value.published_at||s(e).errors.published_at}])},null,2),[[w,u.value.time]])]),a.value.published_at||s(e).errors.published_at?(n(),i("label",ne,[t("span",ue,v(a.value.published_at||s(e).errors.published_at),1)])):c("",!0)])]),t("div",de,[t("div",ce,[l[16]||(l[16]=t("label",{class:"label"},[t("span",{class:"label-text"},"Özet")],-1)),t("div",ve,[t("textarea",{value:s(e).summary,onInput:l[4]||(l[4]=r=>s(e).summary=r.target.value),placeholder:"Yazının kısa özeti",rows:"3",class:p(["textarea-bordered textarea w-full",{"textarea-error":a.value.summary||s(e).errors.summary}])},null,42,pe)]),a.value.summary||s(e).errors.summary?(n(),i("label",me,[t("span",be,v(a.value.summary||s(e).errors.summary),1)])):c("",!0)])]),t("div",ge,[M(H,{modelValue:s(e).content,"onUpdate:modelValue":l[5]||(l[5]=r=>s(e).content=r),label:"İçerik",error:a.value.content||s(e).errors.content,placeholder:"İçeriği buraya yazın...",height:"400px"},null,8,["modelValue","error"])]),t("div",null,[l[17]||(l[17]=t("label",{class:"label"},[t("span",{class:"label-text"},"Durumu")],-1)),t("div",_e,[t("div",ye,[k(t("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=r=>m.value=r),onInput:O,placeholder:"Durum seçin veya arayın...",class:p(["input-bordered input w-full pr-10",{"input-error":a.value.status||s(e).errors.status}]),tabindex:"0"},null,34),[[w,m.value]]),m.value?(n(),i("button",{key:0,onClick:D,class:"btn btn-ghost btn-xs btn-circle absolute right-2 top-1/2 -translate-y-1/2"}," ✕ ")):c("",!0)]),x.value.length>0?(n(),i("ul",fe,[(n(!0),i(E,null,I(x.value,r=>(n(),i("li",{key:r.value},[t("a",{onClick:S=>V(r)},v(r.label),9,he)]))),128))])):c("",!0)]),a.value.status||s(e).errors.status?(n(),i("label",xe,[t("span",ke,v(a.value.status||s(e).errors.status),1)])):c("",!0)]),t("div",null,[l[18]||(l[18]=t("label",{class:"label"},[t("span",{class:"label-text"},"Kategori")],-1)),t("div",we,[t("div",Se,[k(t("input",{type:"text","onUpdate:modelValue":l[7]||(l[7]=r=>b.value=r),onInput:F,placeholder:"Kategori seçin veya arayın...",class:p(["input-bordered input w-full pr-10",{"input-error":a.value.category_id||s(e).errors.category_id}]),tabindex:"0"},null,34),[[w,b.value]]),b.value?(n(),i("button",{key:0,onClick:L,class:"btn btn-ghost btn-xs btn-circle absolute right-2 top-1/2 -translate-y-1/2"}," ✕ ")):c("",!0)]),y.value&&y.value.length>0?(n(),i("ul",Ce,[(n(!0),i(E,null,I(y.value,r=>(n(),i("li",{key:r.id},[t("a",{onClick:S=>j(r)},v(r.name),9,ze)]))),128))])):c("",!0)]),a.value.category_id||s(e).errors.category_id?(n(),i("label",Ee,[t("span",Ie,v(a.value.category_id||s(e).errors.category_id),1)])):c("",!0)]),t("div",null,[t("div",Oe,[l[19]||(l[19]=t("label",{class:"label"},[t("span",{class:"label-text"},"Etiketler")],-1)),t("div",Fe,[t("input",{type:"text",value:s(e).tags,onInput:l[8]||(l[8]=r=>s(e).tags=r.target.value),placeholder:"etiket1, etiket2, etiket3",class:p(["input-bordered input w-full",{"input-error":a.value.tags||s(e).errors.tags}])},null,42,Ve)]),a.value.tags||s(e).errors.tags?(n(),i("label",je,[t("span",De,v(a.value.tags||s(e).errors.tags),1)])):c("",!0)])]),t("div",null,[t("div",Le,[l[20]||(l[20]=t("label",{class:"label"},[t("span",{class:"label-text"},"SEO Anahtar Kelimeleri")],-1)),t("div",Te,[t("input",{type:"text",value:s(e).seo_keywords,onInput:l[9]||(l[9]=r=>s(e).seo_keywords=r.target.value),placeholder:"anahtar1, anahtar2, anahtar3",class:p(["input-bordered input w-full",{"input-error":a.value.seo_keywords||s(e).errors.seo_keywords}])},null,42,Ye)]),a.value.seo_keywords||s(e).errors.seo_keywords?(n(),i("label",Be,[t("span",Ke,v(a.value.seo_keywords||s(e).errors.seo_keywords),1)])):c("",!0)])]),t("div",null,[t("div",Ne,[l[21]||(l[21]=t("label",{class:"label"},[t("span",{class:"label-text"},"SEO Meta Açıklaması")],-1)),t("div",$e,[t("textarea",{value:s(e).meta_description,onInput:l[10]||(l[10]=r=>s(e).meta_description=r.target.value),placeholder:"Arama motorları için kısa bir açıklama (max 160 karakter)",class:p(["textarea-bordered textarea w-full",{"textarea-error":a.value.meta_description||s(e).errors.meta_description}]),maxlength:"160",rows:"2"},null,42,Ae),t("div",Me,v(((d=s(e).meta_description)==null?void 0:d.length)||0)+"/160",1)]),a.value.meta_description||s(e).errors.meta_description?(n(),i("label",Ue,[t("span",Ge,v(a.value.meta_description||s(e).errors.meta_description),1)])):c("",!0),l[22]||(l[22]=t("div",{class:"mt-1 text-xs text-gray-500"},[t("span",null,"İpucu: Bu açıklama arama sonuçlarında gösterilir. Boş bırakırsanız, özet kısmı kullanılacaktır.")],-1))])]),t("div",null,[t("div",He,[l[23]||(l[23]=t("label",{class:"label"},[t("span",{class:"label-text"},"Görüntülenme Sayısı")],-1)),t("div",Je,[t("input",{type:"number",value:s(e).views_count,onInput:l[11]||(l[11]=r=>s(e).views_count=r.target.value),class:"input-bordered input w-full",readonly:""},null,40,Pe)])])]),t("div",Re,[t("label",We,[k(t("input",{type:"checkbox","onUpdate:modelValue":l[12]||(l[12]=r=>s(e).hasDraw=r),class:"checkbox checkbox-neutral"},null,512),[[U,s(e).hasDraw]]),l[24]||(l[24]=t("span",{class:"label-text"},"Çizim İçerir",-1))])])]),l[25]||(l[25]=t("div",{class:"divider"},null,-1)),t("div",Qe,[t("button",{type:"button",onClick:B,class:"btn btn-outline",disabled:s(e).processing},"Sıfırla",8,qe),t("button",{type:"submit",class:p(["btn btn-primary",{loading:s(e).processing}]),disabled:s(e).processing||!s(e).title||!s(e).slug||!s(e).content||!s(e).category_id,title:s(e).processing?"Kaydediliyor...":!s(e).title||!s(e).slug||!s(e).content||!s(e).category_id?"Lütfen gerekli alanları doldurun":"Yazıyı kaydet"},v(s(e).processing?"Kaydediliyor...":"Yazıyı Kaydet"),11,Xe)])],32)])])}}});export{rt as default};
