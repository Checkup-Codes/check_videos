import{Q as P,i as d,l as f,E as H,g as o,b as s,t as n,F as T,m as j,a as D,w as L,u as N,n as v,A as B,h as g,j as M,q as W,U as G,N as V,o as l,e as z,k as E}from"./app-BM0qUes5.js";/* empty css            */const F={class:"flex min-h-screen flex-col items-center justify-center"},$={key:0,class:"w-full max-w-md rounded-2xl border border-gray-200 bg-white p-6 shadow-sm"},q=s("h2",{class:"mb-2 text-2xl font-semibold text-gray-900"},"Test Özeti",-1),K={class:"mb-4 text-center"},O={class:"text-4xl font-bold text-gray-900"},U=s("p",{class:"text-sm text-gray-600"},"Puan",-1),Y={class:"mb-4 grid grid-cols-2 gap-4 rounded-lg bg-gray-50 p-4"},Z={class:"text-center"},J={class:"text-2xl font-bold text-green-600"},X=s("p",{class:"text-sm text-gray-600"},"Doğru",-1),ee={class:"text-center"},te={class:"text-2xl font-bold text-red-600"},se=s("p",{class:"text-sm text-gray-600"},"Yanlış",-1),re={class:"mb-4 space-y-2 text-left text-sm text-gray-800"},ne={class:"flex gap-2"},ae={class:"mb-4 h-1 w-full overflow-hidden rounded-full bg-gray-200"},oe={class:"mb-4 text-right text-sm text-gray-500"},le={key:0,class:"space-y-4"},ue={class:"flex items-center justify-between"},ie={class:"text-xl font-semibold text-gray-900"},ce=["disabled"],de={class:"mt-1 text-sm text-gray-500"},ge={key:0,class:"rounded-lg bg-blue-50 p-3"},ve=s("p",{class:"text-sm text-blue-600"},"Örnek Cümle:",-1),pe={key:0,class:"mt-1 text-sm text-gray-700"},he={key:1,class:"mt-1 text-sm text-gray-700"},me=["disabled"],xe={class:"mt-1 font-medium text-gray-900"},ye={__name:"TranslateWord",props:{gameType:String,packSlug:String,words:Array,gameConfig:Object},setup(w){const r=w,_=P().props.languagePacks||[];d(()=>r.packSlug?_.find(t=>t.slug===r.packSlug):null);const e=f({isLoading:!0,isPlaying:!1,currentQuestion:null,userInput:"",showAnswer:!1,progress:0,currentIndex:0,totalQuestions:0,userResponses:[],hintShown:!1,currentHintIndex:0}),c=f([]),y=d(()=>Object.fromEntries(c.value.map(t=>[t.id,t]))),p=async()=>{if(!r.words||r.words.length<5){alert("Oyunu başlatmak için en az 5 kelime gereklidir.");return}e.value.isLoading=!0;let t=[...r.words];r.gameConfig.difficulty!=="all"&&(t=t.filter(a=>a.difficulty_level===parseInt(r.gameConfig.difficulty))),r.gameConfig.learningStatus!=="all"&&(t=t.filter(a=>a.learning_status===parseInt(r.gameConfig.learningStatus))),r.gameConfig.wordSelection==="difficult"?t.sort((a,i)=>i.incorrect_count-a.incorrect_count):r.gameConfig.wordSelection==="easy"?t.sort((a,i)=>a.incorrect_count-i.incorrect_count):t.sort(()=>Math.random()-.5);const u=Math.min(parseInt(r.gameConfig.questionCount),t.length);t=t.slice(0,u),await new Promise(a=>{c.value=t,e.value.totalQuestions=c.value.length,e.value.currentIndex=0,e.value.userResponses=[],a()}),e.value.isLoading=!1,e.value.isPlaying=!0,h()},b=()=>{if(!e.value.currentQuestion.example_sentences||e.value.currentQuestion.example_sentences.length===0){e.value.hintShown=!0;return}e.value.hintShown?e.value.currentHintIndex=(e.value.currentHintIndex+1)%e.value.currentQuestion.example_sentences.length:(e.value.hintShown=!0,e.value.currentHintIndex=0)},h=()=>{if(e.value.currentIndex>=c.value.length){Q();return}e.value.currentQuestion=c.value[e.value.currentIndex],e.value.userInput="",e.value.showAnswer=!1,e.value.progress=0,e.value.hintShown=!1,e.value.currentHintIndex=0},k=d(()=>{if(!e.value.userResponses.length)return 0;const t=e.value.userResponses.filter(u=>u.correct).length;return Math.round(t/e.value.userResponses.length*100)}),C=t=>{switch(t){case"noun":return"İsim";case"verb":return"Fiil";case"adjective":return"Sıfat";case"adverb":return"Zarf";default:return"Bilinmiyor"}},I=d(()=>e.value.userResponses.filter(t=>t.correct).length),S=d(()=>e.value.userResponses.filter(t=>!t.correct).length),m=()=>{if(!e.value.userInput.trim()||e.value.showAnswer)return;e.value.isCorrect=e.value.userInput.toLowerCase().trim()===e.value.currentQuestion.meaning.toLowerCase().trim(),e.value.userResponses.push({word_id:e.value.currentQuestion.id,correct:e.value.isCorrect}),e.value.showAnswer=!0,e.value.progress=0;const t=setInterval(()=>{e.value.progress+=1,e.value.progress>=100&&(clearInterval(t),e.value.currentIndex++,e.value.userInput="",e.value.showAnswer=!1,e.value.progress=0,h())},20)},Q=()=>{e.value.isPlaying=!1,R()},A=()=>{e.value={isLoading:!0,isPlaying:!1,currentQuestion:null,userInput:"",showAnswer:!1,progress:0,currentIndex:0,totalQuestions:0,userResponses:[],hintShown:!1,currentHintIndex:0},p()},R=()=>{if(!e.value.userResponses.length)return;const t=e.value.userResponses.map(u=>({word_id:u.word_id,review_count:1,incorrect_count:u.correct?0:1}));V.post("/update-words",{words:t},{preserveState:!0,onSuccess:()=>console.log("Words updated successfully"),onError:u=>console.error("Failed to update word stats",u)})};return H(()=>{p()}),(t,u)=>{var a;return l(),o("div",F,[!e.value.isPlaying&&e.value.userResponses.length>0?(l(),o("div",$,[q,s("div",K,[s("p",O,n(k.value)+" / 100",1),U]),s("div",Y,[s("div",Z,[s("p",J,n(I.value),1),X]),s("div",ee,[s("p",te,n(S.value),1),se])]),s("ul",re,[(l(!0),o(T,null,j(e.value.userResponses,i=>{var x;return l(),o("li",{key:i.word_id,class:"flex justify-between rounded-md bg-gray-50 px-4 py-2"},[s("span",{class:v(i.correct?"text-green-600":"text-red-600")},n(((x=y.value[i.word_id])==null?void 0:x.word)||"Unknown"),3),s("span",null,n(i.correct?"✓":"✗"),1)])}),128))]),s("div",ne,[D(N(E),{href:`/rendition/words/${r.packSlug}`,class:"flex-1 rounded-lg bg-black px-4 py-2 text-center text-sm font-medium text-white transition hover:bg-gray-700"},{default:L(()=>[z(" Pakete Dön ")]),_:1},8,["href"]),s("button",{onClick:A,class:"flex-1 rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 transition hover:bg-gray-100"}," Tekrar Başla ")])])):(l(),o("div",{key:1,class:v(["relative w-full max-w-md rounded-2xl border border-gray-200 p-6 shadow-sm transition-colors duration-500",{"bg-white":!e.value.showAnswer,"bg-green-50":e.value.showAnswer&&e.value.isCorrect,"bg-red-50":e.value.showAnswer&&!e.value.isCorrect}])},[s("div",ae,[s("div",{class:"duration-2000 h-full bg-black transition-all",style:B({width:`${e.value.progress}%`})},null,4)]),s("div",oe," Soru "+n(e.value.currentIndex+1)+" / "+n(e.value.totalQuestions),1),e.value.currentQuestion?(l(),o("div",le,[s("div",null,[s("div",ue,[s("h2",ie,' "'+n(e.value.currentQuestion.word)+'" kelimesinin anlamı nedir? ',1),e.value.showAnswer?g("",!0):(l(),o("button",{key:0,onClick:b,class:"rounded-lg border border-gray-200 px-3 py-1 text-sm text-gray-600 hover:bg-gray-50",disabled:e.value.hintShown&&(!e.value.currentQuestion.example_sentences||e.value.currentQuestion.example_sentences.length<=1)},n(e.value.hintShown?`İpucu (${e.value.currentHintIndex+1}/${((a=e.value.currentQuestion.example_sentences)==null?void 0:a.length)||0})`:"İpucu Göster"),9,ce))]),s("p",de,"Kelime Türü: "+n(C(e.value.currentQuestion.word_type)),1)]),e.value.hintShown?(l(),o("div",ge,[ve,e.value.currentQuestion.example_sentences&&e.value.currentQuestion.example_sentences.length>0?(l(),o("p",pe,n(e.value.currentQuestion.example_sentences[e.value.currentHintIndex].sentence),1)):(l(),o("p",he,"Bu kelime için örnek cümle bulunmuyor."))])):g("",!0),M(s("input",{"onUpdate:modelValue":u[0]||(u[0]=i=>e.value.userInput=i),disabled:e.value.showAnswer,type:"text",placeholder:"Çeviriyi girin",class:"w-full rounded-lg border border-gray-300 p-3 text-base text-gray-900 shadow-sm placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyup:G(m,["enter"])},null,40,me),[[W,e.value.userInput]]),e.value.showAnswer?(l(),o("div",{key:1,class:v(["mt-2 rounded-lg p-3",{"bg-green-100":e.value.isCorrect,"bg-red-100":!e.value.isCorrect}])},[s("p",{class:v(["text-sm",{"text-green-600":e.value.isCorrect,"text-red-600":!e.value.isCorrect}])},n(e.value.isCorrect?"Doğru!":"Yanlış!"),3),s("p",xe,"Doğru cevap: "+n(e.value.currentQuestion.meaning),1)],2)):g("",!0),e.value.showAnswer?g("",!0):(l(),o("button",{key:2,onClick:m,class:"w-full rounded-lg bg-black px-4 py-2 text-sm font-medium text-white shadow-md transition hover:bg-gray-700"}," Cevabı Gönder "))])):g("",!0)],2))])}}};export{ye as default};
