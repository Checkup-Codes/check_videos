import{Q as G,l as v,T as R,L as E,x as P,A as Q,g as i,o as d,b as e,p as W,e as J,h as p,n as u,u as s,t as c,j as f,q as H,D as A,F as X,m as Z,v as ee,s as N,N as te}from"./app-LhKPFfpS.js";import{Q as se}from"./quill.snow-CGLxXHA4.js";import"./lodash-aSqrwiG9.js";/* empty css            */const le={class:"card"},ae={class:"card-body p-6"},oe=W('<div class="card-title flex items-center justify-between"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg><h2 class="text-gray-800 dark:text-white">Yeni Yazı Oluştur</h2></div></div>',1),re={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},ne={class:"md:col-span-2"},ie={class:"form-control w-full"},de=e("label",{class:"label"},[e("span",{class:"label-text"},"Başlık")],-1),ue={class:"relative"},ce=["value"],_e={key:0,class:"label"},pe={class:"label-text-alt text-error"},ve={class:"form-control w-full"},me=e("label",{class:"label"},[e("span",{class:"label-text"},"Slug")],-1),ge={class:"relative"},be=["value"],he={key:0,class:"label"},fe={class:"label-text-alt text-error"},ye={class:"form-control w-full"},xe=e("label",{class:"label"},[e("span",{class:"label-text"},"Yayınlama Tarihi")],-1),ke={class:"flex space-x-2"},we={key:0,class:"label"},Te={class:"label-text-alt text-error"},ze={class:"md:col-span-2"},Ie={class:"form-control w-full"},Ee=e("label",{class:"label"},[e("span",{class:"label-text"},"Özet")],-1),Me={class:"relative"},Ce=["value"],Fe={key:0,class:"label"},Be={class:"label-text-alt text-error"},De={class:"md:col-span-2"},Le={class:"form-control w-full"},Se=e("label",{class:"label"},[e("span",{class:"label-text"},"İçerik")],-1),je={class:"relative"},He={key:0,class:"upload-loading-overlay bg-base-100/50 absolute inset-0 z-20 flex items-center justify-center"},Ae=e("div",{class:"flex flex-col items-center gap-2"},[e("span",{class:"loading loading-spinner loading-lg text-primary"}),e("span",{class:"text-sm"},"Resim yükleniyor...")],-1),Ne=[Ae],Oe={key:0,class:"label"},Ye={class:"label-text-alt text-error"},qe={key:1,class:"toast toast-end z-50"},Ke=e("label",{class:"label"},[e("span",{class:"label-text"},"Durumu")],-1),Ue=e("option",{value:"draft"},"Şablon",-1),Ve=e("option",{value:"published"},"Yayında",-1),$e=e("option",{value:"private"},"Gizli",-1),Ge=[Ue,Ve,$e],Re={key:0,class:"label"},Pe={class:"label-text-alt text-error"},Qe=e("label",{class:"label"},[e("span",{class:"label-text"},"Kategori")],-1),We=e("option",{value:"",disabled:""},"Kategori seç",-1),Je=["value"],Xe={key:0,class:"label"},Ze={class:"label-text-alt text-error"},et={class:"form-control w-full"},tt=e("label",{class:"label"},[e("span",{class:"label-text"},"Kapak Resmi URL")],-1),st={class:"relative"},lt=["value"],at={key:0,class:"label"},ot={class:"label-text-alt text-error"},rt={class:"form-control w-full"},nt=e("label",{class:"label"},[e("span",{class:"label-text"},"Etiketler")],-1),it={class:"relative"},dt=["value"],ut={key:0,class:"label"},ct={class:"label-text-alt text-error"},_t={class:"form-control w-full"},pt=e("label",{class:"label"},[e("span",{class:"label-text"},"SEO Anahtar Kelimeleri")],-1),vt={class:"relative"},mt=["value"],gt={key:0,class:"label"},bt={class:"label-text-alt text-error"},ht={class:"form-control w-full"},ft=e("label",{class:"label"},[e("span",{class:"label-text"},"SEO Meta Açıklaması")],-1),yt={class:"relative"},xt=["value"],kt={class:"mt-1 text-xs text-gray-500"},wt={key:0,class:"label"},Tt={class:"label-text-alt text-error"},zt=e("div",{class:"mt-1 text-xs text-gray-500"},[e("span",null,"İpucu: Bu açıklama arama sonuçlarında gösterilir. Boş bırakırsanız, özet kısmı kullanılacaktır.")],-1),It={class:"form-control w-full"},Et=e("label",{class:"label"},[e("span",{class:"label-text"},"Görüntülenme Sayısı")],-1),Mt={class:"relative"},Ct=["value"],Ft={class:"flex items-center space-x-2"},Bt={class:"label cursor-pointer justify-start gap-2"},Dt=e("span",{class:"label-text"},"Çizim İçerir",-1),Lt=e("div",{class:"divider"},null,-1),St={class:"flex justify-end space-x-3"},jt=["disabled"],qt=Object.assign({name:"WriteCreateForm"},{__name:"WriteCreateForm",setup(Ht){const{props:O}=G(),Y=v(O.categories),t=R({title:"",slug:"",content:"",published_at:"",summary:"",status:"draft",category_id:"",cover_image:"",seo_keywords:"",meta_description:"",tags:"",views_count:0,hasDraw:!1}),l=v({title:"",slug:"",content:"",published_at:"",summary:"",status:"",category_id:"",cover_image:"",seo_keywords:"",meta_description:"",tags:""}),_=v({date:"",time:""});E(_.value,()=>{_.value.date&&_.value.time&&(t.published_at=`${_.value.date}T${_.value.time}:00`)},{deep:!0});const q=()=>{l.value.title=t.title?"":"Başlık zorunludur.",l.value.slug=t.slug?"":"Slug zorunludur.",l.value.content=t.content?"":"İçerik zorunludur.",l.value.published_at=_.value.date&&_.value.time?"":"Yayınlama tarihi zorunludur.",l.value.summary=t.summary?"":"Özet zorunludur.",l.value.category_id=t.category_id?"":"Kategori seçilmelidir.",l.value.published_at||(t.published_at=`${_.value.date}T${_.value.time}:00`)},K=()=>{q(),Object.values(l.value).some(r=>r!=="")||N.get("/sanctum/csrf-cookie").then(()=>{t.post(route("writes.store"),{onSuccess:()=>{te.visit(route("dashboard"))},onError:r=>{r.hasOwnProperty("token")||r.message==="CSRF token mismatch"?window.location.reload():console.error("Form submission errors:",r)}})})};E(()=>t.title,r=>{(!t.slug||t.slug==="")&&(t.slug=r.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim())});const g=v(null);let n,M=!1;const k=v(!1),U=v(""),w=v(!1),C=v(""),F=v("alert-info"),B=["#570DF8","#F000B8","#37CDBE","#3ABFF8","#36D399","#FBBD23","#F87272","#1f2937","#2A303C","#ffffff","#000000"],h=(r,a="alert-info")=>{C.value=r,F.value=a,w.value=!0,setTimeout(()=>{w.value=!1},3e3)},V=()=>{const r=document.createElement("input");r.setAttribute("type","file"),r.setAttribute("accept","image/*"),r.click(),r.onchange=async()=>{var o,D;const a=r.files[0];if(!a)return;if(!["image/jpeg","image/png","image/gif","image/jpg"].includes(a.type)){h("Only JPEG, PNG or GIF formats are supported.","alert-error");return}if(a.size>10*1024*1024){h("Image size must be less than 10MB.","alert-error");return}k.value=!0,U.value="";try{const b=n.getSelection(),I="img-loading-"+Date.now(),$=`
        <div id="${I}" class="skeleton-placeholder w-full my-4">
          <div class="skeleton h-32 w-full rounded-lg"></div>
          <div class="flex justify-center mt-2">
            <span class="loading loading-dots loading-md"></span>
          </div>
        </div>
      `;n.clipboard.dangerouslyPasteHTML(b.index,$);const L=new FormData;L.append("image",a);const S=document.head.querySelector('meta[name="csrf-token"]'),j={"Content-Type":"multipart/form-data"};S&&(j["X-CSRF-TOKEN"]=S.getAttribute("content"));const y=await N.post("/image-upload",L,{headers:j,withCredentials:!0});if(y.data.success&&y.data.url){const m=document.getElementById(I);if(m){const x=n.getIndex(n.scroll.descendant(Node,m)[0][0]);n.deleteText(x,m.outerHTML.length),n.insertEmbed(x,"image",y.data.url)}else n.insertEmbed(b.index,"image",y.data.url);h("Image uploaded successfully","alert-success")}else{const m=document.getElementById(I);if(m){const x=n.getIndex(n.scroll.descendant(Node,m)[0][0]);n.deleteText(x,m.outerHTML.length)}console.error("Image upload failed"),h("Error uploading image.","alert-error")}}catch(b){console.error("Image upload error:",b),h("Error uploading image: "+(((D=(o=b.response)==null?void 0:o.data)==null?void 0:D.message)||b.message),"alert-error")}finally{k.value=!1}}};P(()=>{n=new se(g.value,{theme:"snow",modules:{toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{color:B},{background:B}],[{font:[]}],[{align:[]}],["link","image"],["clean"]],handlers:{image:V}}},placeholder:"Write content here...",bounds:g.value,maxLength:1/0}),n.on("text-change",()=>{try{const r=n.root.innerHTML;t.content=r}catch(r){console.error("Content update error:",r)}}),setTimeout(()=>{if(t.content&&!M)try{n.root.innerHTML=t.content,M=!0}catch(r){console.error("Initial content load error:",r)}},100),g.value.style.height="400px",g.value&&g.value.classList.add("daisy-quill-editor")});let T=null;return E(()=>t.content,r=>{T&&clearTimeout(T),T=setTimeout(()=>{if(n&&r!==n.root.innerHTML)try{n.root.innerHTML=r||""}catch(a){console.error("Content update error in watcher:",a)}},300)}),Q(()=>{n&&(n=null)}),(r,a)=>{var z;return d(),i("div",le,[e("div",ae,[oe,e("form",{onSubmit:J(K,["prevent"]),class:"space-y-6"},[e("div",re,[e("div",ne,[e("div",ie,[de,e("div",ue,[e("input",{type:"text",value:s(t).title,onInput:a[0]||(a[0]=o=>s(t).title=o.target.value),placeholder:"Yazının başlığını girin",class:u(["input-bordered input w-full",{"input-error":l.value.title||s(t).errors.title}])},null,42,ce)]),l.value.title||s(t).errors.title?(d(),i("label",_e,[e("span",pe,c(l.value.title||s(t).errors.title),1)])):p("",!0)])]),e("div",null,[e("div",ve,[me,e("div",ge,[e("input",{type:"text",value:s(t).slug,onInput:a[1]||(a[1]=o=>s(t).slug=o.target.value),placeholder:"örnek-yazı-slug",class:u(["input-bordered input w-full",{"input-error":l.value.slug||s(t).errors.slug}])},null,42,be)]),l.value.slug||s(t).errors.slug?(d(),i("label",he,[e("span",fe,c(l.value.slug||s(t).errors.slug),1)])):p("",!0)])]),e("div",null,[e("div",ye,[xe,e("div",ke,[f(e("input",{type:"date","onUpdate:modelValue":a[2]||(a[2]=o=>_.value.date=o),class:u(["input-bordered input w-full",{"input-error":l.value.published_at||s(t).errors.published_at}])},null,2),[[H,_.value.date]]),f(e("input",{type:"time","onUpdate:modelValue":a[3]||(a[3]=o=>_.value.time=o),class:u(["input-bordered input w-full",{"input-error":l.value.published_at||s(t).errors.published_at}])},null,2),[[H,_.value.time]])]),l.value.published_at||s(t).errors.published_at?(d(),i("label",we,[e("span",Te,c(l.value.published_at||s(t).errors.published_at),1)])):p("",!0)])]),e("div",ze,[e("div",Ie,[Ee,e("div",Me,[e("textarea",{value:s(t).summary,onInput:a[4]||(a[4]=o=>s(t).summary=o.target.value),placeholder:"Yazının kısa özeti",rows:"3",class:u(["textarea-bordered textarea w-full",{"textarea-error":l.value.summary||s(t).errors.summary}])},null,42,Ce)]),l.value.summary||s(t).errors.summary?(d(),i("label",Fe,[e("span",Be,c(l.value.summary||s(t).errors.summary),1)])):p("",!0)])]),e("div",De,[e("div",Le,[Se,e("div",je,[e("div",{ref_key:"quillEditor",ref:g,class:u(["min-h-[300px] rounded border border-base-300 bg-base-100 p-3",{"border-error":l.value.content||s(t).errors.content}]),style:{height:"400px"}},null,2),k.value?(d(),i("div",He,Ne)):p("",!0)]),l.value.content||s(t).errors.content?(d(),i("label",Oe,[e("span",Ye,c(l.value.content||s(t).errors.content),1)])):p("",!0),w.value?(d(),i("div",qe,[e("div",{class:u(`alert ${F.value}`)},[e("span",null,c(C.value),1)],2)])):p("",!0)])]),e("div",null,[Ke,f(e("select",{"onUpdate:modelValue":a[5]||(a[5]=o=>s(t).status=o),class:u(["select-bordered select w-full bg-base-100 text-neutral-content",{"select-error":l.value.status||s(t).errors.status}])},Ge,2),[[A,s(t).status]]),l.value.status||s(t).errors.status?(d(),i("label",Re,[e("span",Pe,c(l.value.status||s(t).errors.status),1)])):p("",!0)]),e("div",null,[Qe,f(e("select",{"onUpdate:modelValue":a[6]||(a[6]=o=>s(t).category_id=o),class:u(["select-bordered select w-full bg-base-100 text-neutral-content",{"select-error":l.value.category_id||s(t).errors.category_id}])},[We,(d(!0),i(X,null,Z(Y.value,o=>(d(),i("option",{key:o.id,value:o.id},c(o.name),9,Je))),128))],2),[[A,s(t).category_id]]),l.value.category_id||s(t).errors.category_id?(d(),i("label",Xe,[e("span",Ze,c(l.value.category_id||s(t).errors.category_id),1)])):p("",!0)]),e("div",null,[e("div",et,[tt,e("div",st,[e("input",{type:"text",value:s(t).cover_image,onInput:a[7]||(a[7]=o=>s(t).cover_image=o.target.value),placeholder:"https://example.com/image.jpg",class:u(["input-bordered input w-full",{"input-error":l.value.cover_image||s(t).errors.cover_image}])},null,42,lt)]),l.value.cover_image||s(t).errors.cover_image?(d(),i("label",at,[e("span",ot,c(l.value.cover_image||s(t).errors.cover_image),1)])):p("",!0)])]),e("div",null,[e("div",rt,[nt,e("div",it,[e("input",{type:"text",value:s(t).tags,onInput:a[8]||(a[8]=o=>s(t).tags=o.target.value),placeholder:"etiket1, etiket2, etiket3",class:u(["input-bordered input w-full",{"input-error":l.value.tags||s(t).errors.tags}])},null,42,dt)]),l.value.tags||s(t).errors.tags?(d(),i("label",ut,[e("span",ct,c(l.value.tags||s(t).errors.tags),1)])):p("",!0)])]),e("div",null,[e("div",_t,[pt,e("div",vt,[e("input",{type:"text",value:s(t).seo_keywords,onInput:a[9]||(a[9]=o=>s(t).seo_keywords=o.target.value),placeholder:"anahtar1, anahtar2, anahtar3",class:u(["input-bordered input w-full",{"input-error":l.value.seo_keywords||s(t).errors.seo_keywords}])},null,42,mt)]),l.value.seo_keywords||s(t).errors.seo_keywords?(d(),i("label",gt,[e("span",bt,c(l.value.seo_keywords||s(t).errors.seo_keywords),1)])):p("",!0)])]),e("div",null,[e("div",ht,[ft,e("div",yt,[e("textarea",{value:s(t).meta_description,onInput:a[10]||(a[10]=o=>s(t).meta_description=o.target.value),placeholder:"Arama motorları için kısa bir açıklama (max 160 karakter)",class:u(["textarea-bordered textarea w-full",{"textarea-error":l.value.meta_description||s(t).errors.meta_description}]),maxlength:"160",rows:"2"},null,42,xt),e("div",kt,c(((z=s(t).meta_description)==null?void 0:z.length)||0)+"/160",1)]),l.value.meta_description||s(t).errors.meta_description?(d(),i("label",wt,[e("span",Tt,c(l.value.meta_description||s(t).errors.meta_description),1)])):p("",!0),zt])]),e("div",null,[e("div",It,[Et,e("div",Mt,[e("input",{type:"number",value:s(t).views_count,onInput:a[11]||(a[11]=o=>s(t).views_count=o.target.value),class:"input-bordered input w-full",readonly:""},null,40,Ct)])])]),e("div",Ft,[e("label",Bt,[f(e("input",{type:"checkbox","onUpdate:modelValue":a[12]||(a[12]=o=>s(t).hasDraw=o),class:"checkbox checkbox-neutral"},null,512),[[ee,s(t).hasDraw]]),Dt])])]),Lt,e("div",St,[e("button",{type:"submit",class:u(["btn btn-primary",{loading:s(t).processing}]),disabled:s(t).processing}," Yazıyı Kaydet ",10,jt)])],32)])])}}});export{qt as default};
