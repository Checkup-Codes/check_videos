import{Q as V,l as d,T as j,i as C,L as E,x as $,g as n,o as r,b as e,e as D,j as b,h as g,q as f,u as l,t as v,O as q,F as N,m as U,f as H,P as R}from"./app-bzSXT2H4.js";/* empty css            */const X={class:"bg-base-100 mx-auto mt-10 w-full max-w-full px-5 lg:mt-0"},A={class:"container mx-auto p-4"},G={class:"card bg-base-100 shadow-xl"},I={class:"card-body"},O=e("h2",{class:"card-title text-primary"},"Kategori Düzenle",-1),Q=e("p",{class:"text-sm opacity-80"}," Kategorileriniz için düzenlemeler yapabilirsiniz. İsterseniz bir üst kategori seçebilirsiniz. ",-1),W=e("div",{class:"divider"},null,-1),J={class:"form-control w-full"},Y=e("label",{class:"label"},[e("span",{class:"label-text"},"İsim")],-1),Z={key:0,class:"label"},ee={class:"label-text-alt text-error"},te={class:"form-control mt-4 w-full"},se=e("label",{class:"label"},[e("span",{class:"label-text"},"Slug")],-1),ae={key:0,class:"label"},le={class:"label-text-alt text-error"},oe={class:"form-control mt-4 w-full"},ne=e("label",{class:"label"},[e("span",{class:"label-text"},"Üst Kategori")],-1),re={class:"relative w-full"},ie={key:0,class:"absolute z-30 mt-1 w-full"},ue={class:"menu bg-base-100 rounded-box border-base-300 max-h-60 w-full overflow-y-auto border p-2 shadow-lg"},ce=["onMousedown"],de={key:1,class:"mt-2 flex items-center"},pe={class:"badge badge-primary"},ge=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),me=[ge],ve={key:0,class:"label"},_e={class:"label-text-alt text-error"},he={class:"mt-6 flex justify-between"},be=["disabled"],fe={key:0,class:"loading loading-spinner loading-sm"},Ce={__name:"CategoriesEditFrom",setup(ye){var x,k;const{props:m}=V(),u=d(m.categories||[]),p=d(m.category||{}),s=j({name:p.value.name||"",slug:p.value.slug||"",parent_id:p.value.parent_id||null}),i=d(((x=m.category.parent)==null?void 0:x.name)||""),_=d(((k=m.category.parent)==null?void 0:k.name)||""),c=d(!1),y=d(!1),w=d(null),K=()=>{clearTimeout(w.value),h.value.length>0&&(c.value=!0)},z=()=>{w.value=setTimeout(()=>{c.value=!1},100)},h=C(()=>!u.value||u.value.length===0?[]:u.value.filter(t=>t&&t.id!==p.value.id&&(!i.value||t.name&&t.name.toLowerCase().includes(i.value.toLowerCase())))),L=C(()=>!s.name||!s.slug),T=()=>{i.value.length>=1?c.value=!0:i.value===""&&(s.parent_id=null)},M=t=>{!t||!t.id||t.id===p.value.id||(s.parent_id=t.id,i.value=t.name,_.value=t.name,R(()=>{c.value=!1}))},B=()=>{s.parent_id=null,i.value="",_.value=""};E(()=>s.name,t=>{t&&(s.slug=t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))});const F=()=>{s.put(route("categories.update",{category:p.value.id})).then(()=>{console.log("Kategori başarıyla güncellendi")}).catch(t=>{console.error("Kategori güncellenirken hata:",t)})},P=t=>{confirm("Bu kategoriyi silmek istediğinize emin misiniz?")&&s.delete(route("categories.destroy",{category:t})).then(()=>{console.log("Kategori başarıyla silindi")}).catch(a=>{console.error("Kategori silinirken hata:",a)})};$(()=>{(!u.value||u.value.length===0)&&S(),document.addEventListener("keydown",t=>{t.key==="Escape"&&(c.value=!1)})});const S=async()=>{y.value=!0;try{const t=await fetch(route("categories.index"),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw new Error(`HTTP error: ${t.status}`);const a=await t.json();a&&a.categories&&(u.value=a.categories,console.log("Kategoriler yüklendi:",u.value.length))}catch(t){console.error("Kategoriler yüklenirken hata:",t)}finally{y.value=!1}};return(t,a)=>(r(),n("div",X,[e("div",A,[e("div",G,[e("div",I,[O,Q,W,e("form",{onSubmit:D(F,["prevent"])},[e("div",J,[Y,b(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>l(s).name=o),class:"input input-bordered w-full",placeholder:"Kategori ismi"},null,512),[[f,l(s).name]]),l(s).errors.name?(r(),n("label",Z,[e("span",ee,v(l(s).errors.name),1)])):g("",!0)]),e("div",te,[se,b(e("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=o=>l(s).slug=o),class:"input input-bordered w-full",placeholder:"kategori-slug"},null,512),[[f,l(s).slug]]),l(s).errors.slug?(r(),n("label",ae,[e("span",le,v(l(s).errors.slug),1)])):g("",!0)]),e("div",oe,[ne,e("div",re,[b(e("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=o=>i.value=o),onFocus:K,onBlur:z,onInput:T,onKeydown:a[3]||(a[3]=q(o=>c.value=!1,["esc"])),class:"input input-bordered w-full",placeholder:"Üst kategori ara"},null,544),[[f,i.value]]),c.value&&h.value.length>0?(r(),n("div",ie,[e("ul",ue,[(r(!0),n(N,null,U(h.value,o=>(r(),n("li",{key:o.id},[e("a",{onMousedown:we=>M(o),class:"hover:bg-primary hover:text-primary-content"},v(o.name),41,ce)]))),128))])])):g("",!0),l(s).parent_id?(r(),n("div",de,[e("div",pe,v(_.value),1),e("button",{type:"button",onClick:B,class:"btn btn-ghost btn-xs ml-2","aria-label":"Üst kategoriyi kaldır"},me)])):g("",!0)]),l(s).errors.parent_id?(r(),n("label",ve,[e("span",_e,v(l(s).errors.parent_id),1)])):g("",!0)]),e("div",he,[e("button",{type:"button",onClick:a[4]||(a[4]=o=>P(l(m).category.id)),class:"btn btn-error btn-outline"}," Kategoriyi Sil "),e("button",{type:"submit",class:"btn btn-primary",disabled:l(s).processing||L.value},[l(s).processing?(r(),n("span",fe)):g("",!0),H(" Kategoriyi Güncelle ")],8,be)])],32)])])])]))}};export{Ce as default};
