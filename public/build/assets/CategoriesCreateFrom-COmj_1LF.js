import{r as p,T as V,p as x,s as z,m as B,c as r,a as e,l as E,k as v,h as c,v as f,u as a,t as m,I as S,F as j,g as D,C as P,f as U,o as n,J as A}from"./ssr-21H53JUc.js";const N={class:"mx-auto mt-6 w-full max-w-full bg-base-100 px-3 sm:px-5 lg:mt-0"},R={class:"container mx-auto p-0 sm:p-4"},$={class:"card border border-base-200 bg-base-100 shadow-md"},q={class:"card-body p-4 sm:p-6"},I={class:"form-control w-full"},X={key:0,class:"label py-1"},G={class:"label-text-alt text-error"},H={class:"form-control mt-3 w-full"},J={key:0,class:"label py-1"},O={class:"label-text-alt text-error"},W={class:"form-control mt-3 w-full"},Y={class:"relative w-full"},Q={key:0,class:"absolute z-30 mt-1 w-full"},Z={class:"menu max-h-60 w-full overflow-y-auto rounded-box border border-base-200 bg-base-100 p-2 shadow-md"},ee=["onMousedown"],te={key:1,class:"mt-2 flex items-center"},se={class:"badge badge-sm"},le={key:0,class:"label py-1"},ae={class:"label-text-alt text-error"},oe={class:"form-control mt-3 w-full"},re={key:0,class:"label py-1"},ne={class:"label-text-alt text-error"},ie={class:"card-actions mt-5 justify-end"},ue=["disabled"],de={key:0,class:"loading loading-spinner loading-xs sm:loading-sm"},be={__name:"CategoriesCreateFrom",props:{categories:{type:Array,default:()=>[]}},setup(h){const u=p(h.categories||[]),s=V({name:"",slug:"",parent_id:"",status:"public"}),i=p(""),b=p(""),d=p(!1),w=p(!1),y=p(null),_=()=>{clearTimeout(y.value),g.value.length>0&&(d.value=!0)},k=()=>{y.value=setTimeout(()=>{d.value=!1},100)},g=x(()=>!u.value||u.value.length===0?[]:i.value?u.value.filter(l=>l&&l.name&&l.name.toLowerCase().includes(i.value.toLowerCase())):u.value),C=x(()=>!s.name||!s.slug),L=()=>{s.parent_id="",i.value.length>=1&&(d.value=!0)},M=l=>{!l||!l.id||(s.parent_id=l.id,i.value=l.name,b.value=l.name,A(()=>{d.value=!1}))},F=()=>{s.parent_id="",i.value="",b.value=""};z(()=>s.name,l=>{l&&(s.slug=l.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))});const K=()=>{s.post(route("categories.store")).then(()=>{console.log("Category created successfully"),s.reset(),i.value="",b.value=""}).catch(l=>{console.error("Error creating category:",l)})};B(()=>{(!u.value||u.value.length===0)&&T(),document.addEventListener("keydown",l=>{l.key==="Escape"&&(d.value=!1)})});const T=async()=>{w.value=!0;try{const l=await fetch(route("categories.index"),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!l.ok)throw new Error("Failed to fetch categories");const t=await l.json();u.value=t.categories||[]}catch(l){console.error("Error fetching categories:",l)}finally{w.value=!1}};return(l,t)=>(n(),r("div",N,[e("div",R,[e("div",$,[e("div",q,[t[12]||(t[12]=e("h2",{class:"card-title text-primary"},"Yeni Kategori",-1)),t[13]||(t[13]=e("p",{class:"text-xs opacity-70 sm:text-sm"}," Kategorileriniz için kategoriler oluşturun. İsterseniz bir üst kategori seçebilirsiniz. ",-1)),t[14]||(t[14]=e("div",{class:"divider my-3"},null,-1)),e("form",{onSubmit:E(K,["prevent"])},[e("div",I,[t[5]||(t[5]=e("label",{class:"label py-1.5"},[e("span",{class:"label-text"},"İsim")],-1)),v(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>a(s).name=o),class:"input-bordered input w-full",placeholder:"Kategori ismi"},null,512),[[f,a(s).name]]),a(s).errors.name?(n(),r("label",X,[e("span",G,m(a(s).errors.name),1)])):c("",!0)]),e("div",H,[t[6]||(t[6]=e("label",{class:"label py-1.5"},[e("span",{class:"label-text"},"Slug")],-1)),v(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>a(s).slug=o),class:"input-bordered input w-full",placeholder:"kategori-slug"},null,512),[[f,a(s).slug]]),a(s).errors.slug?(n(),r("label",J,[e("span",O,m(a(s).errors.slug),1)])):c("",!0)]),e("div",W,[t[8]||(t[8]=e("label",{class:"label py-1.5"},[e("span",{class:"label-text"},"Üst Kategori")],-1)),e("div",Y,[v(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>i.value=o),onFocus:_,onBlur:k,onInput:L,onKeydown:t[3]||(t[3]=S(o=>d.value=!1,["esc"])),class:"input-bordered input w-full",placeholder:"Üst kategori ara"},null,544),[[f,i.value]]),d.value&&g.value.length>0?(n(),r("div",Q,[e("ul",Z,[(n(!0),r(j,null,D(g.value,o=>(n(),r("li",{key:o.id},[e("a",{onMousedown:pe=>M(o),class:"py-2 text-sm hover:bg-base-200"},m(o.name),41,ee)]))),128))])])):c("",!0),a(s).parent_id?(n(),r("div",te,[e("div",se,m(b.value),1),e("button",{type:"button",onClick:F,class:"btn btn-ghost btn-xs ml-2","aria-label":"Remove parent category"},[...t[7]||(t[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):c("",!0)]),a(s).errors.parent_id?(n(),r("label",le,[e("span",ae,m(a(s).errors.parent_id),1)])):c("",!0)]),e("div",oe,[t[10]||(t[10]=e("label",{class:"label py-1.5"},[e("span",{class:"label-text"},"Durum")],-1)),v(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>a(s).status=o),class:"select-bordered select w-full"},[...t[9]||(t[9]=[e("option",{value:"public"},"Açık",-1),e("option",{value:"hidden"},"Gizli",-1)])],512),[[P,a(s).status]]),a(s).errors.status?(n(),r("label",re,[e("span",ne,m(a(s).errors.status),1)])):c("",!0)]),e("div",ie,[e("button",{type:"submit",class:"btn btn-primary btn-sm sm:btn-md",disabled:a(s).processing||C.value},[a(s).processing?(n(),r("span",de)):c("",!0),t[11]||(t[11]=U(" Kategori Oluştur ",-1))],8,ue)])],32)])])])]))}};export{be as default};
