import{Q as z,i,l as w,x as L,g as l,o,b as t,t as a,F as f,m as y,n as v,h as m,U as N,N as T}from"./app-LhKPFfpS.js";/* empty css            */const W={class:"flex min-h-screen flex-col items-center justify-center"},$={key:0,class:"w-full max-w-md rounded-2xl border border-gray-200 bg-white p-6 shadow-sm"},D=t("h2",{class:"mb-2 text-2xl font-semibold text-gray-900"},"Test Özeti",-1),F={class:"mb-4 text-center"},G={class:"text-4xl font-bold text-gray-900"},E=t("p",{class:"text-sm text-gray-600"},"Puan",-1),U={class:"mb-4 grid grid-cols-2 gap-4 rounded-lg bg-gray-50 p-4"},V={class:"text-center"},K={class:"text-2xl font-bold text-green-600"},Y=t("p",{class:"text-sm text-gray-600"},"Doğru",-1),Z={class:"text-center"},q={class:"text-2xl font-bold text-red-600"},J=t("p",{class:"text-sm text-gray-600"},"Yanlış",-1),X={class:"mb-4 max-h-60 overflow-y-auto"},ee=t("h3",{class:"mb-2 font-medium text-gray-700"},"Cevaplarınız:",-1),te={class:"space-y-2 text-left text-sm text-gray-800"},se={class:"flex flex-col"},ne={class:"text-xs text-gray-500"},re={class:"flex gap-2"},ae={class:"mb-4 h-1 w-full overflow-hidden rounded-full bg-gray-200"},le={class:"mb-4 text-right text-sm text-gray-500"},oe={key:0,class:"space-y-4"},ue={class:"flex items-center justify-between"},ie={class:"text-xl font-semibold text-gray-900"},ce=["disabled"],de={class:"mt-1 text-sm text-gray-500"},ge={key:0,class:"rounded-lg bg-blue-50 p-3"},ve=t("p",{class:"text-sm text-blue-600"},"Örnek Cümle:",-1),me={key:0,class:"mt-1 text-sm text-gray-700"},he={key:1,class:"mt-1 text-sm text-gray-700"},xe={class:"space-y-2"},pe=["onClick","disabled"],be={__name:"MultipleChoice",props:{gameType:String,packSlug:String,words:Array,gameConfig:Object},emits:["game-completed"],setup(b,{emit:k}){const c=b,Q=k,S=z().props.languagePacks||[];i(()=>c.packSlug?S.find(s=>s.slug===c.packSlug):null);const e=w({isLoading:!0,isPlaying:!1,currentQuestion:null,currentOptions:[],selectedAnswer:null,showAnswer:!1,isCorrect:!1,progress:0,currentIndex:0,totalQuestions:0,userResponses:[],hintShown:!1,currentHintIndex:0}),u=w([]),h=i(()=>Object.fromEntries(u.value.map(s=>[s.id,s]))),x=async()=>{if(!c.words||c.words.length<2){alert("Oyunu başlatmak için en az 2 kelime gereklidir.");return}e.value.isLoading=!0;let s=[...c.words];s.sort(()=>Math.random()-.5),await new Promise(n=>{u.value=s,e.value.totalQuestions=u.value.length,e.value.currentIndex=0,e.value.userResponses=[],n()}),e.value.isLoading=!1,e.value.isPlaying=!0,p()},p=()=>{if(e.value.currentIndex>=u.value.length){M();return}e.value.currentQuestion=u.value[e.value.currentIndex],e.value.selectedAnswer=null,e.value.hintShown=!1,e.value.currentHintIndex=0},A=i(()=>{if(!e.value.userResponses.length)return 0;const s=e.value.userResponses.filter(n=>n.correct).length;return Math.round(s/e.value.userResponses.length*100)}),C=s=>{switch(s){case"noun":return"İsim";case"verb":return"Fiil";case"adjective":return"Sıfat";case"adverb":return"Zarf";default:return"Bilinmiyor"}},I=i(()=>e.value.userResponses.filter(s=>s.correct).length),R=i(()=>e.value.userResponses.filter(s=>!s.correct).length),P=i(()=>{if(!e.value.currentQuestion)return[];let s=u.value.filter(n=>n.id!==e.value.currentQuestion.id);return s=s.sort(()=>Math.random()-.5).slice(0,4),s.push(e.value.currentQuestion),s.sort(()=>Math.random()-.5)}),H=s=>{if(e.value.showAnswer)return;e.value.selectedAnswer=s,e.value.isCorrect=s.meaning===e.value.currentQuestion.meaning,e.value.userResponses.push({word_id:e.value.currentQuestion.id,correct:e.value.isCorrect}),e.value.showAnswer=!0,e.value.progress=0;const n=setInterval(()=>{e.value.progress+=1,e.value.progress>=100&&(clearInterval(n),e.value.currentIndex++,e.value.selectedAnswer=null,e.value.showAnswer=!1,e.value.progress=0,p())},20)},M=()=>{e.value.isPlaying=!1,B()},j=()=>{e.value={isLoading:!0,isPlaying:!1,currentQuestion:null,currentOptions:[],selectedAnswer:null,showAnswer:!1,isCorrect:!1,progress:0,currentIndex:0,totalQuestions:0,userResponses:[],hintShown:!1,currentHintIndex:0},x()},B=()=>{if(!e.value.userResponses.length)return;const s=e.value.userResponses.map(n=>({word_id:n.word_id,review_count:1,incorrect_count:n.correct?0:1}));T.post("/update-words",{words:s},{preserveState:!0,onSuccess:()=>console.log("Words updated successfully"),onError:n=>console.error("Failed to update word stats",n)})},O=()=>{if(!e.value.currentQuestion.example_sentences||e.value.currentQuestion.example_sentences.length===0){e.value.hintShown=!0;return}e.value.hintShown?e.value.currentHintIndex=(e.value.currentHintIndex+1)%e.value.currentQuestion.example_sentences.length:(e.value.hintShown=!0,e.value.currentHintIndex=0)};return L(()=>{x()}),(s,n)=>{var _;return o(),l("div",W,[!e.value.isPlaying&&e.value.userResponses.length>0?(o(),l("div",$,[D,t("div",F,[t("p",G,a(A.value)+" / 100",1),E]),t("div",U,[t("div",V,[t("p",K,a(I.value),1),Y]),t("div",Z,[t("p",q,a(R.value),1),J])]),t("div",X,[ee,t("ul",te,[(o(!0),l(f,null,y(e.value.userResponses,r=>{var g,d;return o(),l("li",{key:r.word_id,class:"flex items-center justify-between rounded-md bg-gray-50 px-4 py-2"},[t("div",se,[t("span",{class:v(r.correct?"font-medium text-green-600":"font-medium text-red-600")},a(((g=h.value[r.word_id])==null?void 0:g.word)||"Unknown"),3),t("span",ne,a(((d=h.value[r.word_id])==null?void 0:d.meaning)||""),1)]),t("span",{class:v(r.correct?"text-lg text-green-600":"text-lg text-red-600")},a(r.correct?"✓":"✗"),3)])}),128))])]),t("div",re,[t("button",{onClick:n[0]||(n[0]=r=>Q("game-completed")),class:"flex-1 rounded-lg bg-black px-4 py-2 text-center text-sm font-medium text-white transition hover:bg-gray-700"}," Pakete Dön "),t("button",{onClick:j,class:"flex-1 rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 transition hover:bg-gray-100"}," Tekrar Başla ")])])):(o(),l("div",{key:1,class:v(["relative w-full max-w-md rounded-2xl border border-gray-200 p-6 shadow-sm transition-colors duration-500",{"bg-white":!e.value.showAnswer,"bg-green-50":e.value.showAnswer&&e.value.isCorrect,"bg-red-50":e.value.showAnswer&&!e.value.isCorrect}])},[t("div",ae,[t("div",{class:"duration-2000 h-full bg-black transition-all",style:N({width:`${e.value.progress}%`})},null,4)]),t("div",le," Soru "+a(e.value.currentIndex+1)+" / "+a(e.value.totalQuestions),1),e.value.currentQuestion?(o(),l("div",oe,[t("div",null,[t("div",ue,[t("h2",ie,' "'+a(e.value.currentQuestion.word)+'" kelimesinin anlamı nedir? ',1),e.value.showAnswer?m("",!0):(o(),l("button",{key:0,onClick:O,class:"rounded-lg border border-gray-200 px-3 py-1 text-sm text-gray-600 hover:bg-gray-50",disabled:e.value.hintShown&&(!e.value.currentQuestion.example_sentences||e.value.currentQuestion.example_sentences.length<=1)},a(e.value.hintShown?`İpucu (${e.value.currentHintIndex+1}/${((_=e.value.currentQuestion.example_sentences)==null?void 0:_.length)||0})`:"İpucu Göster"),9,ce))]),t("p",de,"Kelime Türü: "+a(C(e.value.currentQuestion.type)),1)]),e.value.hintShown?(o(),l("div",ge,[ve,e.value.currentQuestion.example_sentences&&e.value.currentQuestion.example_sentences.length>0?(o(),l("p",me,a(e.value.currentQuestion.example_sentences[e.value.currentHintIndex].sentence),1)):(o(),l("p",he,"Bu kelime için örnek cümle bulunmuyor."))])):m("",!0),t("div",xe,[(o(!0),l(f,null,y(P.value,(r,g)=>{var d;return o(),l("button",{key:g,onClick:we=>H(r),disabled:e.value.showAnswer,class:v(["w-full rounded-lg border border-gray-200 p-3 text-left text-base text-gray-900 transition hover:bg-gray-50 disabled:cursor-not-allowed",{"border-green-500 bg-green-50":e.value.showAnswer&&r.meaning===e.value.currentQuestion.meaning,"border-red-500 bg-red-50":e.value.showAnswer&&r.meaning!==e.value.currentQuestion.meaning&&((d=e.value.selectedAnswer)==null?void 0:d.meaning)===r.meaning}])},a(r.meaning),11,pe)}),128))])])):m("",!0)],2))])}}};export{be as default};
