import{Q as M,i as c,l as x,E as P,g as r,b as o,F as p,m as f,t as u,h as d,N as R,o as a,n as y,e as N}from"./app-DhQCxfTn.js";/* empty css            */const z={class:"flex min-h-screen flex-col items-center justify-center"},E={key:0,class:"w-full max-w-md rounded-2xl border border-gray-200 bg-white p-6 shadow-sm"},L=o("h2",{class:"mb-2 text-2xl font-semibold text-gray-900"},"Quiz Completed",-1),T=o("p",{class:"mb-4 text-gray-600"},"Here's how you did:",-1),W={class:"space-y-2 text-left text-sm text-gray-800"},$={key:0,class:"ml-2 text-xs text-gray-500"},j={key:1,class:"relative w-full max-w-md rounded-2xl border border-gray-200 bg-white p-6 shadow-sm"},B={key:0,class:"absolute right-4 top-3 text-xs text-gray-400"},G={key:1,class:"mb-4 text-xl font-semibold text-gray-900"},O={class:"flex flex-col gap-3"},V=["onClick"],D={key:2,class:"mt-4 text-sm text-gray-700"},J={__name:"MultipleChoice",props:{gameType:String,packSlug:String,words:Array},setup(_){const i=_,b=M().props.languagePacks||[];c(()=>i.packSlug?b.find(t=>t.slug===i.packSlug):null);const e=x({isLoading:!0,isPlaying:!1,currentQuestion:null,selectedAnswer:null,showFeedback:!1,isCorrect:null,currentIndex:0,totalQuestions:0,userResponses:[]}),n=x([]),g=c(()=>Object.fromEntries(n.value.map(t=>[t.id,t]))),m=async()=>{if(!i.words||i.words.length<5){alert("Oyunu başlatmak için en az 5 kelime gereklidir.");return}e.value.isLoading=!0,await new Promise(t=>{n.value=[...i.words].sort(()=>Math.random()-.5),e.value.totalQuestions=n.value.length,e.value.currentIndex=0,e.value.userResponses=[],t()}),e.value.isLoading=!1,e.value.isPlaying=!0,w()},w=()=>{if(e.value.currentIndex>=n.value.length){Q();return}e.value.currentQuestion=n.value[e.value.currentIndex],e.value.selectedAnswer=null,e.value.showFeedback=!1,e.value.isCorrect=null},k=t=>{e.value.selectedAnswer||(e.value.selectedAnswer=t.id,e.value.isCorrect=t.id===e.value.currentQuestion.id,e.value.showFeedback=!0,e.value.userResponses.push({word_id:e.value.currentQuestion.id,selected_id:t.id,correct:e.value.isCorrect}),setTimeout(()=>{e.value.currentIndex++,w()},2e3))},Q=()=>{e.value.isPlaying=!1,A()},C=()=>{m()},A=()=>{if(!e.value.userResponses.length)return;const t=e.value.userResponses.map(l=>({word_id:l.word_id,review_count:1,incorrect_count:l.correct?0:1}));R.post("/update-words",{words:t},{preserveState:!0,onSuccess:()=>console.log("Words updated successfully"),onError:l=>console.error("Failed to update word stats",l)})};P(()=>{m()});const S=c(()=>{if(!e.value.currentQuestion)return[];let t=n.value.filter(l=>l.id!==e.value.currentQuestion.id);return t=t.sort(()=>Math.random()-.5).slice(0,3),t.push(e.value.currentQuestion),t.sort(()=>Math.random()-.5)}),F=c(()=>e.value.currentQuestion?e.value.selectedAnswer===e.value.currentQuestion.id?"Correct!":`Wrong! The correct answer is: ${e.value.currentQuestion.meaning}`:""),I=c(()=>e.value.totalQuestions?`${e.value.currentIndex+1}/${e.value.totalQuestions}`:"0/0");return c(()=>n.value.length&&e.value.currentIndex===n.value.length-1),(t,l)=>(a(),r("div",z,[e.value.isPlaying?(a(),r("div",j,[n.value.length?(a(),r("span",B,u(I.value),1)):d("",!0),e.value.currentQuestion?(a(),r("h2",G,' What is the meaning of "'+u(e.value.currentQuestion.word)+'"? ',1)):d("",!0),o("div",O,[(a(!0),r(p,null,f(S.value,s=>(a(),r("button",{key:s.id,onClick:v=>k(s),class:y(["w-full rounded-lg px-4 py-3 text-sm font-medium transition focus:outline-none",e.value.selectedAnswer&&s.id===e.value.currentQuestion.id?"bg-green-500 text-white":e.value.selectedAnswer&&s.id===e.value.selectedAnswer?"bg-red-500 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"])},u(s.meaning),11,V))),128))]),e.value.showFeedback?(a(),r("p",D,u(F.value),1)):d("",!0)])):(a(),r("div",E,[L,T,o("ul",W,[(a(!0),r(p,null,f(e.value.userResponses,s=>{var v,h;return a(),r("li",{key:s.word_id,class:"flex justify-between rounded-md bg-gray-50 px-4 py-2"},[o("span",{class:y(s.correct?"text-green-600":"text-red-600")},u(((v=g.value[s.word_id])==null?void 0:v.word)||"Unknown"),3),o("span",null,[N(u(s.correct?"✓":"✗")+" ",1),s.correct?d("",!0):(a(),r("span",$," (Correct: "+u(((h=g.value[s.word_id])==null?void 0:h.meaning)||"Unknown")+") ",1))])])}),128))]),o("button",{onClick:C,class:"mt-6 w-full rounded-lg bg-black px-4 py-2 text-sm font-medium text-white transition hover:bg-gray-700"}," Restart Quiz ")]))]))}};export{J as default};
