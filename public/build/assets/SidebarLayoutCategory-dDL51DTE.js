import{Q as T,l as o,x as w,c as d,o as f,w as _,a as i,h as L}from"./app-bzSXT2H4.js";import{_ as R}from"./CheckSubsidebar-CQyOLzFp.js";import{_ as $}from"./ToggleSubSidebarButton-nQRpaVjw.js";import{_ as b}from"./SubSidebarScreen-TeyYX9LB.js";import B from"./CategoryTree-BQ9N1FzB.js";import{_ as N}from"./TopSubsidebar-D42EChjk.js";/* empty css            */import"./Button-CBw_rRhW.js";const z={__name:"SidebarLayoutCategory",emits:["update:isCollapsed"],setup(S,{emit:m}){const{props:c,url:g}=T(),l=o(c.categories||[]),C=o(c.writes||[]),u=o([]),v=o(!0),r=o(!0),s=o(!1),n=o(null),h=m,x=()=>{r.value=!r.value,h("update:isCollapsed",r.value)},E=()=>{s.value=!s.value,n.value&&n.value.expandAllCategories(s.value)},y=e=>g===e?"active":"",k=()=>{const e={};C.value.forEach(a=>{a.category_id&&(e[a.category_id]=(e[a.category_id]||0)+1)}),l.value.forEach(a=>{a.writeCount=e[a.id]||0})},A=()=>{const e={},a=[];l.value.forEach(t=>{e[t.id]={...t,children:[]}}),l.value.forEach(t=>{var p;t.parent_id?(p=e[t.parent_id])==null||p.children.push(e[t.id]):a.push(e[t.id])}),u.value=a};return w(()=>{k(),A()}),(e,a)=>(f(),d(R,null,{default:_(()=>[i($,{isCollapsed:!1,toggle:x}),i(N,{title:"KATEGORÄ°LER",href:"/categories/create",showExpandCollapseButton:!0,isExpanded:s.value,onToggleExpand:E},null,8,["isExpanded"]),i(b,null,{default:_(()=>[v.value?(f(),d(B,{key:0,ref_key:"categoryTreeRef",ref:n,parentCategories:u.value,getLinkClasses:y,expandAll:s.value},null,8,["parentCategories","expandAll"])):L("",!0)]),_:1})]),_:1}))}};export{z as default};
