import{Q as M,e as p,y as f,s as $,p as u,m as j,x as D,_ as k,c as I,b as L,u as c,w as W,a as V,n as N,r as z,j as x,h as A,o as g,X as E,Y as K,F as O}from"./ssr-B00CJT2V.js";import{_ as Q,a as X}from"./FlashMessage-BdASJJ_7.js";import Y from"./SidebarLayoutWrite-DXuTXQ5-.js";import q from"./SidebarLayoutCategory-Dyx2LVHN.js";import{u as G}from"./useSidebar-c5lGNvW2.js";import"./WriteList-B4tWZrMs.js";import"./app-KO3EYfs6.js";/* empty css            */import"./CheckSubsidebar-DSWkQCTt.js";import"./SubSidebarScreen-DDCF6P20.js";import"./CategoryTree-DvRZFBJz.js";function J(){var l;const{props:d}=M(),o=p(((l=d.flash)==null?void 0:l.success)||"");return f(()=>{var t;return(t=d.flash)==null?void 0:t.success},t=>{t?o.value=t:o.value=""}),{flashMessage:o}}const ne=Object.assign({name:"LayoutWritesCategories"},{__name:"LayoutWritesCategories",setup(d){var y;const{isCollapsed:o,isMobile:l,sidebarStyle:t}=G(),{flashMessage:h}=J(),v=$(),B=()=>{h.value=""},C=M(),{props:s}=C,i=((y=s.screen)==null?void 0:y.name)||"",U={writes:Y,categories:q},b=u(()=>!!(s.auth&&s.auth.user)),a=u(()=>{var _;if(console.log("LayoutWritesCategories Debug:",{isLoggedIn:b.value,currentUrl:s.url,currentWrite:s.write,writeStatus:(_=s.write)==null?void 0:_.status,screenName:i}),b.value)return console.log("User is logged in, showing sidebar"),!1;const e=C.url||s.url||"",m=e.includes("/writes/")&&!e.includes("/writes/create")&&!e.includes("/writes/edit"),S=e.includes("/categories/")&&!e.includes("/categories/create")&&!e.includes("/categories/edit");if(console.log("Page check:",{currentUrl:e,isWriteShowPage:m,isCategoryShowPage:S}),m||S){const r=s.write;if(console.log("Current write status:",r==null?void 0:r.status),r&&r.status==="link_only")return console.log("Hiding sidebar for link-only write"),!0}return console.log("Showing sidebar (default)"),!1});f(a,e=>{console.log("shouldHideSidebarContent changed:",e)},{immediate:!0});const F=u(()=>o.value&&i&&!a.value&&U[i]||null),n=p(v.getters["Writes/isCollapsed"]);f(()=>v.getters["Writes/isCollapsed"],e=>{n.value=e},{immediate:!0});const H=u(()=>({"transition-all duration-300":!0,"lg:ml-[-200px]":n.value&&!a.value,"lg:ml-[00px]":!n.value&&!a.value,"lg:ml-0":a.value})),P=e=>{n.value=e},w=p(!1);return j(()=>{w.value=!0,document.body.style.overflow="hidden"}),D(()=>{document.body.style.overflow=""}),k("categories",s.categories||[]),k("writes",s.writes||[]),(e,m)=>(g(),I(O,null,[L(Q,{message:c(h),onClose:B},null,8,["message"]),L(X,{isCollapsed:!a.value},{sidebar:W(()=>[!a.value&&w.value?(g(),x(E,{key:0,max:5,include:["SidebarLayoutWrite","SidebarLayoutCategory"]},[(g(),x(K(F.value),{key:c(i),class:N(c(t)),"onUpdate:isNarrow":P},null,40,["class"]))],1024)):A("",!0)]),default:W(()=>[V("div",{class:N([c(l)?"hidden lg:block":"block",H.value])},[z(e.$slots,"screen")],2)]),_:3},8,["isCollapsed"])],64))}});export{ne as default};
