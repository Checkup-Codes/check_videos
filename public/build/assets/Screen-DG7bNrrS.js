import{_ as K,Q as O,l as c,x as H,s as S,i as V,c as Q,o as a,w as U,b as t,a as Y,t as d,g as i,F as B,m as P,f,h as w,n as g,J as q,K as G}from"./app-CAgCsGWV.js";import{_ as W}from"./GoBackButton-DiohFQCi.js";import{_ as X}from"./CheckScreen-D1P0fGBv.js";const _=v=>(q("data-v-91d2a193"),v=v(),G(),v),Z={class:"mb-5"},ee={class:"flex flex-col space-y-2 sm:flex-row sm:items-center sm:justify-between sm:space-y-0"},te={class:"w-full sm:w-auto"},se={class:"truncate text-xl font-bold text-primary sm:text-2xl"},oe={class:"card mt-5 border border-gray-200 bg-white shadow-lg transition-all duration-200 dark:border-gray-700 dark:bg-base-100"},ne={class:"card-body p-6"},ae={key:0,class:"flex justify-center p-8"},le=_(()=>t("span",{class:"loading loading-spinner loading-lg"},null,-1)),ie=[le],ce={key:1},re={key:0,class:"p-4"},de=_(()=>t("div",{class:"alert alert-warning"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),t("span",null,"Bu oynatma listesinde görüntülenecek video bulunamadı.")],-1)),ue=[de],he={key:1,class:"divide-y"},_e={class:"flex flex-col md:flex-row md:space-x-4"},ve={class:"relative mb-3 md:mb-0 md:w-1/3"},pe=["href"],me=["src"],we={class:"absolute bottom-2 right-2 rounded bg-black bg-opacity-70 px-1 py-0.5 text-xs text-white"},be={class:"flex flex-col justify-between md:w-2/3"},ke={class:"mb-1 text-base font-medium leading-tight"},fe={class:"mb-3 flex space-x-4 text-xs text-gray-500"},ge={class:"flex items-center"},xe=_(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),ye={class:"flex items-center"},Ce=_(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})],-1)),je={class:"flex space-x-2"},$e=["href"],Ie=_(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),Me=["onClick"],Se={key:0,xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ve=_(()=>t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)),Be=[Ve],Pe={key:1},ze={key:2},Le={class:"flex justify-center overflow-x-auto p-4"},Ne={class:"join"},Re=["disabled"],De={key:0,class:"btn btn-disabled btn-sm join-item"},Ae=["onClick"],Ee={key:1,class:"btn btn-disabled btn-sm join-item"},Fe=["disabled"],z="https://www.googleapis.com/youtube/v3",L=10,Te={__name:"Screen",setup(v){const{props:N}=O(),p=c(N.lesson),x=void 0,R=c(p.value.playlist_id),m=c([]),b=c(!1),l=c(1),y=c(null),D=c(null),C=c(0),u=c([]);H(()=>{I(),A()});const A=()=>{const s=localStorage.getItem(`checkedVideos_${p.value.id}`);s&&(u.value=JSON.parse(s))},E=()=>{localStorage.setItem(`checkedVideos_${p.value.id}`,JSON.stringify(u.value))},j=s=>u.value.includes(s),F=s=>{const o=u.value.indexOf(s.id);o===-1?u.value.push(s.id):u.value.splice(o,1),E()},$=s=>{if(!s)return"0";const o=parseInt(s.replace(/,/g,""));return o>=1e6?(o/1e6).toFixed(1)+"M":o>=1e3?(o/1e3).toFixed(1)+"K":s},I=async(s="")=>{b.value=!0,m.value=[];try{const o=await S.get(`${z}/playlistItems`,{params:{part:"snippet",playlistId:R.value,maxResults:L,pageToken:s,key:x}}),e=o.data.items.map(n=>n.snippet.resourceId.videoId);C.value=o.data.pageInfo.totalResults;const h=await S.get(`${z}/videos`,{params:{part:"snippet,contentDetails,statistics",id:e.join(","),key:x}});m.value=h.data.items.map(n=>({id:n.id,title:n.snippet.title,thumbnail:n.snippet.thumbnails.high?n.snippet.thumbnails.high.url:n.snippet.thumbnails.default.url,duration:J(n.contentDetails.duration),viewCount:n.statistics.viewCount?n.statistics.viewCount.toLocaleString():"0",likeCount:n.statistics.likeCount?n.statistics.likeCount.toLocaleString():"0"})),y.value=o.data.nextPageToken||null,D.value=s||null}catch(o){console.error("Error fetching videos:",o)}finally{b.value=!1}},r=V(()=>Math.ceil(C.value/L)),T=V(()=>{const s=[],o=r.value;if(l.value>2&&l.value<o-1)for(let e=l.value-1;e<=l.value+1;e++)s.push(e);else if(l.value<=2)for(let e=2;e<=Math.min(3,o-1);e++)s.push(e);else if(l.value>=o-1)for(let e=Math.max(o-2,2);e<o;e++)s.push(e);return s}),k=s=>{l.value=s,I(s===1?"":y.value)},J=s=>{const o=/PT(\d+H)?(\d+M)?(\d+S)?/,e=s.match(o),h=e[1]?e[1].slice(0,-1):"00",n=e[2]?e[2].slice(0,-1).padStart(2,"0"):"00",M=e[3]?e[3].slice(0,-1).padStart(2,"0"):"00";return h==="00"?`${n}:${M}`:`${h}:${n}:${M}`};return(s,o)=>(a(),Q(X,null,{default:U(()=>[t("div",Z,[t("div",ee,[Y(W,{href:"/lessons"}),t("div",te,[t("h2",se,d(p.value.title),1)])]),t("div",oe,[t("div",ne,[b.value?(a(),i("div",ae,ie)):(a(),i("div",ce,[m.value.length===0?(a(),i("div",re,ue)):(a(),i("ul",he,[(a(!0),i(B,null,P(m.value,e=>(a(),i("li",{key:e.id,class:"py-4 hover:bg-base-100"},[t("div",_e,[t("div",ve,[t("a",{href:`https://www.youtube.com/watch?v=${e.id}`,target:"_blank",class:"aspect-w-16 aspect-h-9 block overflow-hidden rounded-lg"},[t("img",{src:e.thumbnail,alt:"Video thumbnail",class:"h-full w-full object-cover"},null,8,me),t("div",we,d(e.duration),1)],8,pe)]),t("div",be,[t("div",null,[t("h3",ke,d(e.title),1),t("div",fe,[t("div",ge,[xe,f(" "+d($(e.viewCount))+" görüntülenme ",1)]),t("div",ye,[Ce,f(" "+d($(e.likeCount)),1)])])]),t("div",je,[t("a",{href:`https://www.youtube.com/watch?v=${e.id}`,target:"_blank",class:"btn btn-primary btn-sm"},[Ie,f(" İzle ")],8,$e),t("button",{class:"btn btn-outline btn-sm",onClick:h=>F(e)},[j(e.id)?(a(),i("svg",Se,Be)):w("",!0),j(e.id)?(a(),i("span",Pe,"İzlendi")):(a(),i("span",ze,"İzlenmedi"))],8,Me)])])])]))),128))])),t("div",Le,[t("div",Ne,[t("button",{disabled:l.value===1,onClick:o[0]||(o[0]=e=>k(1)),class:g(["btn btn-sm join-item",l.value===1?"btn-active":""])}," 1 ",10,Re),l.value>3?(a(),i("span",De,"...")):w("",!0),(a(!0),i(B,null,P(T.value,e=>(a(),i("button",{key:e,onClick:h=>k(e),class:g(["btn btn-sm join-item",l.value===e?"btn-active":""])},d(e),11,Ae))),128)),l.value<r.value-2?(a(),i("span",Ee,"...")):w("",!0),r.value>1?(a(),i("button",{key:2,disabled:l.value===r.value,onClick:o[1]||(o[1]=e=>k(r.value)),class:g(["btn btn-sm join-item",l.value===r.value?"btn-active":""])},d(r.value),11,Fe)):w("",!0)])])]))])])])]),_:1}))}},He=K(Te,[["__scopeId","data-v-91d2a193"]]);export{He as default};
