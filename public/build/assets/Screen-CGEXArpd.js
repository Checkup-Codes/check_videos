import{Q as T,r,m as O,x as M,p as V,j as H,w as J,a as s,e as K,t as d,c as i,o as l,F as I,g as B,f as b,h as m,n as k}from"./ssr-COd_82OS.js";import{_ as Q}from"./GoBackButton-k1s_h5ZU.js";import{_ as U}from"./CheckScreen-CksszvzW.js";import{_ as Y}from"./app-udAvpmnU.js";/* empty css            */const q={class:"mb-5"},G={class:"flex flex-col space-y-2 sm:flex-row sm:items-center sm:justify-between sm:space-y-0"},W={class:"w-full sm:w-auto"},X={class:"truncate text-xl font-bold text-primary sm:text-2xl"},Z={class:"card mt-5 border border-gray-200 bg-white shadow-lg transition-all duration-200 dark:border-gray-700 dark:bg-base-100"},tt={class:"card-body p-6"},et={key:0,class:"flex justify-center p-8"},st={key:1},ot={key:0,class:"p-4"},nt={key:1,class:"divide-y"},lt={class:"flex flex-col md:flex-row md:space-x-4"},at={class:"relative mb-3 md:mb-0 md:w-1/3"},it=["href"],rt=["src"],ct={class:"absolute bottom-2 right-2 rounded bg-black bg-opacity-70 px-1 py-0.5 text-xs text-white"},dt={class:"flex flex-col justify-between md:w-2/3"},ut={class:"mb-1 text-base font-medium leading-tight"},ht={class:"mb-3 flex space-x-4 text-xs text-gray-500"},vt={class:"flex items-center"},pt={class:"flex items-center"},mt={class:"flex space-x-2"},_t=["href"],wt=["onClick"],bt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},kt={key:1},ft={key:2},gt={class:"flex justify-center overflow-x-auto p-4"},xt={class:"join"},yt=["disabled"],Ct={key:0,class:"btn btn-disabled btn-sm join-item"},jt=["onClick"],$t={key:1,class:"btn btn-disabled btn-sm join-item"},Mt=["disabled"],P="https://www.googleapis.com/youtube/v3",S=10,Vt={__name:"Screen",setup(It){const{props:z}=T(),v=r(z.lesson),f=void 0,L=r(v.value.playlist_id),p=r([]),_=r(!1),a=r(1),g=r(null),N=r(null),x=r(0),u=r([]);O(()=>{j(),R()});const R=()=>{const o=localStorage.getItem(`checkedVideos_${v.value.id}`);o&&(u.value=JSON.parse(o))},D=()=>{localStorage.setItem(`checkedVideos_${v.value.id}`,JSON.stringify(u.value))},y=o=>u.value.includes(o),A=o=>{const e=u.value.indexOf(o.id);e===-1?u.value.push(o.id):u.value.splice(e,1),D()},C=o=>{if(!o)return"0";const e=parseInt(o.replace(/,/g,""));return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":o},j=async(o="")=>{_.value=!0,p.value=[];try{const e=await M.get(`${P}/playlistItems`,{params:{part:"snippet",playlistId:L.value,maxResults:S,pageToken:o,key:f}}),t=e.data.items.map(n=>n.snippet.resourceId.videoId);x.value=e.data.pageInfo.totalResults;const h=await M.get(`${P}/videos`,{params:{part:"snippet,contentDetails,statistics",id:t.join(","),key:f}});p.value=h.data.items.map(n=>({id:n.id,title:n.snippet.title,thumbnail:n.snippet.thumbnails.high?n.snippet.thumbnails.high.url:n.snippet.thumbnails.default.url,duration:F(n.contentDetails.duration),viewCount:n.statistics.viewCount?n.statistics.viewCount.toLocaleString():"0",likeCount:n.statistics.likeCount?n.statistics.likeCount.toLocaleString():"0"})),g.value=e.data.nextPageToken||null,N.value=o||null}catch(e){console.error("Error fetching videos:",e)}finally{_.value=!1}},c=V(()=>Math.ceil(x.value/S)),E=V(()=>{const o=[],e=c.value;if(a.value>2&&a.value<e-1)for(let t=a.value-1;t<=a.value+1;t++)o.push(t);else if(a.value<=2)for(let t=2;t<=Math.min(3,e-1);t++)o.push(t);else if(a.value>=e-1)for(let t=Math.max(e-2,2);t<e;t++)o.push(t);return o}),w=o=>{a.value=o,j(o===1?"":g.value)},F=o=>{const e=/PT(\d+H)?(\d+M)?(\d+S)?/,t=o.match(e),h=t[1]?t[1].slice(0,-1):"00",n=t[2]?t[2].slice(0,-1).padStart(2,"0"):"00",$=t[3]?t[3].slice(0,-1).padStart(2,"0"):"00";return h==="00"?`${n}:${$}`:`${h}:${n}:${$}`};return(o,e)=>(l(),H(U,null,{default:J(()=>[s("div",q,[s("div",G,[K(Q,{href:"/lessons"}),s("div",W,[s("h2",X,d(v.value.title),1)])]),s("div",Z,[s("div",tt,[_.value?(l(),i("div",et,[...e[2]||(e[2]=[s("span",{class:"loading loading-spinner loading-lg"},null,-1)])])):(l(),i("div",st,[p.value.length===0?(l(),i("div",ot,[...e[3]||(e[3]=[s("div",{class:"alert alert-warning"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),s("span",null,"Bu oynatma listesinde görüntülenecek video bulunamadı.")],-1)])])):(l(),i("ul",nt,[(l(!0),i(I,null,B(p.value,t=>(l(),i("li",{key:t.id,class:"py-4 hover:bg-base-100"},[s("div",lt,[s("div",at,[s("a",{href:`https://www.youtube.com/watch?v=${t.id}`,target:"_blank",class:"aspect-w-16 aspect-h-9 block overflow-hidden rounded-lg"},[s("img",{src:t.thumbnail,alt:"Video thumbnail",class:"h-full w-full object-cover"},null,8,rt),s("div",ct,d(t.duration),1)],8,it)]),s("div",dt,[s("div",null,[s("h3",ut,d(t.title),1),s("div",ht,[s("div",vt,[e[4]||(e[4]=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),b(" "+d(C(t.viewCount))+" görüntülenme ",1)]),s("div",pt,[e[5]||(e[5]=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})],-1)),b(" "+d(C(t.likeCount)),1)])])]),s("div",mt,[s("a",{href:`https://www.youtube.com/watch?v=${t.id}`,target:"_blank",class:"btn btn-primary btn-sm"},[...e[6]||(e[6]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),b(" İzle ",-1)])],8,_t),s("button",{class:"btn btn-outline btn-sm",onClick:h=>A(t)},[y(t.id)?(l(),i("svg",bt,[...e[7]||(e[7]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):m("",!0),y(t.id)?(l(),i("span",kt,"İzlendi")):(l(),i("span",ft,"İzlenmedi"))],8,wt)])])])]))),128))])),s("div",gt,[s("div",xt,[s("button",{disabled:a.value===1,onClick:e[0]||(e[0]=t=>w(1)),class:k(["btn btn-sm join-item",a.value===1?"btn-active":""])}," 1 ",10,yt),a.value>3?(l(),i("span",Ct,"...")):m("",!0),(l(!0),i(I,null,B(E.value,t=>(l(),i("button",{key:t,onClick:h=>w(t),class:k(["btn btn-sm join-item",a.value===t?"btn-active":""])},d(t),11,jt))),128)),a.value<c.value-2?(l(),i("span",$t,"...")):m("",!0),c.value>1?(l(),i("button",{key:2,disabled:a.value===c.value,onClick:e[1]||(e[1]=t=>w(c.value)),class:k(["btn btn-sm join-item",a.value===c.value?"btn-active":""])},d(c.value),11,Mt)):m("",!0)])])]))])])])]),_:1}))}},Nt=Y(Vt,[["__scopeId","data-v-91d2a193"]]);export{Nt as default};
