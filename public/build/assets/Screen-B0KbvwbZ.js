import{Q as z,l as k,i as N,x as D,P as H,c as T,o as a,w as g,b as e,g as l,t as d,h as w,n as P,f as b,u as x,a as A,k as $,N as W}from"./app-4OUUbtt_.js";import{_ as I}from"./ExcalidrawComponent-DWUrPMdR.js";import{_ as O}from"./CheckScreen-V9HKAjkd.js";/* empty css            */const R={class:"card"},V={class:"card-body p-6"},q={class:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between"},G={class:"mb-3 w-full sm:mb-0"},U={class:"break-words text-xl font-bold sm:text-2xl"},F={class:"mt-2"},Q={key:0,class:"badge badge-outline text-xs"},J={class:"sticky"},K={class:"flex items-center justify-between"},X={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"mr-1 h-4 w-4"},Y={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"},Z={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},ee={key:0,class:"flex gap-2"},te=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"mr-1 h-4 w-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1),se=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"mr-1 h-4 w-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),oe=[se],ne=e("div",{class:"divider my-1"},null,-1),re={key:0,class:"min-h-[500px]"},ae={key:1,class:"content-container"},le={key:0,class:"alert alert-info mb-4 px-3 py-2 text-sm sm:mb-6 sm:p-4"},ie=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"h-5 w-5 shrink-0 stroke-current"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),ce=["innerHTML"],de={class:"text-base-content/70 mt-6 flex flex-col space-y-2 p-2 text-xs sm:flex-row sm:items-center sm:justify-between sm:space-y-0 sm:p-3 sm:text-sm"},ue={class:"flex flex-wrap items-center gap-2"},me={class:"flex items-center gap-1"},he=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",class:"h-3.5 w-3.5 sm:h-4 sm:w-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),pe={key:0,class:"whitespace-nowrap"},ye=Object.assign({name:"ShowWriteScreen"},{__name:"Screen",setup(we){const{props:v}=z(),o=k(v.write||{}),M=v.auth,m=k(null),r=k(!1),C=N(()=>{if(!o.value.content)return"";const s=new DOMParser().parseFromString(o.value.content,"text/html");return s.querySelectorAll("img").forEach((t,h)=>{const i=`content-img-${h}`;t.id=i,t.setAttribute("loading","lazy"),t.setAttribute("decoding","async"),t.setAttribute("importance","low"),!t.hasAttribute("width")&&!t.hasAttribute("height")&&(t.setAttribute("width","800"),t.setAttribute("height","600"));const c=s.createElement("div");c.className="img-skeleton-wrapper relative",c.style.width="100%",c.style.marginBottom="1rem",c.style.marginTop="1rem";const _=s.createElement("div");_.className="skeleton img-skeleton absolute inset-0 h-full w-full rounded-lg",_.id=`skeleton-${i}`;const f=t.parentNode;if(f){const p=s.createElement("div");p.className="img-wrapper relative",p.style.width="100%",t.style.opacity="0",t.style.transition="opacity 0.3s ease-in-out",t.setAttribute("onload",`
        this.style.opacity = '1';
        const skeleton = document.getElementById('skeleton-${i}');
        if (skeleton) skeleton.style.display = 'none';
      `),t.setAttribute("onerror",`
        const skeleton = document.getElementById('skeleton-${i}');
        if (skeleton) {
          skeleton.style.display = 'none';
          skeleton.insertAdjacentHTML('afterend', '<div class="text-error text-sm py-2">Görsel yüklenemedi</div>');
        }
        this.style.display = 'none';
      `);const E=t.cloneNode(!0);p.appendChild(E),c.appendChild(_),c.appendChild(p);try{f.insertBefore(c,t),f.removeChild(t)}catch(S){console.error("DOM manipülasyon hatası:",S)}}}),s.body.innerHTML}),y=n=>{const s={year:"numeric",month:"short",day:"numeric"};return new Date(n).toLocaleDateString("tr-TR",s)};D(()=>{m.value&&B(),window.location.pathname.includes("categories")?r.value=!0:r.value=v.showDraw||!1;const n=new URLSearchParams(window.location.search);r.value=n.has("draw"),r.value||H(()=>{const s=new IntersectionObserver(t=>{t.forEach(h=>{if(h.isIntersecting){const i=h.target;i.setAttribute("loading","eager"),i.setAttribute("importance","high"),s.unobserve(i)}})},{rootMargin:"200px 0px",threshold:.01});document.querySelectorAll(".article-content img").forEach(t=>s.observe(t))})});const B=()=>{if(!m.value)return;m.value.querySelectorAll("a").forEach(s=>{const u=s.getAttribute("href");u&&!u.startsWith("/")&&!u.startsWith("#")&&(s.setAttribute("target","_blank"),s.setAttribute("rel","noopener noreferrer"))})},L=()=>{r.value=!r.value;const n=new URL(window.location.href);r.value?n.searchParams.set("draw","1"):n.searchParams.delete("draw"),window.history.pushState({},"",n)},j=n=>{confirm("Bu yazıyı silmek istediğinize emin misiniz?")&&W.delete(route("writes.destroy",n))};return(n,s)=>(a(),T(O,null,{default:g(()=>[e("div",R,[e("div",V,[e("div",q,[e("div",G,[e("h1",U,d(o.value.title),1),e("div",F,[o.value.category?(a(),l("span",Q,d(o.value.category.name),1)):w("",!0)])]),e("div",J,[e("div",K,[e("button",{onClick:L,class:P(["btn btn-sm grow-0 sm:grow-0",r.value?"btn-primary":"btn-outline"])},[(a(),l("svg",X,[r.value?(a(),l("path",Y)):(a(),l("path",Z))])),b(" "+d(r.value?"Metni Göster":"Çizimi Göster"),1)],2),x(M).user?(a(),l("div",ee,[A(x($),{href:n.route("writes.edit",o.value.id),class:"btn btn-ghost btn-sm text-xs"},{default:g(()=>[te]),_:1},8,["href"]),e("button",{onClick:s[0]||(s[0]=u=>j(o.value.id)),class:"btn btn-ghost btn-sm text-xs text-error"},oe)])):w("",!0)])])]),ne,r.value?(a(),l("div",re,[A(I,{write:o.value},null,8,["write"])])):(a(),l("div",ae,[o.value.summary?(a(),l("div",le,[ie,e("span",null,d(o.value.summary),1)])):w("",!0),e("div",{class:"article-content ql-editor",ref_key:"contentRef",ref:m,innerHTML:C.value},null,8,ce)])),e("div",de,[e("div",null,"Oluşturma: "+d(y(o.value.created_at)),1),e("div",ue,[e("span",me,[he,b(" "+d(o.value.views_count)+" görüntüleme ",1)]),o.value.updated_at!==o.value.created_at?(a(),l("span",pe," Son güncelleme: "+d(y(o.value.updated_at)),1)):w("",!0)])])])])]),_:1}))}});export{ye as default};
