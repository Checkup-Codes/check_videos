import{r as p,T as V,i as w,C as z,x as B,g as r,o as n,b as e,e as E,j as b,h as d,q as v,u as a,t as m,O as S,F as j,m as P,L as D,f as U,P as q}from"./app-Cpjbc5hx.js";/* empty css            */const A={class:"mx-auto mt-6 w-full max-w-full bg-base-100 px-3 sm:px-5 lg:mt-0"},N={class:"container mx-auto p-0 sm:p-4"},R={class:"card border border-base-200 bg-base-100 shadow-md"},$={class:"card-body p-4 sm:p-6"},O=e("h2",{class:"card-title text-primary"},"Yeni Kategori",-1),X=e("p",{class:"text-xs opacity-70 sm:text-sm"}," Kategorileriniz için kategoriler oluşturun. İsterseniz bir üst kategori seçebilirsiniz. ",-1),G=e("div",{class:"divider my-3"},null,-1),H={class:"form-control w-full"},I=e("label",{class:"label py-1.5"},[e("span",{class:"label-text"},"İsim")],-1),W={key:0,class:"label py-1"},Y={class:"label-text-alt text-error"},J={class:"form-control mt-3 w-full"},Q=e("label",{class:"label py-1.5"},[e("span",{class:"label-text"},"Slug")],-1),Z={key:0,class:"label py-1"},ee={class:"label-text-alt text-error"},te={class:"form-control mt-3 w-full"},se=e("label",{class:"label py-1.5"},[e("span",{class:"label-text"},"Üst Kategori")],-1),ae={class:"relative w-full"},oe={key:0,class:"absolute z-30 mt-1 w-full"},le={class:"menu max-h-60 w-full overflow-y-auto rounded-box border border-base-200 bg-base-100 p-2 shadow-md"},re=["onMousedown"],ne={key:1,class:"mt-2 flex items-center"},ie={class:"badge badge-sm"},ce=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),ue=[ce],de={key:0,class:"label py-1"},pe={class:"label-text-alt text-error"},me={class:"form-control mt-3 w-full"},_e=e("label",{class:"label py-1.5"},[e("span",{class:"label-text"},"Durum")],-1),be=e("option",{value:"public"},"Açık",-1),he=e("option",{value:"hidden"},"Gizli",-1),ve=[be,he],ge={key:0,class:"label py-1"},fe={class:"label-text-alt text-error"},we={class:"card-actions mt-5 justify-end"},xe=["disabled"],ye={key:0,class:"loading loading-spinner loading-xs sm:loading-sm"},Fe={__name:"CategoriesCreateFrom",props:{categories:{type:Array,default:()=>[]}},setup(x){const c=p(x.categories||[]),t=V({name:"",slug:"",parent_id:"",status:"public"}),i=p(""),_=p(""),u=p(!1),g=p(!1),f=p(null),y=()=>{clearTimeout(f.value),h.value.length>0&&(u.value=!0)},k=()=>{f.value=setTimeout(()=>{u.value=!1},100)},h=w(()=>!c.value||c.value.length===0?[]:i.value?c.value.filter(s=>s&&s.name&&s.name.toLowerCase().includes(i.value.toLowerCase())):c.value),C=w(()=>!t.name||!t.slug),L=()=>{t.parent_id="",i.value.length>=1&&(u.value=!0)},M=s=>{!s||!s.id||(t.parent_id=s.id,i.value=s.name,_.value=s.name,q(()=>{u.value=!1}))},F=()=>{t.parent_id="",i.value="",_.value=""};z(()=>t.name,s=>{s&&(t.slug=s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))});const K=()=>{t.post(route("categories.store")).then(()=>{console.log("Category created successfully"),t.reset(),i.value="",_.value=""}).catch(s=>{console.error("Error creating category:",s)})};B(()=>{(!c.value||c.value.length===0)&&T(),document.addEventListener("keydown",s=>{s.key==="Escape"&&(u.value=!1)})});const T=async()=>{g.value=!0;try{const s=await fetch(route("categories.index"),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!s.ok)throw new Error("Failed to fetch categories");const o=await s.json();c.value=o.categories||[]}catch(s){console.error("Error fetching categories:",s)}finally{g.value=!1}};return(s,o)=>(n(),r("div",A,[e("div",N,[e("div",R,[e("div",$,[O,X,G,e("form",{onSubmit:E(K,["prevent"])},[e("div",H,[I,b(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=l=>a(t).name=l),class:"input-bordered input w-full",placeholder:"Kategori ismi"},null,512),[[v,a(t).name]]),a(t).errors.name?(n(),r("label",W,[e("span",Y,m(a(t).errors.name),1)])):d("",!0)]),e("div",J,[Q,b(e("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=l=>a(t).slug=l),class:"input-bordered input w-full",placeholder:"kategori-slug"},null,512),[[v,a(t).slug]]),a(t).errors.slug?(n(),r("label",Z,[e("span",ee,m(a(t).errors.slug),1)])):d("",!0)]),e("div",te,[se,e("div",ae,[b(e("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=l=>i.value=l),onFocus:y,onBlur:k,onInput:L,onKeydown:o[3]||(o[3]=S(l=>u.value=!1,["esc"])),class:"input-bordered input w-full",placeholder:"Üst kategori ara"},null,544),[[v,i.value]]),u.value&&h.value.length>0?(n(),r("div",oe,[e("ul",le,[(n(!0),r(j,null,P(h.value,l=>(n(),r("li",{key:l.id},[e("a",{onMousedown:Ce=>M(l),class:"py-2 text-sm hover:bg-base-200"},m(l.name),41,re)]))),128))])])):d("",!0),a(t).parent_id?(n(),r("div",ne,[e("div",ie,m(_.value),1),e("button",{type:"button",onClick:F,class:"btn btn-ghost btn-xs ml-2","aria-label":"Remove parent category"},ue)])):d("",!0)]),a(t).errors.parent_id?(n(),r("label",de,[e("span",pe,m(a(t).errors.parent_id),1)])):d("",!0)]),e("div",me,[_e,b(e("select",{"onUpdate:modelValue":o[4]||(o[4]=l=>a(t).status=l),class:"select-bordered select w-full"},ve,512),[[D,a(t).status]]),a(t).errors.status?(n(),r("label",ge,[e("span",fe,m(a(t).errors.status),1)])):d("",!0)]),e("div",we,[e("button",{type:"submit",class:"btn btn-primary btn-sm sm:btn-md",disabled:a(t).processing||C.value},[a(t).processing?(n(),r("span",ye)):d("",!0),U(" Kategori Oluştur ")],8,xe)])],32)])])])]))}};export{Fe as default};
