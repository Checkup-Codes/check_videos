import{Q as z,l as _,i as A,x as B,P as E,c as N,o as i,w as S,b as e,g as d,t as c,h as p,n as D,u as T,e as L,a as P,f as $,N as j}from"./app-B_HoVpoV.js";import{_ as I}from"./ExcalidrawComponent-DQyV0u5S.js";import{_ as R}from"./CheckScreen-D1jLOQhP.js";/* empty css            */const H={class:"card dark:bg-base-100 border border-gray-200 bg-white shadow-lg transition-all duration-200 dark:border-gray-700"},O={class:"card-body p-6"},V={class:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between"},q={class:"mb-3 w-full sm:mb-0"},G={class:"break-words text-2xl font-bold"},W={class:"mt-2"},U={key:0,class:"badge badge-secondary"},F={class:"mt-2 flex flex-shrink-0 gap-2 sm:mt-0"},Q={key:0,class:"dropdown dropdown-end"},J=e("button",{class:"btn btn-ghost btn-sm dropdown-toggle"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})])],-1),K={class:"dropdown-content menu rounded-box bg-base-100 z-[1] w-52 p-2 shadow"},X=["href"],Y=e("div",{class:"divider my-2"},null,-1),Z={key:0,class:"min-h-[500px]"},ee={key:1,class:"content-container"},te={key:0,class:"alert alert-info mb-6"},se=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"h-6 w-6 shrink-0 stroke-current"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),oe=["innerHTML"],ne={class:"text-base-content/70 mt-6 flex flex-col space-y-2 p-3 text-sm sm:flex-row sm:items-center sm:justify-between sm:space-y-0"},ae={class:"flex flex-wrap items-center gap-2"},re={class:"flex items-center gap-1"},le=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",class:"h-4 w-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),ie={key:0,class:"whitespace-nowrap"},pe={__name:"Screen",setup(ce){const{props:u}=z(),s=_(u.write);u.auth;const g=_(null),a=_(!1),b=A(()=>{if(!s.value.content)return"";const o=new DOMParser().parseFromString(s.value.content,"text/html");return o.querySelectorAll("img").forEach((t,m)=>{const r=`content-img-${m}`;t.id=r,t.setAttribute("loading","lazy"),t.setAttribute("decoding","async"),t.setAttribute("importance","low"),!t.hasAttribute("width")&&!t.hasAttribute("height")&&(t.setAttribute("width","800"),t.setAttribute("height","600"));const l=o.createElement("div");l.className="img-skeleton-wrapper relative",l.style.width="100%",l.style.marginBottom="1rem",l.style.marginTop="1rem";const w=o.createElement("div");w.className="skeleton img-skeleton absolute inset-0 h-full w-full rounded-lg",w.id=`skeleton-${r}`;const v=t.parentNode;if(v){const h=o.createElement("div");h.className="img-wrapper relative",h.style.width="100%",t.style.opacity="0",t.style.transition="opacity 0.3s ease-in-out",t.setAttribute("onload",`
        this.style.opacity = '1';
        const skeleton = document.getElementById('skeleton-${r}');
        if (skeleton) skeleton.style.display = 'none';
      `),t.setAttribute("onerror",`
        const skeleton = document.getElementById('skeleton-${r}');
        if (skeleton) {
          skeleton.style.display = 'none';
          skeleton.insertAdjacentHTML('afterend', '<div class="text-error text-sm py-2">Görsel yüklenemedi</div>');
        }
        this.style.display = 'none';
      `);const M=t.cloneNode(!0);h.appendChild(M),l.appendChild(w),l.appendChild(h);try{v.insertBefore(l,t),v.removeChild(t)}catch(C){console.error("DOM manipülasyon hatası:",C)}}}),o.body.innerHTML});B(()=>{window.location.pathname.includes("categories")?a.value=!0:a.value=u.showDraw||!1;const n=new URLSearchParams(window.location.search);a.value=n.has("draw"),a.value||E(()=>{const o=new IntersectionObserver(t=>{t.forEach(m=>{if(m.isIntersecting){const r=m.target;r.setAttribute("loading","eager"),r.setAttribute("importance","high"),o.unobserve(r)}})},{rootMargin:"200px 0px",threshold:.01});document.querySelectorAll(".article-content img").forEach(t=>o.observe(t))})});const k=()=>{a.value=!a.value;const n=new URL(window.location.href);a.value?n.searchParams.set("draw","1"):n.searchParams.delete("draw"),window.history.pushState({},"",n)},x=n=>{confirm("Bu yazıyı silmek istediğinize emin misiniz?")&&j.delete(route("writes.destroy",n))},f=n=>{const o={year:"numeric",month:"long",day:"numeric"};return new Date(n).toLocaleDateString("tr-TR",o)};return(n,o)=>(i(),N(R,null,{default:S(()=>[e("div",H,[e("div",O,[e("div",V,[e("div",q,[e("h1",G,c(s.value.title),1),e("div",W,[s.value.category?(i(),d("span",U,c(s.value.category.name),1)):p("",!0)])]),e("div",F,[e("button",{onClick:k,class:D(["btn",a.value?"btn-primary":"btn-ghost","btn-sm"])},c(a.value?"Metni Göster":"Çizim Göster"),3),T(u).auth.user?(i(),d("div",Q,[J,e("ul",K,[e("li",null,[e("a",{href:n.route("writes.edit",s.value.id)},"Düzenle",8,X)]),e("li",null,[e("a",{href:"#",class:"text-error",onClick:o[0]||(o[0]=L(y=>x(s.value.id),["prevent"]))},"Sil")])])])):p("",!0)])]),Y,a.value?(i(),d("div",Z,[P(I,{write:s.value},null,8,["write"])])):(i(),d("div",ee,[s.value.summary?(i(),d("div",te,[se,e("span",null,c(s.value.summary),1)])):p("",!0),e("div",{class:"article-content ql-editor",ref_key:"contentRef",ref:g,innerHTML:b.value},null,8,oe)])),e("div",ne,[e("div",null,"Oluşturma: "+c(f(s.value.created_at)),1),e("div",ae,[e("span",re,[le,$(" "+c(s.value.views_count)+" görüntüleme ",1)]),s.value.updated_at!==s.value.created_at?(i(),d("span",ie," Son güncelleme: "+c(f(s.value.updated_at)),1)):p("",!0)])])])])]),_:1}))}};export{pe as default};
