import{Q as J,b as G,T as Q,g as m,s as Z,c as n,f as P,u as c,Z as K,w as $,a as e,e as E,h as B,j as a,o as l,F as w,l as U,t as d,i as x,E as H,k as _,n as k,p as X,R as T,m as V}from"./ssr-Dzsw7L2j.js";import{_ as ee}from"./CheckScreen-CRdgYlHR.js";const te={class:"space-y-6 py-6"},se={class:"rounded-xl bg-card p-6 ring-1 ring-border/50"},re={class:"space-y-4"},oe={key:0},le={class:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4"},ne=["src"],ie={class:"flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-border px-6 py-8 transition-colors hover:border-primary"},ae={class:"text-sm font-medium text-foreground"},de={key:1,class:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4"},ue=["src"],ce=["onClick"],me={class:"rounded-xl bg-card p-6 ring-1 ring-border/50"},pe={class:"flex gap-4"},ge={class:"flex cursor-pointer items-center gap-2"},ve={class:"flex cursor-pointer items-center gap-2"},fe={class:"rounded-xl bg-card p-6 ring-1 ring-border/50"},be={class:"mb-4 flex items-center justify-between"},xe={key:0,class:"rounded-lg border border-dashed border-border py-8 text-center"},ke={key:1,class:"space-y-3"},he={class:"min-w-0 flex-1"},ye={class:"font-medium text-foreground"},we={key:0,class:"mt-1 truncate text-sm text-muted-foreground"},_e=["href"],Ce={key:2,class:"mt-2 text-xs text-destructive"},je={key:0},ze={key:1},Me={key:2},Le={class:"ml-4 flex items-center gap-2"},Pe=["onClick"],Be=["onClick"],Ue={key:2,class:"mt-4 rounded-lg bg-destructive/10 p-3 text-sm text-destructive"},Ve={class:"flex items-center justify-end gap-3"},Re=["disabled"],De={class:"w-full max-w-md rounded-xl bg-card p-6 shadow-xl"},Ge={class:"mb-4 flex items-center justify-between"},$e={class:"text-lg font-semibold text-foreground"},Ee={class:"space-y-4"},He={key:0,class:"text-destructive"},Te={class:"mt-6 flex justify-end gap-3"},Ae=["disabled"],Ne={class:"w-full max-w-sm rounded-xl bg-card p-6 shadow-xl"},Ie={class:"mb-4 text-sm text-muted-foreground"},Se={class:"flex justify-end gap-3"},Oe={__name:"EditWorkspace",props:{workspace:{type:Object,required:!0}},setup(A){const N=J(),v=A,I=G(()=>{var o,t,s;return((s=(t=(o=N.props)==null?void 0:o.screen)==null?void 0:t.seo)==null?void 0:s.title)||"Çalışma Alanı Düzenle"}),i=Q({images:[],status:v.workspace.status||"published",products:[],_method:"PUT"}),C=m(v.workspace.images||[]),f=m([]),j=m(!1),p=m(null),r=m({name:"",features:"",link:""}),b=m(!1),h=m(null),z=m("");Z(()=>{var o;((o=v.workspace.products)==null?void 0:o.length)>0&&(i.products=v.workspace.products.map(t=>({name:t.name||"",features:t.features||"",link:t.link||""})))});const g=o=>{if(!o)return!0;try{return new URL(o),!0}catch{return!1}},M=o=>{const t=i.products[o];return t.name.length>255||t.link&&!g(t.link)||t.link&&t.link.length>500},L=G(()=>i.products.some((o,t)=>M(t))),S=o=>{const t=Array.from(o.target.files);i.images=t,f.value=t.map(s=>URL.createObjectURL(s))},F=o=>{i.images.splice(o,1),f.value.splice(o,1)},R=(o=null)=>{p.value=o,o!==null?r.value={...i.products[o]}:r.value={name:"",features:"",link:""},j.value=!0},y=()=>{j.value=!1,p.value=null,r.value={name:"",features:"",link:""}},Y=()=>{!r.value.name||r.value.name.length>255||r.value.link&&(!g(r.value.link)||r.value.link.length>500)||(p.value!==null?i.products[p.value]={...r.value}:i.products.push({...r.value}),y())},O=o=>{h.value=o,z.value=i.products[o].name,b.value=!0},W=()=>{h.value!==null&&i.products.splice(h.value,1),b.value=!1,h.value=null,z.value=""},q=()=>{L.value||i.post(`/workspace/${v.workspace.id}`,{forceFormData:!0})};return(o,t)=>(l(),n(w,null,[P(c(K),{title:I.value},null,8,["title"]),P(ee,null,{default:$(()=>[e("div",te,[t[23]||(t[23]=e("div",null,[e("h1",{class:"text-2xl font-bold text-foreground"},"Çalışma Alanını Düzenle"),e("p",{class:"mt-1 text-sm text-muted-foreground"},"Çalışma alanınızı ve ürünlerinizi güncelleyin")],-1)),e("form",{onSubmit:B(q,["prevent"]),class:"space-y-6"},[e("div",se,[t[12]||(t[12]=e("h2",{class:"mb-4 text-lg font-semibold text-foreground"},"Görseller",-1)),e("div",re,[C.value.length>0&&f.value.length===0?(l(),n("div",oe,[t[8]||(t[8]=e("p",{class:"mb-2 text-sm text-muted-foreground"},"Mevcut Görseller",-1)),e("div",le,[(l(!0),n(w,null,U(C.value,(s,u)=>(l(),n("div",{key:u,class:"aspect-video overflow-hidden rounded-lg ring-1 ring-border"},[e("img",{src:`/storage/${s}`,alt:"Current",class:"h-full w-full object-cover"},null,8,ne)]))),128))])])):a("",!0),e("label",ie,[t[9]||(t[9]=e("svg",{class:"mb-2 h-10 w-10 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",ae,d(C.value.length>0?"Resimleri Değiştir":"Resim Yükle"),1),t[10]||(t[10]=e("span",{class:"mt-1 text-xs text-muted-foreground"},"PNG, JPG, WEBP - max 5MB",-1)),e("input",{type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:S},null,32)]),f.value.length>0?(l(),n("div",de,[(l(!0),n(w,null,U(f.value,(s,u)=>(l(),n("div",{key:u,class:"group relative aspect-video overflow-hidden rounded-lg ring-1 ring-border"},[e("img",{src:s,alt:"Preview",class:"h-full w-full object-cover"},null,8,ue),e("button",{type:"button",onClick:D=>F(u),class:"absolute right-2 top-2 rounded-full bg-destructive p-1.5 text-destructive-foreground opacity-0 transition-opacity group-hover:opacity-100"},[...t[11]||(t[11]=[e("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ce)]))),128))])):a("",!0)])]),e("div",me,[t[15]||(t[15]=e("h2",{class:"mb-4 text-lg font-semibold text-foreground"},"Durum",-1)),e("div",pe,[e("label",ge,[x(e("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=s=>c(i).status=s),value:"published",class:"h-4 w-4 border-input text-primary focus:ring-primary"},null,512),[[H,c(i).status]]),t[13]||(t[13]=e("span",{class:"text-sm text-foreground"},"Yayınla",-1))]),e("label",ve,[x(e("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=s=>c(i).status=s),value:"draft",class:"h-4 w-4 border-input text-primary focus:ring-primary"},null,512),[[H,c(i).status]]),t[14]||(t[14]=e("span",{class:"text-sm text-foreground"},"Taslak",-1))])])]),e("div",fe,[e("div",be,[t[17]||(t[17]=e("h2",{class:"text-lg font-semibold text-foreground"},"Ürünler",-1)),e("button",{type:"button",onClick:t[2]||(t[2]=s=>R()),class:"inline-flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90"},[...t[16]||(t[16]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),_(" Ürün Ekle ",-1)])])]),c(i).products.length===0?(l(),n("div",xe,[...t[18]||(t[18]=[e("p",{class:"text-sm text-muted-foreground"},"Henüz ürün eklenmedi",-1)])])):(l(),n("div",ke,[(l(!0),n(w,null,U(c(i).products,(s,u)=>(l(),n("div",{key:u,class:k(["flex items-center justify-between rounded-lg border border-border bg-background p-4",{"border-destructive":M(u)}])},[e("div",he,[e("h3",ye,d(s.name),1),s.features?(l(),n("p",we,d(s.features),1)):a("",!0),s.link?(l(),n("a",{key:1,href:s.link,target:"_blank",class:"mt-1 inline-flex items-center gap-1 text-xs text-primary hover:underline"},[...t[19]||(t[19]=[e("span",null,"Link",-1),e("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)])],8,_e)):a("",!0),M(u)?(l(),n("div",Ce,[s.name.length>255?(l(),n("p",je,"İsim 255 karakteri aşamaz ("+d(s.name.length)+"/255)",1)):a("",!0),s.link&&!g(s.link)?(l(),n("p",ze,"Geçersiz URL formatı")):a("",!0),s.link&&s.link.length>500?(l(),n("p",Me,"Link 500 karakteri aşamaz ("+d(s.link.length)+"/500)",1)):a("",!0)])):a("",!0)]),e("div",Le,[e("button",{type:"button",onClick:D=>R(u),class:"rounded-lg p-2 text-muted-foreground hover:bg-accent hover:text-foreground"},[...t[20]||(t[20]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Pe),e("button",{type:"button",onClick:D=>O(u),class:"rounded-lg p-2 text-destructive hover:bg-destructive/10"},[...t[21]||(t[21]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Be)])],2))),128))])),L.value?(l(),n("div",Ue," Bazı ürünlerde hata var. Lütfen düzeltin. ")):a("",!0)]),e("div",Ve,[P(c(X),{href:"/workspace",class:"rounded-lg border border-border px-4 py-2 text-sm font-medium text-foreground hover:bg-accent"},{default:$(()=>[...t[22]||(t[22]=[_(" İptal ",-1)])]),_:1}),e("button",{type:"submit",disabled:c(i).processing||L.value,class:"rounded-lg bg-primary px-6 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 disabled:opacity-50"},d(c(i).processing?"Güncelleniyor...":"Güncelle"),9,Re)])],32)]),(l(),E(T,{to:"body"},[j.value?(l(),n("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:B(y,["self"])},[e("div",De,[e("div",Ge,[e("h3",$e,d(p.value!==null?"Ürünü Düzenle":"Yeni Ürün"),1),e("button",{onClick:y,class:"text-muted-foreground hover:text-foreground"},[...t[24]||(t[24]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Ee,[e("div",null,[t[25]||(t[25]=e("label",{class:"mb-1 block text-sm font-medium text-foreground"},[_("İsim "),e("span",{class:"text-destructive"},"*")],-1)),x(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>r.value.name=s),type:"text",maxlength:"255",placeholder:"Ürün adı",class:k(["w-full rounded-lg border border-input bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",{"border-destructive":r.value.name.length>255}])},null,2),[[V,r.value.name]]),e("p",{class:k(["mt-1 text-xs",r.value.name.length>255?"text-destructive":"text-muted-foreground"])},d(r.value.name.length)+"/255 ",3)]),e("div",null,[t[26]||(t[26]=e("label",{class:"mb-1 block text-sm font-medium text-foreground"},"Özellikler",-1)),x(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>r.value.features=s),rows:"3",placeholder:"Ürün özellikleri...",class:"w-full rounded-lg border border-input bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[V,r.value.features]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"mb-1 block text-sm font-medium text-foreground"},"Satın Alma Linki",-1)),x(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>r.value.link=s),type:"url",maxlength:"500",placeholder:"https://...",class:k(["w-full rounded-lg border border-input bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",{"border-destructive":r.value.link&&!g(r.value.link)||r.value.link.length>500}])},null,2),[[V,r.value.link]]),e("p",{class:k(["mt-1 text-xs",r.value.link.length>500?"text-destructive":"text-muted-foreground"])},[_(d(r.value.link.length)+"/500 ",1),r.value.link&&!g(r.value.link)?(l(),n("span",He," - Geçersiz URL")):a("",!0)],2)])]),e("div",Te,[e("button",{onClick:y,class:"rounded-lg border border-border px-4 py-2 text-sm font-medium text-foreground hover:bg-accent"}," İptal "),e("button",{onClick:Y,disabled:!r.value.name||r.value.name.length>255||r.value.link&&(!g(r.value.link)||r.value.link.length>500),class:"rounded-lg bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 disabled:opacity-50"},d(p.value!==null?"Güncelle":"Ekle"),9,Ae)])])])):a("",!0)])),(l(),E(T,{to:"body"},[b.value?(l(),n("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:t[7]||(t[7]=B(s=>b.value=!1,["self"]))},[e("div",Ne,[t[28]||(t[28]=e("h3",{class:"mb-2 text-lg font-semibold text-foreground"},"Ürünü Sil",-1)),e("p",Ie,' "'+d(z.value)+'" ürününü silmek istediğinizden emin misiniz? ',1),e("div",Se,[e("button",{onClick:t[6]||(t[6]=s=>b.value=!1),class:"rounded-lg border border-border px-4 py-2 text-sm font-medium text-foreground hover:bg-accent"}," İptal "),e("button",{onClick:W,class:"rounded-lg bg-destructive px-4 py-2 text-sm font-medium text-destructive-foreground hover:bg-destructive/90"}," Sil ")])])])):a("",!0)]))]),_:1})],64))}};export{Oe as default};
