import{Q as se,b as F,T as re,g as u,s as le,c as n,f as j,u as m,Z as oe,w as A,a as t,e as H,h as D,j as d,o,F as z,l as $,t as c,i as h,E as N,k as M,n as y,p as ne,R as S,m as G}from"./ssr-B7YpsODM.js";import{_ as ae}from"./CheckScreen-Cfqi5kOd.js";import{I as ie}from"./ImageCropper-DWpMGDxL.js";import"./app-D1F1K9mU.js";/* empty css            */const ue={class:"space-y-6 py-6"},de={class:"rounded-xl bg-card p-6 ring-1 ring-border/50"},ce={class:"space-y-4"},me={key:0},pe={class:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4"},ve=["src"],ge={class:"flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-border px-6 py-8 transition-colors hover:border-primary"},fe={class:"text-sm font-medium text-foreground"},xe={key:1,class:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4"},be=["src"],ke=["onClick"],he={class:"rounded-xl bg-card p-6 ring-1 ring-border/50"},ye={class:"flex gap-4"},we={class:"flex cursor-pointer items-center gap-2"},_e={class:"flex cursor-pointer items-center gap-2"},Ce={class:"rounded-xl bg-card p-6 ring-1 ring-border/50"},je={class:"mb-4 flex items-center justify-between"},ze={key:0,class:"rounded-lg border border-dashed border-border py-8 text-center"},Me={key:1,class:"space-y-3"},Le={class:"min-w-0 flex-1"},Pe={class:"font-medium text-foreground"},Be={key:0,class:"mt-1 truncate text-sm text-muted-foreground"},Ue=["href"],Re={key:2,class:"mt-2 text-xs text-destructive"},Ve={key:0},De={key:1},$e={key:2},Ge={class:"ml-4 flex items-center gap-2"},Ie=["onClick"],Te=["onClick"],Ee={key:2,class:"mt-4 rounded-lg bg-destructive/10 p-3 text-sm text-destructive"},Fe={class:"flex items-center justify-end gap-3"},Ae=["disabled"],He={class:"w-full max-w-md rounded-xl bg-card p-6 shadow-xl"},Ne={class:"mb-4 flex items-center justify-between"},Se={class:"text-lg font-semibold text-foreground"},Ye={class:"space-y-4"},Oe={key:0,class:"text-destructive"},We={class:"mt-6 flex justify-end gap-3"},qe=["disabled"],Je={class:"w-full max-w-sm rounded-xl bg-card p-6 shadow-xl"},Qe={class:"mb-4 text-sm text-muted-foreground"},Ze={class:"flex justify-end gap-3"},rt={__name:"EditWorkspace",props:{workspace:{type:Object,required:!0}},setup(Y){const O=se(),b=Y,W=F(()=>{var l,e,s;return((s=(e=(l=O.props)==null?void 0:l.screen)==null?void 0:e.seo)==null?void 0:s.title)||"Çalışma Alanı Düzenle"}),a=re({images:[],status:b.workspace.status||"published",products:[],_method:"PUT"}),L=u(b.workspace.images||[]),g=u([]),w=u(!1),I=u(""),p=u([]),v=u(0),P=u(!1),f=u(null),r=u({name:"",features:"",link:""}),k=u(!1),_=u(null),B=u("");le(()=>{var l;((l=b.workspace.products)==null?void 0:l.length)>0&&(a.products=b.workspace.products.map(e=>({name:e.name||"",features:e.features||"",link:e.link||""})))});const x=l=>{if(!l)return!0;try{return new URL(l),!0}catch{return!1}},U=l=>{const e=a.products[l];return e.name.length>255||e.link&&!x(e.link)||e.link&&e.link.length>500},R=F(()=>a.products.some((l,e)=>U(e))),q=l=>{const e=Array.from(l.target.files);e.length!==0&&(a.images=[],g.value=[],p.value=e,v.value=0,V(e[0]))},V=l=>{const e=new FileReader;e.onload=s=>{I.value=s.target.result,w.value=!0},e.readAsDataURL(l)},J=l=>{var i;const e=((i=p.value[v.value])==null?void 0:i.name)||`image-${Date.now()}.jpg`,s=new File([l],e,{type:"image/jpeg"});a.images.push(s),g.value.push(URL.createObjectURL(l)),w.value=!1,v.value++,v.value<p.value.length?setTimeout(()=>{V(p.value[v.value])},100):p.value=[]},Q=()=>{w.value=!1,v.value++,v.value<p.value.length?setTimeout(()=>{V(p.value[v.value])},100):p.value=[]},Z=l=>{a.images.splice(l,1),g.value.splice(l,1)},T=(l=null)=>{f.value=l,l!==null?r.value={...a.products[l]}:r.value={name:"",features:"",link:""},P.value=!0},C=()=>{P.value=!1,f.value=null,r.value={name:"",features:"",link:""}},K=()=>{!r.value.name||r.value.name.length>255||r.value.link&&(!x(r.value.link)||r.value.link.length>500)||(f.value!==null?a.products[f.value]={...r.value}:a.products.push({...r.value}),C())},X=l=>{_.value=l,B.value=a.products[l].name,k.value=!0},ee=()=>{_.value!==null&&a.products.splice(_.value,1),k.value=!1,_.value=null,B.value=""},te=()=>{R.value||a.post(`/workspace/${b.workspace.id}`,{forceFormData:!0})};return(l,e)=>(o(),n(z,null,[j(m(oe),{title:W.value},null,8,["title"]),j(ae,null,{default:A(()=>[t("div",ue,[e[23]||(e[23]=t("div",null,[t("h1",{class:"text-2xl font-bold text-foreground"},"Çalışma Alanını Düzenle"),t("p",{class:"mt-1 text-sm text-muted-foreground"},"Çalışma alanınızı ve ürünlerinizi güncelleyin")],-1)),t("form",{onSubmit:D(te,["prevent"]),class:"space-y-6"},[t("div",de,[e[12]||(e[12]=t("h2",{class:"mb-4 text-lg font-semibold text-foreground"},"Görseller",-1)),t("div",ce,[L.value.length>0&&g.value.length===0?(o(),n("div",me,[e[8]||(e[8]=t("p",{class:"mb-2 text-sm text-muted-foreground"},"Mevcut Görseller",-1)),t("div",pe,[(o(!0),n(z,null,$(L.value,(s,i)=>(o(),n("div",{key:i,class:"aspect-video overflow-hidden rounded-lg ring-1 ring-border"},[t("img",{src:`/storage/${s}`,alt:"Current",class:"h-full w-full object-cover"},null,8,ve)]))),128))])])):d("",!0),t("label",ge,[e[9]||(e[9]=t("svg",{class:"mb-2 h-10 w-10 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t("span",fe,c(L.value.length>0?"Resimleri Değiştir":"Resim Yükle"),1),e[10]||(e[10]=t("span",{class:"mt-1 text-xs text-muted-foreground"},"PNG, JPG, WEBP - max 5MB",-1)),t("input",{type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:q},null,32)]),g.value.length>0?(o(),n("div",xe,[(o(!0),n(z,null,$(g.value,(s,i)=>(o(),n("div",{key:i,class:"group relative aspect-video overflow-hidden rounded-lg ring-1 ring-border"},[t("img",{src:s,alt:"Preview",class:"h-full w-full object-cover"},null,8,be),t("button",{type:"button",onClick:E=>Z(i),class:"absolute right-2 top-2 rounded-full bg-destructive p-1.5 text-destructive-foreground opacity-0 transition-opacity group-hover:opacity-100"},[...e[11]||(e[11]=[t("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ke)]))),128))])):d("",!0)])]),t("div",he,[e[15]||(e[15]=t("h2",{class:"mb-4 text-lg font-semibold text-foreground"},"Durum",-1)),t("div",ye,[t("label",we,[h(t("input",{type:"radio","onUpdate:modelValue":e[0]||(e[0]=s=>m(a).status=s),value:"published",class:"h-4 w-4 border-input text-primary focus:ring-primary"},null,512),[[N,m(a).status]]),e[13]||(e[13]=t("span",{class:"text-sm text-foreground"},"Yayınla",-1))]),t("label",_e,[h(t("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=s=>m(a).status=s),value:"draft",class:"h-4 w-4 border-input text-primary focus:ring-primary"},null,512),[[N,m(a).status]]),e[14]||(e[14]=t("span",{class:"text-sm text-foreground"},"Taslak",-1))])])]),t("div",Ce,[t("div",je,[e[17]||(e[17]=t("h2",{class:"text-lg font-semibold text-foreground"},"Ürünler",-1)),t("button",{type:"button",onClick:e[2]||(e[2]=s=>T()),class:"inline-flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90"},[...e[16]||(e[16]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),M(" Ürün Ekle ",-1)])])]),m(a).products.length===0?(o(),n("div",ze,[...e[18]||(e[18]=[t("p",{class:"text-sm text-muted-foreground"},"Henüz ürün eklenmedi",-1)])])):(o(),n("div",Me,[(o(!0),n(z,null,$(m(a).products,(s,i)=>(o(),n("div",{key:i,class:y(["flex items-center justify-between rounded-lg border border-border bg-background p-4",{"border-destructive":U(i)}])},[t("div",Le,[t("h3",Pe,c(s.name),1),s.features?(o(),n("p",Be,c(s.features),1)):d("",!0),s.link?(o(),n("a",{key:1,href:s.link,target:"_blank",class:"mt-1 inline-flex items-center gap-1 text-xs text-primary hover:underline"},[...e[19]||(e[19]=[t("span",null,"Link",-1),t("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)])],8,Ue)):d("",!0),U(i)?(o(),n("div",Re,[s.name.length>255?(o(),n("p",Ve,"İsim 255 karakteri aşamaz ("+c(s.name.length)+"/255)",1)):d("",!0),s.link&&!x(s.link)?(o(),n("p",De,"Geçersiz URL formatı")):d("",!0),s.link&&s.link.length>500?(o(),n("p",$e,"Link 500 karakteri aşamaz ("+c(s.link.length)+"/500)",1)):d("",!0)])):d("",!0)]),t("div",Ge,[t("button",{type:"button",onClick:E=>T(i),class:"rounded-lg p-2 text-muted-foreground hover:bg-accent hover:text-foreground"},[...e[20]||(e[20]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Ie),t("button",{type:"button",onClick:E=>X(i),class:"rounded-lg p-2 text-destructive hover:bg-destructive/10"},[...e[21]||(e[21]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Te)])],2))),128))])),R.value?(o(),n("div",Ee," Bazı ürünlerde hata var. Lütfen düzeltin. ")):d("",!0)]),t("div",Fe,[j(m(ne),{href:"/workspace",class:"rounded-lg border border-border px-4 py-2 text-sm font-medium text-foreground hover:bg-accent"},{default:A(()=>[...e[22]||(e[22]=[M(" İptal ",-1)])]),_:1}),t("button",{type:"submit",disabled:m(a).processing||R.value,class:"rounded-lg bg-primary px-6 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 disabled:opacity-50"},c(m(a).processing?"Güncelleniyor...":"Güncelle"),9,Ae)])],32)]),(o(),H(S,{to:"body"},[P.value?(o(),n("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:D(C,["self"])},[t("div",He,[t("div",Ne,[t("h3",Se,c(f.value!==null?"Ürünü Düzenle":"Yeni Ürün"),1),t("button",{onClick:C,class:"text-muted-foreground hover:text-foreground"},[...e[24]||(e[24]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Ye,[t("div",null,[e[25]||(e[25]=t("label",{class:"mb-1 block text-sm font-medium text-foreground"},[M("İsim "),t("span",{class:"text-destructive"},"*")],-1)),h(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>r.value.name=s),type:"text",maxlength:"255",placeholder:"Ürün adı",class:y(["w-full rounded-lg border border-input bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",{"border-destructive":r.value.name.length>255}])},null,2),[[G,r.value.name]]),t("p",{class:y(["mt-1 text-xs",r.value.name.length>255?"text-destructive":"text-muted-foreground"])},c(r.value.name.length)+"/255 ",3)]),t("div",null,[e[26]||(e[26]=t("label",{class:"mb-1 block text-sm font-medium text-foreground"},"Özellikler",-1)),h(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>r.value.features=s),rows:"3",placeholder:"Ürün özellikleri...",class:"w-full rounded-lg border border-input bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[G,r.value.features]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"mb-1 block text-sm font-medium text-foreground"},"Satın Alma Linki",-1)),h(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>r.value.link=s),type:"url",maxlength:"500",placeholder:"https://...",class:y(["w-full rounded-lg border border-input bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",{"border-destructive":r.value.link&&!x(r.value.link)||r.value.link.length>500}])},null,2),[[G,r.value.link]]),t("p",{class:y(["mt-1 text-xs",r.value.link.length>500?"text-destructive":"text-muted-foreground"])},[M(c(r.value.link.length)+"/500 ",1),r.value.link&&!x(r.value.link)?(o(),n("span",Oe," - Geçersiz URL")):d("",!0)],2)])]),t("div",We,[t("button",{onClick:C,class:"rounded-lg border border-border px-4 py-2 text-sm font-medium text-foreground hover:bg-accent"}," İptal "),t("button",{onClick:K,disabled:!r.value.name||r.value.name.length>255||r.value.link&&(!x(r.value.link)||r.value.link.length>500),class:"rounded-lg bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 disabled:opacity-50"},c(f.value!==null?"Güncelle":"Ekle"),9,qe)])])])):d("",!0)])),(o(),H(S,{to:"body"},[k.value?(o(),n("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:e[7]||(e[7]=D(s=>k.value=!1,["self"]))},[t("div",Je,[e[28]||(e[28]=t("h3",{class:"mb-2 text-lg font-semibold text-foreground"},"Ürünü Sil",-1)),t("p",Qe,' "'+c(B.value)+'" ürününü silmek istediğinizden emin misiniz? ',1),t("div",Ze,[t("button",{onClick:e[6]||(e[6]=s=>k.value=!1),class:"rounded-lg border border-border px-4 py-2 text-sm font-medium text-foreground hover:bg-accent"}," İptal "),t("button",{onClick:ee,class:"rounded-lg bg-destructive px-4 py-2 text-sm font-medium text-destructive-foreground hover:bg-destructive/90"}," Sil ")])])])):d("",!0)])),j(ie,{show:w.value,"image-src":I.value,"aspect-ratio":16/9,onCrop:J,onCancel:Q},null,8,["show","image-src"])]),_:1})],64))}};export{rt as default};
