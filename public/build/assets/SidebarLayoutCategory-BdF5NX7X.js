import{_ as x}from"./CheckSubsidebar-DxX88Bkq.js";import{_ as T}from"./SubSidebarScreen-BduBfr8C.js";import w from"./CategoryTree-rrpPRD2C.js";import{u as L}from"./useSidebar-KcsnjOHv.js";import{D as k,p as n,S as A,r as o,s as E,m as u,j as g,w as m,e as N,h as I,o as f,n as $}from"./ssr-COd_82OS.js";import{_ as R}from"./app-udAvpmnU.js";/* empty css            */const j=Object.assign({name:"SidebarLayoutCategory"},{__name:"SidebarLayoutCategory",emits:["update:isNarrow"],setup(z,{emit:_}){L();const s=k(),C=n(()=>s.getters["Theme/getCurrentTheme"]),i=A("categories",[]);n(()=>i.filter(e=>!e.parent_id||e.parent_id===null||e.parent_id==="null"||e.parent_id===0));const c=n(()=>s.getters["CategorySidebar/collapsedSet"].size===0),v=()=>"",S=o(!0),h=o(null),r=o(s.getters["Writes/isCollapsed"]),a=o(null),b=_;E(r,e=>{b("update:isNarrow",e)}),u(()=>{r.value=s.getters["Writes/isCollapsed"]});const d=e=>{const t=e.target.scrollTop;localStorage.setItem("categorySidebarScroll",t)},p=e=>{let t=[];return e.forEach(l=>{t.push(l.id),l.children&&l.children.length>0&&(t=t.concat(p(l.children)))}),t},y=()=>{if(c.value){const e=p(i);s.dispatch("CategorySidebar/collapseAll",e)}else s.dispatch("CategorySidebar/expandAll")};return u(()=>{if(a.value&&(a.value.addEventListener&&a.value.addEventListener("scroll",d),a.value.$el)){a.value.$el.addEventListener("scroll",d);const e=localStorage.getItem("categorySidebarScroll");e&&(a.value.$el.scrollTop=parseInt(e,10))}}),(e,t)=>(f(),g(x,{isNarrow:r.value,class:$(C.value)},{default:m(()=>[N(T,{ref_key:"scrollableRef",ref:a,class:"sidebar-content-embedded"},{default:m(()=>[S.value?(f(),g(w,{key:0,ref_key:"categoryTreeRef",ref:h,getLinkClasses:v,expandAll:c.value,isCollapsed:r.value,enableExpandCollapse:!0,onToggleExpand:y},null,8,["expandAll","isCollapsed"])):I("",!0)]),_:1},512)]),_:1},8,["isNarrow","class"]))}}),F=R(j,[["__scopeId","data-v-4827c8e6"]]);export{F as default};
