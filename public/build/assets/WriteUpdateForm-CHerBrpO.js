import{Q as U,r as h,T as O,m as f,s as b,c as u,o as d,a as e,y as D,l as N,h as v,k as c,v as m,u as s,n as _,t as p,e as j,B as k,F as B,g as T,E as M,N as C}from"./ssr-C9XDUnK-.js";import E from"./RichTextEditor-CQDYE7d1.js";import"./quill.snow-D5BAok_-.js";import"./app-DfyP6Zkg.js";/* empty css            */const Y={class:"card"},L={class:"card-body p-6"},$=D('<div class="card-title flex items-center justify-between"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg><h2 class="text-gray-800 dark:text-white">Yazıyı Güncelle</h2></div></div>',1),A={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},F={class:"md:col-span-2"},G={class:"form-control w-full"},K=e("label",{class:"label"},[e("span",{class:"label-text"},"Başlık")],-1),I={class:"relative"},W={key:0,class:"label"},H={class:"label-text-alt text-error"},J={class:"form-control w-full"},Q=e("label",{class:"label"},[e("span",{class:"label-text"},"Slug")],-1),R={class:"relative"},q={key:0,class:"label"},P={class:"label-text-alt text-error"},X={class:"form-control w-full"},Z=e("label",{class:"label"},[e("span",{class:"label-text"},"Yayınlama Tarihi")],-1),ee={class:"flex space-x-2"},te={key:0,class:"label"},se={class:"label-text-alt text-error"},le={class:"md:col-span-2"},ae={class:"form-control w-full"},oe=e("label",{class:"label"},[e("span",{class:"label-text"},"Özet")],-1),re={class:"relative"},ie={key:0,class:"label"},ne={class:"label-text-alt text-error"},ue={class:"md:col-span-2"},de=e("label",{class:"label"},[e("span",{class:"label-text"},"Kategori")],-1),ce=e("option",{value:"",disabled:""},"Kategori seç",-1),_e=["value"],pe={key:0,class:"label"},ve={class:"label-text-alt text-error"},me=e("label",{class:"label"},[e("span",{class:"label-text"},"Durumu")],-1),be=e("option",{value:"draft"},"Şablon",-1),he=e("option",{value:"published"},"Yayında",-1),ge=e("option",{value:"private"},"Gizli",-1),ye=e("option",{value:"link_only"},"Sadece Link",-1),xe=[be,he,ge,ye],we={key:0,class:"label"},fe={class:"label-text-alt text-error"},ke={class:"form-control w-full"},Se=e("label",{class:"label"},[e("span",{class:"label-text"},"Etiketler")],-1),ze={class:"relative"},Ve={key:0,class:"label"},Ue={class:"label-text-alt text-error"},Oe={class:"form-control w-full"},De=e("label",{class:"label"},[e("span",{class:"label-text"},"SEO Anahtar Kelimeleri")],-1),Ne={class:"relative"},je={key:0,class:"label"},Be={class:"label-text-alt text-error"},Te={class:"form-control w-full"},Me=e("label",{class:"label"},[e("span",{class:"label-text"},"SEO Meta Açıklaması")],-1),Ce={class:"relative"},Ee={class:"mt-1 text-xs text-gray-500"},Ye={key:0,class:"label"},Le={class:"label-text-alt text-error"},$e=e("div",{class:"mt-1 text-xs text-gray-500"},[e("span",null,"İpucu: Bu açıklama arama sonuçlarında gösterilir. Boş bırakırsanız, özet kısmı kullanılacaktır.")],-1),Ae={class:"form-control w-full"},Fe=e("label",{class:"label"},[e("span",{class:"label-text"},"Görüntülenme Sayısı")],-1),Ge={class:"relative"},Ke={class:"flex items-center space-x-2"},Ie={class:"label cursor-pointer justify-start gap-2"},We=e("span",{class:"label-text"},"Çizim İçerir",-1),He=e("div",{class:"divider"},null,-1),Je={class:"flex justify-end space-x-3"},Qe=["disabled"],tt=Object.assign({name:"WriteUpdateForm"},{__name:"WriteUpdateForm",setup(Re){const{props:x}=U(),S=h(x.categories),i=h(x.write),t=O({title:i.value.title||"",slug:i.value.slug||"",content:i.value.content||"",published_at:i.value.published_at||"",summary:i.value.summary||"",status:i.value.status||"draft",category_id:i.value.category_id||"",seo_keywords:i.value.seo_keywords||"",meta_description:i.value.meta_description||"",tags:i.value.tags||"",views_count:i.value.views_count||0,hasDraw:i.value.hasDraw||!1}),l=h({title:"",slug:"",content:"",published_at:"",summary:"",status:"",category_id:"",seo_keywords:"",meta_description:"",tags:""}),n=h({date:"",time:""});f(()=>{if(t.published_at){const r=new Date(t.published_at);isNaN(r.getTime())||(n.value.date=r.toISOString().split("T")[0],n.value.time=r.toTimeString().substring(0,5))}}),b(n.value,()=>{n.value.date&&n.value.time&&(t.published_at=`${n.value.date}T${n.value.time}:00`)},{deep:!0});const z=()=>{l.value.title=t.title?"":"Başlık zorunludur.",l.value.slug=t.slug?"":"Slug zorunludur.",l.value.content=t.content?"":"İçerik zorunludur.",l.value.published_at=n.value.date&&n.value.time?"":"Yayınlama tarihi zorunludur.",l.value.summary=t.summary?"":"Özet zorunludur.",l.value.category_id=t.category_id?"":"Kategori seçilmelidir.",l.value.published_at||(t.published_at=`${n.value.date}T${n.value.time}:00`)},g=`write_edit_form_${i.value.id||i.value.slug||"unknown"}`;b(t,r=>{localStorage.setItem(g,JSON.stringify(r))},{deep:!0}),f(()=>{const r=localStorage.getItem(g);if(r){const a=JSON.parse(r);Object.assign(t,a)}});const V=()=>{z(),Object.values(l.value).some(r=>r!=="")||t.put(route("writes.update",{write:i.value.slug}),{onSuccess:()=>{localStorage.removeItem(g),C.visit(route("writes.show",{write:t.slug}))}})};let y=!0;return b(()=>t.title,r=>{y||(t.slug=r.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim())}),b(()=>t.slug,(r,a)=>{r!==a&&(y=!0)}),b(()=>t.slug,r=>{r===""&&(y=!1)}),(r,a)=>{var w;return d(),u("div",Y,[e("div",L,[$,e("form",{onSubmit:N(V,["prevent"]),class:"space-y-6"},[e("div",A,[e("div",F,[e("div",G,[K,e("div",I,[c(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>s(t).title=o),placeholder:"Yazının başlığını girin",class:_(["input-bordered input w-full",{"input-error":l.value.title||s(t).errors.title}])},null,2),[[m,s(t).title]])]),l.value.title||s(t).errors.title?(d(),u("label",W,[e("span",H,p(l.value.title||s(t).errors.title),1)])):v("",!0)])]),e("div",null,[e("div",J,[Q,e("div",R,[c(e("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=o=>s(t).slug=o),placeholder:"örnek-yazı-slug",class:_(["input-bordered input w-full",{"input-error":l.value.slug||s(t).errors.slug}])},null,2),[[m,s(t).slug]])]),l.value.slug||s(t).errors.slug?(d(),u("label",q,[e("span",P,p(l.value.slug||s(t).errors.slug),1)])):v("",!0)])]),e("div",null,[e("div",X,[Z,e("div",ee,[c(e("input",{type:"date","onUpdate:modelValue":a[2]||(a[2]=o=>n.value.date=o),class:_(["input-bordered input w-full",{"input-error":l.value.published_at||s(t).errors.published_at}])},null,2),[[m,n.value.date]]),c(e("input",{type:"time","onUpdate:modelValue":a[3]||(a[3]=o=>n.value.time=o),class:_(["input-bordered input w-full",{"input-error":l.value.published_at||s(t).errors.published_at}])},null,2),[[m,n.value.time]])]),l.value.published_at||s(t).errors.published_at?(d(),u("label",te,[e("span",se,p(l.value.published_at||s(t).errors.published_at),1)])):v("",!0)])]),e("div",le,[e("div",ae,[oe,e("div",re,[c(e("textarea",{"onUpdate:modelValue":a[4]||(a[4]=o=>s(t).summary=o),rows:"3",placeholder:"Yazının kısa özeti",class:_(["textarea-bordered textarea w-full",{"textarea-error":l.value.summary||s(t).errors.summary}])},null,2),[[m,s(t).summary]])]),l.value.summary||s(t).errors.summary?(d(),u("label",ie,[e("span",ne,p(l.value.summary||s(t).errors.summary),1)])):v("",!0)])]),e("div",ue,[j(E,{modelValue:s(t).content,"onUpdate:modelValue":a[5]||(a[5]=o=>s(t).content=o),label:"İçerik",error:l.value.content||s(t).errors.content,placeholder:"İçeriği buraya yazın...",height:"400px"},null,8,["modelValue","error"])]),e("div",null,[de,c(e("select",{"onUpdate:modelValue":a[6]||(a[6]=o=>s(t).category_id=o),class:_(["select-bordered select w-full",{"select-error":l.value.category_id||s(t).errors.category_id}])},[ce,(d(!0),u(B,null,T(S.value,o=>(d(),u("option",{key:o.id,value:o.id},p(o.name),9,_e))),128))],2),[[k,s(t).category_id]]),l.value.category_id||s(t).errors.category_id?(d(),u("label",pe,[e("span",ve,p(l.value.category_id||s(t).errors.category_id),1)])):v("",!0)]),e("div",null,[me,c(e("select",{"onUpdate:modelValue":a[7]||(a[7]=o=>s(t).status=o),class:_(["select-bordered select w-full",{"select-error":l.value.status||s(t).errors.status}])},xe,2),[[k,s(t).status]]),l.value.status||s(t).errors.status?(d(),u("label",we,[e("span",fe,p(l.value.status||s(t).errors.status),1)])):v("",!0)]),e("div",null,[e("div",ke,[Se,e("div",ze,[c(e("input",{type:"text","onUpdate:modelValue":a[8]||(a[8]=o=>s(t).tags=o),placeholder:"etiket1, etiket2, etiket3",class:_(["input-bordered input w-full",{"input-error":l.value.tags||s(t).errors.tags}])},null,2),[[m,s(t).tags]])]),l.value.tags||s(t).errors.tags?(d(),u("label",Ve,[e("span",Ue,p(l.value.tags||s(t).errors.tags),1)])):v("",!0)])]),e("div",null,[e("div",Oe,[De,e("div",Ne,[c(e("input",{type:"text","onUpdate:modelValue":a[9]||(a[9]=o=>s(t).seo_keywords=o),placeholder:"anahtar1, anahtar2, anahtar3",class:_(["input-bordered input w-full",{"input-error":l.value.seo_keywords||s(t).errors.seo_keywords}])},null,2),[[m,s(t).seo_keywords]])]),l.value.seo_keywords||s(t).errors.seo_keywords?(d(),u("label",je,[e("span",Be,p(l.value.seo_keywords||s(t).errors.seo_keywords),1)])):v("",!0)])]),e("div",null,[e("div",Te,[Me,e("div",Ce,[c(e("textarea",{"onUpdate:modelValue":a[10]||(a[10]=o=>s(t).meta_description=o),placeholder:"Arama motorları için kısa bir açıklama (max 160 karakter)",class:_(["textarea-bordered textarea w-full",{"textarea-error":l.value.meta_description||s(t).errors.meta_description}]),maxlength:"160",rows:"2"},null,2),[[m,s(t).meta_description]]),e("div",Ee,p(((w=s(t).meta_description)==null?void 0:w.length)||0)+"/160",1)]),l.value.meta_description||s(t).errors.meta_description?(d(),u("label",Ye,[e("span",Le,p(l.value.meta_description||s(t).errors.meta_description),1)])):v("",!0),$e])]),e("div",null,[e("div",Ae,[Fe,e("div",Ge,[c(e("input",{type:"number","onUpdate:modelValue":a[11]||(a[11]=o=>s(t).views_count=o),class:"input-bordered input w-full",readonly:""},null,512),[[m,s(t).views_count]])])])]),e("div",Ke,[e("label",Ie,[c(e("input",{type:"checkbox","onUpdate:modelValue":a[12]||(a[12]=o=>s(t).hasDraw=o),class:"checkbox checkbox-primary"},null,512),[[M,s(t).hasDraw]]),We])])]),He,e("div",Je,[e("button",{type:"submit",class:_(["btn btn-primary",{loading:s(t).processing}]),disabled:s(t).processing}," Güncelle ",10,Qe)])],32)])])}}});export{tt as default};
