import{Q as D,b as L,T as R,g as T,s as A,c as i,f,u as n,Z as E,w as v,a as e,p as C,k as m,h as P,j as b,o as a,F as x,l as w,t as k,i as g,E as V,m as y}from"./ssr-BytXMzjc.js";import{_ as N}from"./CheckScreen-BxhyIBub.js";const F={class:"mx-auto max-w-4xl py-8"},G={class:"mb-8"},H={key:0},S={class:"grid grid-cols-2 gap-3 md:grid-cols-3 lg:grid-cols-4"},q=["src"],I={for:"images",class:"mb-2 block text-sm font-medium text-foreground"},O={class:"relative"},Q={key:0,class:"mt-3 grid grid-cols-2 gap-3 md:grid-cols-3 lg:grid-cols-4"},W=["src"],Y=["onClick"],Z={key:1,class:"mt-1 text-sm text-destructive"},J={class:"flex gap-4"},K={class:"flex cursor-pointer items-center gap-2"},X={class:"flex cursor-pointer items-center gap-2"},ee={class:"rounded-lg border border-border bg-card p-6"},te={key:0,class:"py-8 text-center text-sm text-muted-foreground"},re={key:1,class:"space-y-4"},oe={class:"mb-4 flex items-center justify-between"},se={class:"text-sm font-medium text-foreground"},le=["onClick"],ne={class:"space-y-4"},ie=["for"],ae=["id","onUpdate:modelValue"],de=["for"],ue=["id","onUpdate:modelValue"],ce=["for"],pe=["id","onUpdate:modelValue"],me={class:"flex items-center gap-3 pt-4"},ge=["disabled"],fe={key:0,class:"h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ke={__name:"EditWorkspace",props:{workspace:{type:Object,required:!0}},setup(u){const h=D(),$=L(()=>{var l,t,r,s,d,_;return((r=(t=(l=h.props)==null?void 0:l.screen)==null?void 0:t.seo)==null?void 0:r.title)||((_=(d=(s=h.props)==null?void 0:s.app)==null?void 0:d.seo)==null?void 0:_.title)||"Çalışma Alanı Düzenle"}),c=u,o=R({images:[],status:c.workspace.status||"published",products:[],_method:"PUT"}),p=T([]);A(()=>{c.workspace.products&&c.workspace.products.length>0&&(o.products=c.workspace.products.map(l=>({name:l.name||"",features:l.features||"",link:l.link||""})))});const M=l=>{const t=Array.from(l.target.files);o.images=t,p.value=t.map(r=>URL.createObjectURL(r))},j=l=>{o.images.splice(l,1),p.value.splice(l,1)},U=()=>{o.products.push({name:"",features:"",link:""})},z=l=>{o.products.splice(l,1)},B=()=>{o.post(`/workspace/${c.workspace.id}`,{forceFormData:!0})};return(l,t)=>(a(),i(x,null,[f(n(E),{title:$.value},null,8,["title"]),f(N,null,{default:v(()=>[e("div",F,[e("div",G,[f(n(C),{href:`/workspace/${u.workspace.id}`,class:"mb-4 inline-flex items-center gap-2 text-sm text-muted-foreground transition-colors hover:text-foreground"},{default:v(()=>[...t[2]||(t[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),m(" Geri ",-1)])]),_:1},8,["href"]),t[3]||(t[3]=e("h1",{class:"text-3xl font-bold tracking-tight text-foreground"},"Çalışma Alanını Düzenle",-1)),t[4]||(t[4]=e("p",{class:"mt-2 text-muted-foreground"},"Çalışma alanınızı ve ürünlerinizi güncelleyin.",-1))]),e("form",{onSubmit:P(B,["prevent"]),class:"space-y-6"},[u.workspace.images&&u.workspace.images.length>0&&p.value.length===0?(a(),i("div",H,[t[5]||(t[5]=e("label",{class:"mb-2 block text-sm font-medium text-foreground"},"Mevcut Resimler",-1)),e("div",S,[(a(!0),i(x,null,w(u.workspace.images,(r,s)=>(a(),i("div",{key:s,class:"relative group"},[e("img",{src:`/storage/${r}`,alt:"Current",class:"h-32 w-full rounded-lg border border-border object-cover"},null,8,q)]))),128))])])):b("",!0),e("div",null,[e("label",I,k(u.workspace.images&&u.workspace.images.length>0?"Resimleri Değiştir":"Resimler Ekle"),1),e("div",O,[e("input",{id:"images",type:"file",accept:"image/*",multiple:"",onChange:M,class:"w-full cursor-pointer rounded-lg border border-input bg-background px-4 py-2.5 text-foreground file:mr-4 file:rounded-md file:border-0 file:bg-primary file:px-4 file:py-1 file:text-sm file:font-medium file:text-primary-foreground hover:file:bg-primary/90"},null,32)]),p.value.length>0?(a(),i("div",Q,[(a(!0),i(x,null,w(p.value,(r,s)=>(a(),i("div",{key:s,class:"relative group"},[e("img",{src:r,alt:"Preview",class:"h-32 w-full rounded-lg border border-border object-cover"},null,8,W),e("button",{type:"button",onClick:d=>j(s),class:"absolute right-2 top-2 rounded-full bg-destructive p-1.5 text-white opacity-0 transition-opacity group-hover:opacity-100"},[...t[6]||(t[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Y)]))),128))])):b("",!0),n(o).errors.images?(a(),i("p",Z,k(n(o).errors.images),1)):b("",!0)]),e("div",null,[t[9]||(t[9]=e("label",{class:"mb-2 block text-sm font-medium text-foreground"},"Durum",-1)),e("div",J,[e("label",K,[g(e("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=r=>n(o).status=r),value:"published",class:"h-4 w-4 border-input text-primary focus:ring-primary"},null,512),[[V,n(o).status]]),t[7]||(t[7]=e("span",{class:"text-sm text-foreground"},"Yayınla",-1))]),e("label",X,[g(e("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=r=>n(o).status=r),value:"draft",class:"h-4 w-4 border-input text-primary focus:ring-primary"},null,512),[[V,n(o).status]]),t[8]||(t[8]=e("span",{class:"text-sm text-foreground"},"Taslak",-1))])])]),e("div",ee,[e("div",{class:"mb-4 flex items-center justify-between"},[t[11]||(t[11]=e("h2",{class:"text-lg font-semibold text-foreground"},"Ürünler",-1)),e("button",{type:"button",onClick:U,class:"inline-flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90"},[...t[10]||(t[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),m(" Ürün Ekle ",-1)])])]),n(o).products.length===0?(a(),i("div",te," Henüz ürün eklenmedi. ")):(a(),i("div",re,[(a(!0),i(x,null,w(n(o).products,(r,s)=>(a(),i("div",{key:s,class:"rounded-lg border border-border bg-background p-4"},[e("div",oe,[e("h3",se,"Ürün "+k(s+1),1),e("button",{type:"button",onClick:d=>z(s),class:"rounded-lg p-1.5 text-destructive transition-colors hover:bg-destructive/10"},[...t[12]||(t[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,le)]),e("div",ne,[e("div",null,[e("label",{for:`product-name-${s}`,class:"mb-1 block text-xs font-medium text-foreground"},[...t[13]||(t[13]=[m(" İsim ",-1),e("span",{class:"text-destructive"},"*",-1)])],8,ie),g(e("input",{id:`product-name-${s}`,"onUpdate:modelValue":d=>r.name=d,type:"text",class:"w-full rounded-lg border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Ürün adı",required:""},null,8,ae),[[y,r.name]])]),e("div",null,[e("label",{for:`product-features-${s}`,class:"mb-1 block text-xs font-medium text-foreground"}," Özellikler ",8,de),g(e("textarea",{id:`product-features-${s}`,"onUpdate:modelValue":d=>r.features=d,rows:"3",class:"w-full rounded-lg border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Ürün özelliklerini buraya yazın..."},null,8,ue),[[y,r.features]])]),e("div",null,[e("label",{for:`product-link-${s}`,class:"mb-1 block text-xs font-medium text-foreground"}," Satın Alma Linki ",8,ce),g(e("input",{id:`product-link-${s}`,"onUpdate:modelValue":d=>r.link=d,type:"url",class:"w-full rounded-lg border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"https://..."},null,8,pe),[[y,r.link]])])])]))),128))]))]),e("div",me,[e("button",{type:"submit",disabled:n(o).processing,class:"inline-flex items-center gap-2 rounded-lg bg-primary px-6 py-2.5 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90 disabled:cursor-not-allowed disabled:opacity-50"},[n(o).processing?(a(),i("svg",fe,[...t[14]||(t[14]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):b("",!0),m(" "+k(n(o).processing?"Güncelleniyor...":"Güncelle"),1)],8,ge),f(n(C),{href:`/workspace/${u.workspace.id}`,class:"inline-flex items-center gap-2 rounded-lg border border-border bg-card px-6 py-2.5 text-sm font-medium text-foreground transition-colors hover:bg-accent"},{default:v(()=>[...t[15]||(t[15]=[m(" İptal ",-1)])]),_:1},8,["href"])])],32)])]),_:1})],64))}};export{ke as default};
