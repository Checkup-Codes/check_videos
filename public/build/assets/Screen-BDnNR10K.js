import{Q,e as E,p as f,j as F,w as h,a as e,c as i,t as l,u as n,o as d,n as b,h as v,F as q,g as V,f as c,b as y,i as w}from"./ssr-Dd8vfvSV.js";import{_ as H}from"./CheckScreen-CGJmr-Qf.js";const Y={class:"mx-auto max-w-4xl space-y-6 p-6"},I={class:"space-y-4 rounded-lg border border-border bg-card p-6"},O={class:"text-center"},R={class:"text-muted-foreground"},U={class:"flex justify-center"},J={class:"relative h-32 w-32"},W={class:"h-32 w-32 -rotate-90 transform"},X=["stroke-dasharray"],Z={class:"absolute inset-0 flex flex-col items-center justify-center"},ee={class:"grid grid-cols-3 gap-4"},te={class:"rounded-lg border border-border bg-background p-4 text-center"},se={class:"text-2xl font-bold text-foreground"},re={class:"rounded-lg border border-border bg-background p-4 text-center"},oe={class:"text-2xl font-bold text-foreground"},ne={class:"rounded-lg border border-border bg-background p-4 text-center"},de={class:"text-2xl font-bold text-foreground"},ie={class:"flex flex-wrap justify-center gap-4 text-sm text-muted-foreground"},le={key:0,class:"flex items-center gap-2"},ae={key:1,class:"flex items-center gap-2"},ue={class:"space-y-4"},ce={class:"space-y-6"},me={class:"flex items-start justify-between"},xe={class:"flex-1"},ge={class:"mb-2 flex items-center gap-2"},pe={key:0,class:"flex items-center gap-1 text-sm font-medium text-green-600 dark:text-green-400"},fe={key:1,class:"flex items-center gap-1 text-sm font-medium text-red-600 dark:text-red-400"},be={class:"text-lg font-medium text-foreground"},ve={class:"space-y-2"},_e={class:"font-medium text-muted-foreground"},he={class:"flex-1 text-foreground"},ke={class:"flex gap-2"},ye={key:0,class:"rounded-md bg-green-500 px-2 py-1 text-xs font-medium text-white"},we={key:1,class:"rounded-md bg-red-500 px-2 py-1 text-xs font-medium text-white"},Ce={key:0,class:"rounded-md border border-blue-200 bg-blue-50 p-3 dark:border-blue-800 dark:bg-blue-950"},je={class:"flex items-start gap-2"},Me={class:"mt-1 text-sm text-blue-800 dark:text-blue-200"},$e={key:0,class:"rounded-lg border border-border bg-card p-6"},Te={class:"space-y-4"},Be={class:"rounded-md border border-input bg-background p-4"},De={class:"text-foreground font-medium",id:"shareMessage"},Se={class:"flex gap-2"},qe={key:1,class:"flex gap-4"},Ne={__name:"Screen",setup(Ve){const{props:C}=Q(),s=C.result||{},j=C.isGuest||!1,m=E("Mesajı Kopyala"),z=f(()=>j&&s.answers?s.answers.map((r,t)=>({id:`guest-answer-${t}`,question:r.question,option:r.option,is_correct:r.is_correct})):s.answers||[]),M=f(()=>{const r=s.score||0;return r>=80?"text-green-500":r>=60?"text-yellow-500":"text-red-500"}),$=f(()=>2*Math.PI*56),K=f(()=>(s.score||0)/100*$.value),N=r=>!r||!r.options?[]:r.options.sort((t,u)=>(t.order||0)-(u.order||0)),G=r=>{if(!r)return"";const t=Math.floor(r/60),u=r%60;return t>0?`${t} dakika ${u} saniye`:`${u} saniye`},L=r=>r?new Date(r).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",k=f(()=>{var g,p;const r=((g=s.test)==null?void 0:g.title)||"Test",t=s.participant_name||"Ben",u=Math.round(s.score||0),_=s.total_questions||0,x=(p=s.test)==null?void 0:p.slug;if(!x)return"";const o=window.location.origin+`/tests/${x}`;return`${o} sitesindeki "${r}" testindeki ${_} soruluk sınavdan ${t} ${u} aldım, sen de dener misin? : ${o}`}),A=async()=>{try{await navigator.clipboard.writeText(k.value),m.value="Kopyalandı!",setTimeout(()=>{m.value="Mesajı Kopyala"},2e3)}catch{const t=document.createElement("textarea");t.value=k.value,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();try{document.execCommand("copy"),m.value="Kopyalandı!",setTimeout(()=>{m.value="Mesajı Kopyala"},2e3)}catch(u){console.error("Kopyalama hatası:",u)}document.body.removeChild(t)}};return(r,t)=>(d(),F(H,null,{default:h(()=>{var u,_,x;return[e("div",Y,[e("div",I,[e("div",O,[t[0]||(t[0]=e("h1",{class:"mb-2 text-3xl font-bold text-foreground"},"Test Sonucu",-1)),e("p",R,l((u=n(s).test)==null?void 0:u.title),1)]),e("div",U,[e("div",J,[(d(),i("svg",W,[t[1]||(t[1]=e("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor","stroke-width":"8",fill:"none",class:"text-muted"},null,-1)),e("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor","stroke-width":"8",fill:"none","stroke-dasharray":`${K.value} ${$.value}`,class:b(["text-primary transition-all duration-500",M.value])},null,10,X)])),e("div",Z,[e("span",{class:b(["text-3xl font-bold",M.value])},l(Math.round(n(s).score)),3),t[2]||(t[2]=e("span",{class:"text-xs text-muted-foreground"},"puan",-1))])])]),e("div",ee,[e("div",te,[e("div",se,l(n(s).correct_answers),1),t[3]||(t[3]=e("div",{class:"text-sm text-muted-foreground"},"Doğru",-1))]),e("div",re,[e("div",oe,l(n(s).total_questions-n(s).correct_answers),1),t[4]||(t[4]=e("div",{class:"text-sm text-muted-foreground"},"Yanlış",-1))]),e("div",ne,[e("div",de,l(n(s).total_questions),1),t[5]||(t[5]=e("div",{class:"text-sm text-muted-foreground"},"Toplam",-1))])]),e("div",ie,[n(s).time_taken?(d(),i("div",le,[t[6]||(t[6]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",null,l(G(n(s).time_taken)),1)])):v("",!0),n(s).completed_at?(d(),i("div",ae,[t[7]||(t[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",null,l(L(n(s).completed_at)),1)])):v("",!0)])]),e("div",ue,[t[12]||(t[12]=e("h2",{class:"text-xl font-semibold text-foreground"},"Sorular ve Cevaplar",-1)),e("div",ce,[(d(!0),i(q,null,V(z.value,(o,g)=>{var p,T;return d(),i("div",{key:o.id||g,class:b(["space-y-4 rounded-lg border border-border bg-card p-6",{"border-green-500 bg-green-50 dark:bg-green-950":o.is_correct,"border-red-500 bg-red-50 dark:bg-red-950":!o.is_correct}])},[e("div",me,[e("div",xe,[e("div",ge,[e("span",{class:b(["rounded-md px-2 py-1 text-sm font-semibold",o.is_correct?"bg-green-500 text-white":"bg-red-500 text-white"])}," Soru "+l(g+1),3),o.is_correct?(d(),i("span",pe,[...t[8]||(t[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),c(" Doğru ",-1)])])):(d(),i("span",fe,[...t[9]||(t[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),c(" Yanlış ",-1)])]))]),e("p",be,l((p=o.question)==null?void 0:p.question_text),1)])]),e("div",ve,[(d(!0),i(q,null,V(N(o.question),(a,P)=>{var B,D,S;return d(),i("div",{key:a.id,class:b(["flex items-start gap-3 rounded-lg border p-3",{"border-green-500 bg-green-100 dark:bg-green-900":a.is_correct,"border-red-500 bg-red-100 dark:bg-red-900":!a.is_correct&&(o.option_id===a.id||((B=o.option)==null?void 0:B.id)===a.id),"border-border bg-background":!a.is_correct&&o.option_id!==a.id&&((D=o.option)==null?void 0:D.id)!==a.id}])},[e("span",_e,l(String.fromCharCode(65+P))+".",1),e("span",he,l(a.option_text),1),e("div",ke,[a.is_correct?(d(),i("span",ye," Doğru Cevap ")):v("",!0),!a.is_correct&&(o.option_id===a.id||((S=o.option)==null?void 0:S.id)===a.id)?(d(),i("span",we," Sizin Cevabınız ")):v("",!0)])],2)}),128))]),(T=o.question)!=null&&T.explanation?(d(),i("div",Ce,[e("div",je,[t[11]||(t[11]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 flex-shrink-0 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[t[10]||(t[10]=e("p",{class:"text-sm font-medium text-blue-900 dark:text-blue-100"},"Açıklama:",-1)),e("p",Me,l(o.question.explanation),1)])])])):v("",!0)],2)}),128))])]),n(j)?(d(),i("div",$e,[t[16]||(t[16]=e("h3",{class:"mb-4 text-lg font-semibold text-foreground"},"Sonucunu Paylaş",-1)),e("div",Te,[e("div",Be,[t[13]||(t[13]=e("p",{class:"text-sm text-muted-foreground mb-2"},"Paylaşılabilir mesaj:",-1)),e("p",De,l(k.value),1)]),e("div",Se,[e("button",{onClick:A,class:"inline-flex h-10 items-center justify-center gap-2 rounded-md bg-primary px-4 text-sm font-medium text-primary-foreground hover:bg-primary/90"},[t[14]||(t[14]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)),c(" "+l(m.value),1)]),y(n(w),{href:`/tests/${(_=n(s).test)==null?void 0:_.slug}`,class:"inline-flex h-10 items-center justify-center rounded-md border border-input bg-background px-4 text-sm font-medium text-foreground hover:bg-accent hover:text-accent-foreground"},{default:h(()=>[...t[15]||(t[15]=[c(" Teste Geri Dön ",-1)])]),_:1},8,["href"])])])])):(d(),i("div",qe,[y(n(w),{href:`/tests/${(x=n(s).test)==null?void 0:x.slug}`,class:"inline-flex h-11 items-center justify-center rounded-md border border-input bg-background px-6 text-sm font-medium text-foreground hover:bg-accent hover:text-accent-foreground"},{default:h(()=>[...t[17]||(t[17]=[c(" Teste Geri Dön ",-1)])]),_:1},8,["href"]),y(n(w),{href:"/tests",class:"inline-flex h-11 items-center justify-center rounded-md bg-primary px-6 text-sm font-medium text-primary-foreground hover:bg-primary/90"},{default:h(()=>[...t[18]||(t[18]=[c(" Diğer Testler ",-1)])]),_:1})]))])]}),_:1}))}};export{Ne as default};
