import{Q as F,i as g,l as v,E,g as s,b as d,F as L,m as P,t as u,h as m,j,q as A,U,n as M,N as V,o as l,e as q}from"./app-DyaYed08.js";/* empty css            */const B={class:"flex min-h-screen flex-col items-center justify-center"},D={key:0,class:"w-full max-w-md rounded-2xl border border-gray-200 bg-white p-6 shadow-sm"},I=d("h2",{class:"mb-2 text-2xl font-semibold text-gray-900"},"Quiz Completed!",-1),K=d("p",{class:"mb-4 text-gray-600"},"You have finished the quiz. Here's how you did:",-1),R={class:"space-y-2 text-left text-sm text-gray-800"},H={key:0,class:"ml-2 text-xs text-gray-500"},O={key:1,class:"relative w-full max-w-md rounded-2xl border border-gray-200 bg-white p-6 shadow-sm"},Y={key:0,class:"absolute right-4 top-3 text-xs text-gray-400"},$={key:1,class:"mb-4 text-xl font-semibold text-gray-900"},G=["disabled"],ee={__name:"TranslateWord",props:{gameType:String,packSlug:String},setup(T){const h=T,a=F().props.languagePacks||[],f=g(()=>h.packSlug?a.find(e=>e.slug===h.packSlug):null),t=v([]),y=g(()=>Object.fromEntries(t.value.map(e=>[e.id,e]))),p=v(0),c=v(""),r=v(!1),w=v([]),x=v(!1);E(()=>{console.log("Pack slug (TranslateWord):",h.packSlug),console.log("All packs (TranslateWord):",a);const e=a.find(o=>o.slug===h.packSlug);console.log("Found pack (TranslateWord):",e),e&&e.words&&e.words.length?(console.log("Loading words from found pack, words count:",e.words.length),t.value=[...e.words].sort(()=>Math.random()-.5)):a.length>0&&a[0].words&&a[0].words.length?(console.log("Fallback to first pack, words count:",a[0].words.length),t.value=[...a[0].words].sort(()=>Math.random()-.5)):console.log("No words found in any pack")});const i=g(()=>t.value.length?t.value[p.value]:null),b=g(()=>{var e,o;return((o=(e=i.value)==null?void 0:e.meaning)==null?void 0:o.toLowerCase())===c.value.toLowerCase()}),k=()=>{var e;!c.value.trim()||r.value||(r.value=!0,w.value.push({word_id:(e=i.value)==null?void 0:e.id,correct:b.value}))},W=g(()=>i.value?b.value?"Correct!":`Wrong! The correct translation is: ${i.value.meaning}`:""),_=g(()=>t.value.length&&p.value===t.value.length-1),z=()=>{_.value?(x.value=!0,Q()):(p.value++,c.value="",r.value=!1)},N=()=>{f.value&&f.value.words?t.value=[...f.value.words].sort(()=>Math.random()-.5):a.length>0&&a[0].words?t.value=[...a[0].words].sort(()=>Math.random()-.5):t.value=[],p.value=0,c.value="",r.value=!1,w.value=[],x.value=!1},Q=()=>{if(!w.value.length)return;const e=w.value.map(o=>({word_id:o.word_id,review_count:1,incorrect_count:o.correct?0:1}));V.post("/update-words",{words:e},{preserveState:!0,onSuccess:()=>console.log("Words updated successfully"),onError:o=>console.error("Failed to update word stats",o)})};return(e,o)=>(l(),s("div",B,[x.value?(l(),s("div",D,[I,K,d("ul",R,[(l(!0),s(L,null,P(w.value,n=>{var S,C;return l(),s("li",{key:n.word_id,class:"flex justify-between rounded-md bg-gray-50 px-4 py-2"},[d("span",{class:M(n.correct?"text-green-600":"text-red-600")},u(((S=y.value[n.word_id])==null?void 0:S.word)||"Unknown"),3),d("span",null,[q(u(n.correct?"✓":"✗")+" ",1),n.correct?m("",!0):(l(),s("span",H," (Correct: "+u(((C=y.value[n.word_id])==null?void 0:C.meaning)||"Unknown")+") ",1))])])}),128))]),d("button",{onClick:N,class:"mt-6 w-full rounded-lg bg-black px-4 py-2 text-sm font-medium text-white transition hover:bg-gray-700"}," Restart Quiz ")])):(l(),s("div",O,[t.value.length?(l(),s("span",Y,u(p.value+1)+"/"+u(t.value.length),1)):m("",!0),i.value?(l(),s("h2",$,u(i.value.word),1)):m("",!0),j(d("input",{"onUpdate:modelValue":o[0]||(o[0]=n=>c.value=n),disabled:r.value,type:"text",placeholder:"Enter the translation",class:"w-full rounded-lg border border-gray-300 p-3 text-base text-gray-900 shadow-sm placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",onKeyup:U(k,["enter"])},null,40,G),[[A,c.value]]),r.value?(l(),s("p",{key:2,class:M(["mt-4 text-sm font-medium",b.value?"text-green-600":"text-red-600"])},u(W.value),3)):m("",!0),r.value?m("",!0):(l(),s("button",{key:3,onClick:k,class:"mt-6 w-full rounded-lg bg-black px-4 py-2 text-sm font-medium text-white shadow-md transition hover:bg-gray-700"}," Submit Answer ")),r.value?(l(),s("button",{key:4,onClick:z,class:"mt-4 w-full rounded-lg bg-black px-4 py-2 text-sm font-medium text-white shadow-md transition hover:bg-gray-700"},u(_.value?"Analyze":"Next"),1)):m("",!0)]))]))}};export{ee as default};
