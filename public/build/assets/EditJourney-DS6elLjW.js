import{T as h,e as _,j as D,w as g,a as t,b,u as o,i as y,f as c,l as V,c as i,h as d,k as p,v as x,o as l,t as a,D as v}from"./ssr-CVKOEYhR.js";import j from"./LayoutJourney-DxZGBMYP.js";import"./FlashMessage-DhvP2lcm.js";import"./CheckScreen-BYm6Ecw3.js";const B={class:"mx-auto max-w-2xl py-8"},C={class:"mb-8"},U={key:0,class:"mt-1 text-sm text-destructive"},T={key:0,class:"mt-1 text-sm text-destructive"},G={key:0,class:"mt-1 text-sm text-destructive"},M={key:0},$={class:"overflow-hidden rounded-lg border border-border"},z=["src","alt"],I={for:"image",class:"mb-2 block text-sm font-medium text-foreground"},N={class:"relative"},q={key:0,class:"mt-3 overflow-hidden rounded-lg border border-border"},E=["src"],F={key:1,class:"mt-1 text-sm text-destructive"},O={class:"flex gap-4"},P={class:"flex cursor-pointer items-center gap-2"},R={class:"flex cursor-pointer items-center gap-2"},S={class:"flex items-center gap-3 pt-4"},A=["disabled"],L={key:0,class:"h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},W={__name:"EditJourney",props:{entry:{type:Object,required:!0}},setup(n){const u=n,r=h({entry_date:(m=>m?new Date(m).toISOString().split("T")[0]:"")(u.entry.entry_date),title:u.entry.title,description:u.entry.description||"",image:null,status:u.entry.status,_method:"PUT"}),f=_(null),k=m=>{const e=m.target.files[0];e&&(r.image=e,f.value=URL.createObjectURL(e))},w=()=>{r.post(`/journey/${u.entry.id}`,{forceFormData:!0})};return(m,e)=>(l(),D(j,null,{screen:g(()=>[t("div",B,[t("div",C,[b(o(y),{href:`/journey/${n.entry.id}`,class:"mb-4 inline-flex items-center gap-2 text-sm text-muted-foreground transition-colors hover:text-foreground"},{default:g(()=>[...e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),c(" Geri ",-1)])]),_:1},8,["href"]),e[6]||(e[6]=t("h1",{class:"text-3xl font-bold tracking-tight text-foreground"},"Kaydı Düzenle",-1)),e[7]||(e[7]=t("p",{class:"mt-2 text-muted-foreground"},"Yolculuk kaydını güncelleyin.",-1))]),t("form",{onSubmit:V(w,["prevent"]),class:"space-y-6"},[t("div",null,[e[8]||(e[8]=t("label",{for:"entry_date",class:"mb-2 block text-sm font-medium text-foreground"},[c(" Tarih "),t("span",{class:"text-destructive"},"*")],-1)),p(t("input",{id:"entry_date","onUpdate:modelValue":e[0]||(e[0]=s=>o(r).entry_date=s),type:"date",class:"w-full rounded-lg border border-input bg-background px-4 py-2.5 text-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",required:""},null,512),[[x,o(r).entry_date]]),o(r).errors.entry_date?(l(),i("p",U,a(o(r).errors.entry_date),1)):d("",!0)]),t("div",null,[e[9]||(e[9]=t("label",{for:"title",class:"mb-2 block text-sm font-medium text-foreground"},[c(" Başlık "),t("span",{class:"text-destructive"},"*")],-1)),p(t("input",{id:"title","onUpdate:modelValue":e[1]||(e[1]=s=>o(r).title=s),type:"text",class:"w-full rounded-lg border border-input bg-background px-4 py-2.5 text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Bu günün başlığı...",required:""},null,512),[[x,o(r).title]]),o(r).errors.title?(l(),i("p",T,a(o(r).errors.title),1)):d("",!0)]),t("div",null,[e[10]||(e[10]=t("label",{for:"description",class:"mb-2 block text-sm font-medium text-foreground"}," Açıklama ",-1)),p(t("textarea",{id:"description","onUpdate:modelValue":e[2]||(e[2]=s=>o(r).description=s),rows:"6",class:"w-full rounded-lg border border-input bg-background px-4 py-2.5 text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Bu gün hakkında notlarınız..."},null,512),[[x,o(r).description]]),o(r).errors.description?(l(),i("p",G,a(o(r).errors.description),1)):d("",!0)]),n.entry.image&&!f.value?(l(),i("div",M,[e[11]||(e[11]=t("label",{class:"mb-2 block text-sm font-medium text-foreground"},"Mevcut Görsel",-1)),t("div",$,[t("img",{src:`/storage/${n.entry.image}`,alt:n.entry.title,class:"h-48 w-full object-cover"},null,8,z)])])):d("",!0),t("div",null,[t("label",I,a(n.entry.image?"Görseli Değiştir":"Görsel Ekle"),1),t("div",N,[t("input",{id:"image",type:"file",accept:"image/*",onChange:k,class:"w-full cursor-pointer rounded-lg border border-input bg-background px-4 py-2.5 text-foreground file:mr-4 file:rounded-md file:border-0 file:bg-primary file:px-4 file:py-1 file:text-sm file:font-medium file:text-primary-foreground hover:file:bg-primary/90"},null,32)]),f.value?(l(),i("div",q,[t("img",{src:f.value,alt:"Preview",class:"h-48 w-full object-cover"},null,8,E)])):d("",!0),o(r).errors.image?(l(),i("p",F,a(o(r).errors.image),1)):d("",!0)]),t("div",null,[e[14]||(e[14]=t("label",{class:"mb-2 block text-sm font-medium text-foreground"},"Durum",-1)),t("div",O,[t("label",P,[p(t("input",{type:"radio","onUpdate:modelValue":e[3]||(e[3]=s=>o(r).status=s),value:"published",class:"h-4 w-4 border-input text-primary focus:ring-primary"},null,512),[[v,o(r).status]]),e[12]||(e[12]=t("span",{class:"text-sm text-foreground"},"Yayınla",-1))]),t("label",R,[p(t("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=s=>o(r).status=s),value:"draft",class:"h-4 w-4 border-input text-primary focus:ring-primary"},null,512),[[v,o(r).status]]),e[13]||(e[13]=t("span",{class:"text-sm text-foreground"},"Taslak",-1))])])]),t("div",S,[t("button",{type:"submit",disabled:o(r).processing,class:"inline-flex items-center gap-2 rounded-lg bg-primary px-6 py-2.5 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90 disabled:cursor-not-allowed disabled:opacity-50"},[o(r).processing?(l(),i("svg",L,[...e[15]||(e[15]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):d("",!0),c(" "+a(o(r).processing?"Güncelleniyor...":"Güncelle"),1)],8,A),b(o(y),{href:`/journey/${n.entry.id}`,class:"inline-flex items-center gap-2 rounded-lg border border-border bg-card px-6 py-2.5 text-sm font-medium text-foreground transition-colors hover:bg-accent"},{default:g(()=>[...e[16]||(e[16]=[c(" İptal ",-1)])]),_:1},8,["href"])])],32)])]),_:1}))}};export{W as default};
