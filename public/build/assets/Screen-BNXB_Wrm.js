import{Q as ve,e as v,U as fe,p as V,m as he,D as B,A as ge,N as pe,y as ne,c as i,j as me,a as t,b as oe,f as re,w as se,h as p,n as L,o as l,F as b,t as S,g as N,u as le,i as we}from"./ssr-B6-2V9vM.js";import{_ as xe}from"./ExcalidrawComponent-6Mk9t-qW.js";import{_ as ke}from"./CheckScreen-Bm-pS_MC.js";import{_ as be}from"./app-jnrYMGwH.js";import{u as ie}from"./useGsapAnimation-tlMQfVaN.js";import{u as ye}from"./useProcessedQuillContent-CtAWFB6e.js";/* empty css            */import"./index-CH_iu5NA.js";const _e={key:0,class:"relative h-[calc(100vh-3rem)] w-full lg:h-[calc(100vh-5.5rem)]"},Ce={class:"bg-background transition-colors"},Me={class:"p-6 pt-12 sm:p-8 sm:pt-16"},Te={class:"mb-8"},Se={key:0,class:"space-y-3"},ze={class:"mb-4 text-3xl font-bold leading-tight text-foreground sm:text-4xl"},je={class:"mb-6 flex flex-wrap items-center gap-3 text-sm"},Le={class:"inline-flex items-center gap-1.5 text-muted-foreground"},Re={class:"font-medium"},Be={class:"flex flex-wrap items-center gap-x-2 gap-y-1"},He={class:"inline-flex items-center gap-1"},Ae={key:0,class:"text-muted-foreground/50"},Ee={key:0,class:"text-muted-foreground/40"},De=["title"],Ie={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-3 w-3"},Oe={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"},Ve={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},Ne={class:"hidden sm:inline"},$e={key:0,class:"space-y-3"},qe={key:1},Pe={class:"content-container"},Ue=["innerHTML"],Fe={key:1,class:"content-placeholder"},Ke={key:2,class:"mt-10 flex items-center gap-2 border-t border-border/60 pt-6"},We={class:"inline-flex items-center gap-2 rounded-md bg-muted/50 px-3 py-1.5 text-sm"},Ge={class:"font-medium text-foreground"},Qe={class:"flex h-full flex-col"},Ye={key:0,class:"py-8 text-center text-sm text-muted-foreground"},Je={key:1,class:"space-y-0.5"},Xe=["onClick"],Ze={class:"rounded-lg border border-border bg-popover shadow-lg"},et={key:0,class:"py-4 text-center text-xs text-muted-foreground"},tt={key:1,class:"space-y-0.5"},nt=["onClick"],ot=Object.assign({name:"WriteByCategoryScreen"},{__name:"Screen",setup(rt){const{props:z}=ve();v(z.category||{});const a=v(z.write||{}),f=v(null),T=v(null),u=v(!1),m=v(!1),H=fe("categories",null),ae=V(()=>H&&Array.isArray(H)&&H.length>0?H:z.categories&&Array.isArray(z.categories)&&z.categories.length>0?z.categories:[]),$=V(()=>{if(!a.value)return[];const o=ae.value;if(o.length===0)return[];const e=[],r=new Set;if(a.value.categories&&Array.isArray(a.value.categories)&&a.value.categories.length>0&&a.value.categories.forEach(n=>{if(n&&n.id&&!r.has(n.id)){r.add(n.id);const s=q(n.id,o);s.length>0&&e.push(s)}}),a.value.category&&a.value.category.id&&!r.has(a.value.category.id)){r.add(a.value.category.id);const n=q(a.value.category.id,o);n.length>0&&e.push(n)}if(a.value.category_id&&!r.has(a.value.category_id)){r.add(a.value.category_id);const n=q(a.value.category_id,o);n.length>0&&e.push(n)}return e}),q=(o,e)=>{if(!o||!e||e.length===0)return[];const r=e.find(d=>d&&d.id===o);if(!r)return[];const n=[r];let s=r;for(;s&&s.parent_id;){const d=e.find(c=>c&&c.id===s.parent_id);if(d)n.unshift(d),s=d;else break}return n},de=o=>route("categories.show",{category:o.slug}),h=v(!1),w=v([]),y=v(!1),_=v(null),A=v(!1),W=v(null),G=v(null),P=v(new Map),Q=()=>{const o=window.innerWidth>=1280;A.value=o,o&&y.value&&w.value.length>0?h.value=!0:o||(h.value=!1)},x=V(()=>!a.value.title),U=ye(f,V(()=>m.value?a.value.content:"")),ue=o=>{if(!o)return"";const e=new Date(o),r=["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],n=e.getDate(),s=r[e.getMonth()],d=e.getFullYear();return`${n} ${s} ${d}`},ce=o=>new Intl.NumberFormat("tr-TR").format(o);let C=null,M=null,E=null,D=null,I=null,j=!1;const F=()=>{if(!f.value)return;C&&(C.disconnect(),C=null),M&&(window.removeEventListener("scroll",M),M=null);const o=f.value.querySelectorAll(".heading-wrapper h1, .heading-wrapper h2, .heading-wrapper h3, .heading-wrapper h4, .heading-wrapper h5, .heading-wrapper h6, h1, h2, h3, h4, h5, h6");if(o.length===0)return;const e=80,r=()=>{if(j)return;let n=null,s=1/0;o.forEach(d=>{if(!d.id)return;const c=d.getBoundingClientRect(),g=c.top-e;c.top<=e+50&&c.bottom>0&&g<=50&&Math.abs(g)<s&&(s=Math.abs(g),n=d.id)}),n||o.forEach(d=>{if(!d.id)return;const c=d.getBoundingClientRect();if(c.top<e+200&&c.bottom>0){const g=Math.abs(c.top-e);g<s&&(s=g,n=d.id)}}),n&&_.value!==n&&(_.value=n)};C=new IntersectionObserver(n=>{j||r()},{root:null,rootMargin:`-${e+10}px 0px -60% 0px`,threshold:[0,.1,.25,.5,.75,1]}),o.forEach(n=>{n.id&&C.observe(n)}),M=()=>{j||r()},window.addEventListener("scroll",M,{passive:!0}),r()};he(()=>{Q(),D=()=>{Q()},window.addEventListener("resize",D),I=r=>{if(u.value&&T.value&&T.value.hasUnsavedChanges)return r.preventDefault(),r.returnValue="Kaydedilmemiş değişiklikler var. Sayfadan ayrılmak istediğinizden emin misiniz?",r.returnValue},window.addEventListener("beforeunload",I),m.value=!1;const o=document.querySelector(".content-placeholder");o?(E=new IntersectionObserver(r=>{r.forEach(n=>{n.isIntersecting&&!m.value&&(m.value=!0,B(()=>{ie(f,{duration:.8}),setTimeout(()=>{K(),w.value.length>0&&(F(),A.value&&(h.value=!0))},100)}))})},{threshold:.1,rootMargin:"50px"}),E.observe(o)):(m.value=!0,B(()=>{ie(f,{duration:.8}),setTimeout(()=>{K(),w.value.length>0&&(F(),A.value&&(h.value=!0))},100)}));const e=new URLSearchParams(window.location.search);if(u.value=e.has("draw"),a.value.content&&a.value.content.includes("<img")){const r=/<img[^>]+src="([^"]+)"/g;let n;for(;(n=r.exec(a.value.content))!==null;){const s=new Image;s.src=n[1]}}}),ge(()=>{E&&E.disconnect(),C&&(C.disconnect(),C=null),M&&(window.removeEventListener("scroll",M),M=null),D&&window.removeEventListener("resize",D),I&&window.removeEventListener("beforeunload",I)}),pe.on("before",o=>{if(u.value&&T.value&&T.value.hasUnsavedChanges&&!confirm("Kaydedilmemiş değişiklikler var. Sayfadan ayrılmak istediğinizden emin misiniz?")){o.preventDefault();return}const e=document.querySelector(".write-list-container");e&&localStorage.setItem("writeListScrollPosition",e.scrollTop.toString())});const K=()=>{if(!f.value)return;const o=f.value.querySelectorAll(".heading-wrapper h1, .heading-wrapper h2, .heading-wrapper h3, .heading-wrapper h4, .heading-wrapper h5, .heading-wrapper h6, h1, h2, h3, h4, h5, h6"),e=[],r=new Set;o.forEach(n=>{let s=n.id;if(!s){const g=n.closest(".heading-wrapper");if(g){const k=g.querySelector("a.heading-anchor");k&&k.href&&(s=k.href.split("#")[1])}}if(!s){s=n.textContent.trim().toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").substring(0,50)||`heading-${e.length}`;let k=s,O=1;for(;r.has(k);)k=`${s}-${O}`,O++;s=k,n.id||(n.id=s)}if(r.has(s))return;r.add(s);const d=parseInt(n.tagName.charAt(1)),c=n.textContent.trim();c&&e.push({id:s,text:c,level:d})}),w.value=e,y.value=e.length>0},Y=()=>{u.value&&T.value&&T.value.hasUnsavedChanges&&!confirm("Kaydedilmemiş değişiklikler var. Metne dönmek istediğinizden emin misiniz?")||(u.value=!u.value,!u.value&&!m.value&&(m.value=!0))},J=o=>{if(!o)return;let e=document.getElementById(o);if(!e&&f.value&&(e=f.value.querySelector(`#${o}`)),!e&&f.value){const r=f.value.querySelectorAll(".heading-wrapper h1, .heading-wrapper h2, .heading-wrapper h3, .heading-wrapper h4, .heading-wrapper h5, .heading-wrapper h6, h1, h2, h3, h4, h5, h6");for(const n of r)if(n.id===o){e=n;break}}e&&(j=!0,_.value=o,B(()=>{te()}),e.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{j=!1},600),window.innerWidth<1280&&(h.value=!1))},X=o=>{switch(o){case 1:return"pl-0";case 2:return"pl-4";case 3:return"pl-6";case 4:return"pl-8";case 5:return"pl-10";case 6:return"pl-12";default:return"pl-0"}},Z=o=>"",R=()=>{h.value=!h.value},ee=(o,e)=>{o?P.value.set(e,o):P.value.delete(e)},te=()=>{if(!_.value)return;const o=P.value.get(_.value);if(!o)return;const e=window.innerWidth>=1280?G.value:W.value;if(!e)return;const r=e.getBoundingClientRect(),n=o.getBoundingClientRect(),s=n.top<r.top,d=n.bottom>r.bottom;if(s||d){e.scrollTop;const c=o.offsetTop,g=e.clientHeight,k=o.offsetHeight,O=c-g/2+k/2;e.scrollTo({top:O,behavior:"smooth"})}};return ne(U,()=>{m.value&&U.value&&B(()=>{K(),w.value.length>0&&(F(),A.value&&(h.value=!0))})},{flush:"post"}),ne(_,(o,e)=>{o&&o!==e&&!j&&B(()=>{te()})}),(o,e)=>u.value?(l(),i("div",_e,[t("div",{class:"absolute left-4 top-[53px] z-10 lg:top-4"},[t("button",{onClick:Y,class:"flex items-center gap-2 rounded-lg border border-border bg-card px-3 py-2 text-sm text-foreground shadow-lg transition-all hover:bg-accent"},[...e[0]||(e[0]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})],-1),re(" Metne Dön ",-1)])])]),oe(xe,{ref_key:"excalidrawRef",ref:T,write:a.value},null,8,["write"])])):(l(),me(ke,{key:1},{default:se(()=>[t("div",{class:L(["mx-auto max-w-4xl transition-all duration-300",{"xl:-translate-x-[100px]":!x.value&&y.value&&h.value&&!u.value}])},[t("div",Ce,[t("div",Me,[t("div",Te,[x.value?(l(),i("div",Se,[...e[1]||(e[1]=[t("div",{class:"skeleton h-8 w-3/4 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-24 rounded-md"},null,-1)])])):(l(),i(b,{key:1},[t("h1",ze,S(a.value.title),1),t("div",je,[t("span",Le,[e[2]||(e[2]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t("span",Re,S(ue(a.value.created_at)),1)]),$.value.length>0?(l(),i(b,{key:0},[e[3]||(e[3]=t("span",{class:"text-muted-foreground/40"},"•",-1)),t("div",Be,[(l(!0),i(b,null,N($.value,(r,n)=>(l(),i(b,{key:n},[t("div",He,[(l(!0),i(b,null,N(r,(s,d)=>(l(),i(b,{key:s.id},[oe(le(we),{href:de(s),class:"font-semibold text-primary transition-colors hover:underline"},{default:se(()=>[re(S(s.name),1)]),_:2},1032,["href"]),d<r.length-1?(l(),i("span",Ae,"/")):p("",!0)],64))),128))]),n<$.value.length-1?(l(),i("span",Ee,",")):p("",!0)],64))),128))])],64)):p("",!0),a.value.hasDraw||a.value.writeDraws&&a.value.writeDraws.length>0?(l(),i(b,{key:1},[e[4]||(e[4]=t("span",{class:"text-muted-foreground/40"},"•",-1)),t("button",{onClick:Y,class:L(["inline-flex h-6 items-center justify-center gap-1 rounded-md border border-input bg-background px-2 text-xs font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",u.value?"bg-accent text-accent-foreground":""]),title:u.value?"Metne Dön":"Çizime Git"},[(l(),i("svg",Ie,[u.value?(l(),i("path",Oe)):(l(),i("path",Ve))])),t("span",Ne,S(u.value?"Metne Dön":"Çizime Git"),1)],10,De)],64)):p("",!0)])],64))]),x.value?(l(),i("div",$e,[...e[5]||(e[5]=[t("div",{class:"skeleton h-4 w-full rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-5/6 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-4/6 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-full rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-3/4 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-5/6 rounded-md"},null,-1),t("div",{class:"skeleton h-32 w-full rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-2/3 rounded-md"},null,-1),t("div",{class:"skeleton h-4 w-full rounded-md"},null,-1)])])):(l(),i("div",qe,[t("div",Pe,[m.value?(l(),i("div",{key:0,class:"article-content ql-editor",ref_key:"contentRef",ref:f,innerHTML:le(U)},null,8,Ue)):(l(),i("div",Fe,[...e[6]||(e[6]=[t("div",{class:"space-y-3"},[t("div",{class:"skeleton h-4 w-full rounded-md"}),t("div",{class:"skeleton h-4 w-5/6 rounded-md"}),t("div",{class:"skeleton h-4 w-4/6 rounded-md"}),t("div",{class:"skeleton h-4 w-full rounded-md"}),t("div",{class:"skeleton h-4 w-3/4 rounded-md"})],-1)])]))])])),x.value?p("",!0):(l(),i("div",Ke,[t("div",We,[e[7]||(e[7]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-muted-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),t("span",Ge,S(ce(a.value.views_count)),1),e[8]||(e[8]=t("span",{class:"text-muted-foreground"},"görüntülenme",-1))])]))])])],2),!x.value&&y.value&&!u.value?(l(),i("button",{key:0,onClick:R,class:"fixed right-4 top-1/2 z-50 flex h-10 w-10 -translate-y-1/2 items-center justify-center rounded-full bg-primary text-primary-foreground shadow-lg transition-colors hover:bg-primary/90 xl:hidden"},[...e[9]||(e[9]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-5 w-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1)])])):p("",!0),!x.value&&y.value&&!u.value?(l(),i("div",{key:1,class:L(["fixed right-0 top-12 z-40 h-[calc(100vh-3rem)] w-80 transform border-l border-border bg-popover shadow-2xl transition-transform duration-300 lg:h-[calc(100vh-5.5rem)] xl:hidden",{"translate-x-full":!h.value}])},[t("div",Qe,[t("div",{class:"flex items-center justify-between border-b border-border p-4"},[e[11]||(e[11]=t("h3",{class:"text-lg font-semibold text-foreground"},"İçindekiler",-1)),t("button",{onClick:R,class:"inline-flex h-8 w-8 items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"},[...e[10]||(e[10]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",{ref_key:"mobileTocScrollRef",ref:W,class:"flex-1 overflow-y-auto p-4"},[w.value.length===0?(l(),i("div",Ye," İçindekiler bulunamadı ")):(l(),i("nav",Je,[(l(!0),i(b,null,N(w.value,(r,n)=>(l(),i("a",{key:n,ref_for:!0,ref:s=>ee(s,r.id),onClick:s=>{s.preventDefault(),J(r.id)},class:L(["block cursor-pointer rounded-md px-2 py-1.5 text-sm transition-colors",[X(r.level),Z(r.id),_.value===r.id?"bg-accent font-medium text-accent-foreground":"text-muted-foreground hover:bg-accent/50 hover:text-foreground"]])},S(r.text),11,Xe))),128))]))],512)])],2)):p("",!0),!x.value&&y.value&&!u.value?(l(),i("button",{key:2,onClick:R,class:"fixed right-4 top-28 z-50 hidden h-10 w-10 items-center justify-center rounded-full bg-primary text-primary-foreground shadow-lg transition-colors hover:bg-primary/90 xl:flex"},[...e[12]||(e[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-5 w-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1)])])):p("",!0),!x.value&&y.value&&!u.value?(l(),i("div",{key:3,class:L(["fixed right-4 top-28 z-30 hidden w-64 transition-all duration-300 ease-in-out xl:block",h.value?"translate-x-0 opacity-100":"pointer-events-none translate-x-full opacity-0"])},[t("div",Ze,[t("div",{class:"flex items-center justify-between border-b border-border p-3"},[e[14]||(e[14]=t("h3",{class:"text-sm font-semibold text-foreground"},"İçindekiler",-1)),t("button",{onClick:R,class:"inline-flex h-6 w-6 items-center justify-center rounded-md text-xs font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"},[...e[13]||(e[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",{ref_key:"desktopTocScrollRef",ref:G,class:"overflow-y-auto p-3",style:{"max-height":"calc(100vh - 220px)"}},[w.value.length===0?(l(),i("div",et," İçindekiler bulunamadı ")):(l(),i("nav",tt,[(l(!0),i(b,null,N(w.value,(r,n)=>(l(),i("a",{key:n,ref_for:!0,ref:s=>ee(s,r.id),onClick:s=>{s.preventDefault(),J(r.id)},class:L(["block cursor-pointer rounded-md px-2 py-1 text-xs transition-colors",[X(r.level),Z(r.id),_.value===r.id?"bg-accent font-medium text-accent-foreground":"text-muted-foreground hover:bg-accent/50 hover:text-foreground"]])},S(r.text),11,nt))),128))]))],512)])],2)):p("",!0),!x.value&&y.value&&h.value&&!u.value?(l(),i("div",{key:4,onClick:R,class:"fixed inset-0 z-30 bg-black/20 xl:hidden"})):p("",!0)]),_:1}))}}),ft=be(ot,[["__scopeId","data-v-99378e8a"]]);export{ft as default};
