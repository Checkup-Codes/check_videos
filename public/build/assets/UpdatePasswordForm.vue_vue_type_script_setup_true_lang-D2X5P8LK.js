import{d as S,e as a,T as V,m as M,A as I,y as P,c as d,a as t,l as R,k as w,h as p,v as m,u as o,n as v,t as f,b as T,w as j,o as l,E as B,f as F,D as C}from"./ssr-C3nf8soi.js";const U={class:"space-y-4"},N={class:"border-t border-border pt-6"},Y={class:"grid grid-cols-1 gap-4"},D={key:0,class:"mt-1 text-xs text-destructive"},K={key:0,class:"mt-1 text-xs text-destructive"},L={key:0,class:"mt-1 text-xs text-destructive"},O={class:"flex items-center justify-end gap-2 pt-2"},A={key:0,class:"text-sm text-muted-foreground"},H=["disabled"],q={key:0,class:"h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},G={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},W=S({__name:"UpdatePasswordForm",setup(J){const b=a(null),g=a(null),E=a(null),r=V({current_password:"",password:"",password_confirmation:""}),_=a(null),x=a(null),y=a(null),s=a({current_password:"",password:"",password_confirmation:""}),z=()=>{Object.keys(s.value).forEach(e=>{s.value[e]=""});let i=!1;return(!r.current_password||r.current_password.trim()==="")&&(s.value.current_password="Mevcut şifre zorunludur.",i=!0),!r.password||r.password.trim()===""?(s.value.password="Yeni şifre zorunludur.",i=!0):r.password.length<8&&(s.value.password="Şifre en az 8 karakter olmalıdır.",i=!0),!r.password_confirmation||r.password_confirmation.trim()===""?(s.value.password_confirmation="Şifre onayı zorunludur.",i=!0):r.password!==r.password_confirmation&&(s.value.password_confirmation="Şifreler eşleşmiyor.",i=!0),i&&k(),i},k=()=>{C(()=>{const i=[{ref:_,error:s.value.current_password},{ref:x,error:s.value.password},{ref:y,error:s.value.password_confirmation}];for(const e of i)if(e.error&&e.ref.value){e.ref.value.scrollIntoView({behavior:"smooth",block:"center"}),C(()=>{var u;const n=(u=e.ref.value)==null?void 0:u.querySelector("input");n&&n.focus()});break}})},h=()=>{z()||r.put(route("password.update"),{preserveScroll:!0,onSuccess:()=>{r.reset()},onError:e=>{var n,u;Object.assign(s.value,e),k(),r.errors.password&&(r.reset("password","password_confirmation"),(n=b.value)==null||n.focus()),r.errors.current_password&&(r.reset("current_password"),(u=g.value)==null||u.focus())}})};let c=null;return M(()=>{c=()=>{h()},window.addEventListener("sidebarFormSubmit",c)}),I(()=>{c&&window.removeEventListener("sidebarFormSubmit",c)}),P(()=>r.processing,i=>{window.dispatchEvent(new CustomEvent("formProcessingState",{detail:{processing:i}}))}),(i,e)=>(l(),d("div",U,[t("div",N,[e[8]||(e[8]=t("h2",{class:"mb-4 text-sm font-semibold text-foreground"},"Şifre Güncelle",-1)),t("form",{onSubmit:R(h,["prevent"]),class:"space-y-4"},[t("div",Y,[t("div",{ref_key:"currentPasswordRef",ref:_},[e[3]||(e[3]=t("label",{for:"current_password",class:"mb-1 block text-sm font-medium text-foreground"},"Mevcut Şifre",-1)),w(t("input",{id:"current_password",ref_key:"currentPasswordInput",ref:g,"onUpdate:modelValue":e[0]||(e[0]=n=>o(r).current_password=n),type:"password",autocomplete:"current-password",placeholder:"Mevcut şifrenizi girin",class:v(["flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":s.value.current_password||o(r).errors.current_password}])},null,2),[[m,o(r).current_password]]),s.value.current_password||o(r).errors.current_password?(l(),d("p",D,f(s.value.current_password||o(r).errors.current_password),1)):p("",!0)],512),t("div",{ref_key:"passwordRef",ref:x},[e[4]||(e[4]=t("label",{for:"password",class:"mb-1 block text-sm font-medium text-foreground"},"Yeni Şifre",-1)),w(t("input",{id:"password",ref_key:"passwordInput",ref:b,"onUpdate:modelValue":e[1]||(e[1]=n=>o(r).password=n),type:"password",autocomplete:"new-password",placeholder:"Yeni şifrenizi girin",class:v(["flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":s.value.password||o(r).errors.password}])},null,2),[[m,o(r).password]]),s.value.password||o(r).errors.password?(l(),d("p",K,f(s.value.password||o(r).errors.password),1)):p("",!0)],512),t("div",{ref_key:"passwordConfirmationRef",ref:y},[e[5]||(e[5]=t("label",{for:"password_confirmation",class:"mb-1 block text-sm font-medium text-foreground"},"Şifre Onayı",-1)),w(t("input",{id:"password_confirmation",ref_key:"passwordConfirmationInput",ref:E,"onUpdate:modelValue":e[2]||(e[2]=n=>o(r).password_confirmation=n),type:"password",autocomplete:"new-password",placeholder:"Yeni şifrenizi tekrar girin",class:v(["flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":s.value.password_confirmation||o(r).errors.password_confirmation}])},null,2),[[m,o(r).password_confirmation]]),s.value.password_confirmation||o(r).errors.password_confirmation?(l(),d("p",L,f(s.value.password_confirmation||o(r).errors.password_confirmation),1)):p("",!0)],512)]),t("div",O,[T(B,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:j(()=>[o(r).recentlySuccessful?(l(),d("p",A,"Kaydedildi.")):p("",!0)]),_:1}),t("button",{type:"submit",disabled:o(r).processing,class:"inline-flex h-9 items-center justify-center gap-1.5 rounded-md bg-primary px-4 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"},[o(r).processing?(l(),d("svg",q,[...e[6]||(e[6]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(l(),d("svg",G,[...e[7]||(e[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"},null,-1)])])),F(" "+f(o(r).processing?"Kaydediliyor...":"Kaydet"),1)],8,H)])],32)])]))}});export{W as _};
