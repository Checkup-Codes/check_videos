import{Q as O,l as p,T as q,L as D,x as G,A as U,g as i,o as d,b as e,p as V,e as W,h as u,n as _,u as s,t as c,j as I,D as F,F as P,m as Q,v as R,s as $,N as J}from"./app-CAgCsGWV.js";import{Q as X}from"./quill.snow-Gjg-Daks.js";import"./lodash-C0issEgw.js";const Z={class:"card"},ee={class:"card-body p-6"},te=V('<div class="card-title flex items-center justify-between"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg><h2 class="text-gray-800 dark:text-white">Yeni Yazı Oluştur</h2></div></div>',1),se={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},le={class:"md:col-span-2"},ae={class:"form-control w-full"},oe=e("label",{class:"label"},[e("span",{class:"label-text"},"Başlık")],-1),re={class:"relative"},ne=["value"],ie={key:0,class:"label"},de={class:"label-text-alt text-error"},ce={class:"form-control w-full"},ue=e("label",{class:"label"},[e("span",{class:"label-text"},"Slug")],-1),_e={class:"relative"},pe=["value"],ve={key:0,class:"label"},me={class:"label-text-alt text-error"},ge={class:"form-control w-full"},be=e("label",{class:"label"},[e("span",{class:"label-text"},"Yayınlama Tarihi")],-1),he={class:"relative"},ye=["value"],fe={key:0,class:"label"},xe={class:"label-text-alt text-error"},ke={class:"md:col-span-2"},we={class:"form-control w-full"},ze=e("label",{class:"label"},[e("span",{class:"label-text"},"Özet")],-1),Ie={class:"relative"},Te=["value"],Ee={key:0,class:"label"},Me={class:"label-text-alt text-error"},Be={class:"md:col-span-2"},Le={class:"form-control w-full"},Ce=e("label",{class:"label"},[e("span",{class:"label-text"},"İçerik")],-1),De={class:"relative"},Fe={key:0,class:"upload-loading-overlay bg-base-100/50 absolute inset-0 z-20 flex items-center justify-center"},je=e("div",{class:"flex flex-col items-center gap-2"},[e("span",{class:"loading loading-spinner loading-lg text-primary"}),e("span",{class:"text-sm"},"Resim yükleniyor...")],-1),Se=[je],He={key:0,class:"label"},Ae={class:"label-text-alt text-error"},Ne={key:1,class:"toast toast-end z-50"},Ye=e("label",{class:"label"},[e("span",{class:"label-text"},"Durumu")],-1),Ke=e("option",{value:"draft"},"Şablon",-1),Oe=e("option",{value:"published"},"Yayında",-1),qe=e("option",{value:"private"},"Gizli",-1),Ge=[Ke,Oe,qe],Ue={key:0,class:"label"},Ve={class:"label-text-alt text-error"},We=e("label",{class:"label"},[e("span",{class:"label-text"},"Kategori")],-1),Pe=e("option",{value:"",disabled:""},"Kategori seç",-1),Qe=["value"],Re={key:0,class:"label"},$e={class:"label-text-alt text-error"},Je={class:"form-control w-full"},Xe=e("label",{class:"label"},[e("span",{class:"label-text"},"Kapak Resmi URL")],-1),Ze={class:"relative"},et=["value"],tt={key:0,class:"label"},st={class:"label-text-alt text-error"},lt={class:"form-control w-full"},at=e("label",{class:"label"},[e("span",{class:"label-text"},"Etiketler")],-1),ot={class:"relative"},rt=["value"],nt={key:0,class:"label"},it={class:"label-text-alt text-error"},dt={class:"form-control w-full"},ct=e("label",{class:"label"},[e("span",{class:"label-text"},"SEO Anahtar Kelimeleri")],-1),ut={class:"relative"},_t=["value"],pt={key:0,class:"label"},vt={class:"label-text-alt text-error"},mt={class:"form-control w-full"},gt=e("label",{class:"label"},[e("span",{class:"label-text"},"SEO Meta Açıklaması")],-1),bt={class:"relative"},ht=["value"],yt={class:"mt-1 text-xs text-gray-500"},ft={key:0,class:"label"},xt={class:"label-text-alt text-error"},kt=e("div",{class:"mt-1 text-xs text-gray-500"},[e("span",null,"İpucu: Bu açıklama arama sonuçlarında gösterilir. Boş bırakırsanız, özet kısmı kullanılacaktır.")],-1),wt={class:"form-control w-full"},zt=e("label",{class:"label"},[e("span",{class:"label-text"},"Görüntülenme Sayısı")],-1),It={class:"relative"},Tt=["value"],Et={class:"flex items-center space-x-2"},Mt={class:"label cursor-pointer justify-start gap-2"},Bt=e("span",{class:"label-text"},"Çizim İçerir",-1),Lt=e("div",{class:"divider"},null,-1),Ct={class:"flex justify-end space-x-3"},Dt=["disabled"],At=Object.assign({name:"WriteCreateForm"},{__name:"WriteCreateForm",setup(Ft){const{props:j}=O(),S=p(j.categories),t=q({title:"",slug:"",content:"",published_at:"",summary:"",status:"draft",category_id:"",cover_image:"",seo_keywords:"",meta_description:"",tags:"",views_count:0,hasDraw:!1}),l=p({title:"",slug:"",content:"",published_at:"",summary:"",status:"",category_id:"",cover_image:"",seo_keywords:"",meta_description:"",tags:""}),H=()=>{l.value.title=t.title?"":"Başlık zorunludur.",l.value.slug=t.slug?"":"Slug zorunludur.",l.value.content=t.content?"":"İçerik zorunludur.",l.value.published_at=t.published_at?"":"Yayınlama tarihi zorunludur.",l.value.summary=t.summary?"":"Özet zorunludur.",l.value.category_id=t.category_id?"":"Kategori seçilmelidir."},A=()=>{H(),Object.values(l.value).some(r=>r!=="")||t.post(route("writes.store"),{onSuccess:()=>{J.visit(route("dashboard"))},onError:r=>{console.error("Form submission errors:",r)}})};D(()=>t.title,r=>{(!t.slug||t.slug==="")&&(t.slug=r.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim())});const m=p(null);let n,T=!1;const f=p(!1),N=p(""),x=p(!1),E=p(""),M=p("alert-info"),B=["#570DF8","#F000B8","#37CDBE","#3ABFF8","#36D399","#FBBD23","#F87272","#1f2937","#2A303C","#ffffff","#000000"],b=(r,a="alert-info")=>{E.value=r,M.value=a,x.value=!0,setTimeout(()=>{x.value=!1},3e3)},Y=()=>{const r=document.createElement("input");r.setAttribute("type","file"),r.setAttribute("accept","image/*"),r.click(),r.onchange=async()=>{var o,L;const a=r.files[0];if(!a)return;if(!["image/jpeg","image/png","image/gif","image/jpg"].includes(a.type)){b("Only JPEG, PNG or GIF formats are supported.","alert-error");return}if(a.size>10*1024*1024){b("Image size must be less than 10MB.","alert-error");return}f.value=!0,N.value="";try{const g=n.getSelection(),z="img-loading-"+Date.now(),K=`
        <div id="${z}" class="skeleton-placeholder w-full my-4">
          <div class="skeleton h-32 w-full rounded-lg"></div>
          <div class="flex justify-center mt-2">
            <span class="loading loading-dots loading-md"></span>
          </div>
        </div>
      `;n.clipboard.dangerouslyPasteHTML(g.index,K);const C=new FormData;C.append("image",a);const h=await $.post("/image-upload",C,{headers:{"Content-Type":"multipart/form-data"}});if(h.data.success&&h.data.url){const v=document.getElementById(z);if(v){const y=n.getIndex(n.scroll.descendant(Node,v)[0][0]);n.deleteText(y,v.outerHTML.length),n.insertEmbed(y,"image",h.data.url)}else n.insertEmbed(g.index,"image",h.data.url);b("Image uploaded successfully","alert-success")}else{const v=document.getElementById(z);if(v){const y=n.getIndex(n.scroll.descendant(Node,v)[0][0]);n.deleteText(y,v.outerHTML.length)}console.error("Image upload failed"),b("Error uploading image.","alert-error")}}catch(g){console.error("Image upload error:",g),b("Error uploading image: "+(((L=(o=g.response)==null?void 0:o.data)==null?void 0:L.message)||g.message),"alert-error")}finally{f.value=!1}}};G(()=>{n=new X(m.value,{theme:"snow",modules:{toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{color:B},{background:B}],[{font:[]}],[{align:[]}],["link","image"],["clean"]],handlers:{image:Y}}},placeholder:"Write content here...",bounds:m.value,maxLength:1/0}),n.on("text-change",()=>{try{const r=n.root.innerHTML;t.content=r}catch(r){console.error("Content update error:",r)}}),setTimeout(()=>{if(t.content&&!T)try{n.root.innerHTML=t.content,T=!0}catch(r){console.error("Initial content load error:",r)}},100),m.value.style.height="400px",m.value&&m.value.classList.add("daisy-quill-editor")});let k=null;return D(()=>t.content,r=>{k&&clearTimeout(k),k=setTimeout(()=>{if(n&&r!==n.root.innerHTML)try{n.root.innerHTML=r||""}catch(a){console.error("Content update error in watcher:",a)}},300)}),U(()=>{n&&(n=null)}),(r,a)=>{var w;return d(),i("div",Z,[e("div",ee,[te,e("form",{onSubmit:W(A,["prevent"]),class:"space-y-6"},[e("div",se,[e("div",le,[e("div",ae,[oe,e("div",re,[e("input",{type:"text",value:s(t).title,onInput:a[0]||(a[0]=o=>s(t).title=o.target.value),placeholder:"Yazının başlığını girin",class:_(["input-bordered input w-full",{"input-error":l.value.title||s(t).errors.title}])},null,42,ne)]),l.value.title||s(t).errors.title?(d(),i("label",ie,[e("span",de,c(l.value.title||s(t).errors.title),1)])):u("",!0)])]),e("div",null,[e("div",ce,[ue,e("div",_e,[e("input",{type:"text",value:s(t).slug,onInput:a[1]||(a[1]=o=>s(t).slug=o.target.value),placeholder:"örnek-yazı-slug",class:_(["input-bordered input w-full",{"input-error":l.value.slug||s(t).errors.slug}])},null,42,pe)]),l.value.slug||s(t).errors.slug?(d(),i("label",ve,[e("span",me,c(l.value.slug||s(t).errors.slug),1)])):u("",!0)])]),e("div",null,[e("div",ge,[be,e("div",he,[e("input",{type:"datetime-local",value:s(t).published_at,onInput:a[2]||(a[2]=o=>s(t).published_at=o.target.value),class:_(["input-bordered input w-full",{"input-error":l.value.published_at||s(t).errors.published_at}])},null,42,ye)]),l.value.published_at||s(t).errors.published_at?(d(),i("label",fe,[e("span",xe,c(l.value.published_at||s(t).errors.published_at),1)])):u("",!0)])]),e("div",ke,[e("div",we,[ze,e("div",Ie,[e("textarea",{value:s(t).summary,onInput:a[3]||(a[3]=o=>s(t).summary=o.target.value),placeholder:"Yazının kısa özeti",rows:"3",class:_(["textarea-bordered textarea w-full",{"textarea-error":l.value.summary||s(t).errors.summary}])},null,42,Te)]),l.value.summary||s(t).errors.summary?(d(),i("label",Ee,[e("span",Me,c(l.value.summary||s(t).errors.summary),1)])):u("",!0)])]),e("div",Be,[e("div",Le,[Ce,e("div",De,[e("div",{ref_key:"quillEditor",ref:m,class:_(["min-h-[300px] rounded border border-base-300 bg-base-100 p-3",{"border-error":l.value.content||s(t).errors.content}]),style:{height:"400px"}},null,2),f.value?(d(),i("div",Fe,Se)):u("",!0)]),l.value.content||s(t).errors.content?(d(),i("label",He,[e("span",Ae,c(l.value.content||s(t).errors.content),1)])):u("",!0),x.value?(d(),i("div",Ne,[e("div",{class:_(`alert ${M.value}`)},[e("span",null,c(E.value),1)],2)])):u("",!0)])]),e("div",null,[Ye,I(e("select",{"onUpdate:modelValue":a[4]||(a[4]=o=>s(t).status=o),class:_(["select-bordered select w-full bg-base-100 text-neutral-content",{"select-error":l.value.status||s(t).errors.status}])},Ge,2),[[F,s(t).status]]),l.value.status||s(t).errors.status?(d(),i("label",Ue,[e("span",Ve,c(l.value.status||s(t).errors.status),1)])):u("",!0)]),e("div",null,[We,I(e("select",{"onUpdate:modelValue":a[5]||(a[5]=o=>s(t).category_id=o),class:_(["select-bordered select w-full bg-base-100 text-neutral-content",{"select-error":l.value.category_id||s(t).errors.category_id}])},[Pe,(d(!0),i(P,null,Q(S.value,o=>(d(),i("option",{key:o.id,value:o.id},c(o.name),9,Qe))),128))],2),[[F,s(t).category_id]]),l.value.category_id||s(t).errors.category_id?(d(),i("label",Re,[e("span",$e,c(l.value.category_id||s(t).errors.category_id),1)])):u("",!0)]),e("div",null,[e("div",Je,[Xe,e("div",Ze,[e("input",{type:"text",value:s(t).cover_image,onInput:a[6]||(a[6]=o=>s(t).cover_image=o.target.value),placeholder:"https://example.com/image.jpg",class:_(["input-bordered input w-full",{"input-error":l.value.cover_image||s(t).errors.cover_image}])},null,42,et)]),l.value.cover_image||s(t).errors.cover_image?(d(),i("label",tt,[e("span",st,c(l.value.cover_image||s(t).errors.cover_image),1)])):u("",!0)])]),e("div",null,[e("div",lt,[at,e("div",ot,[e("input",{type:"text",value:s(t).tags,onInput:a[7]||(a[7]=o=>s(t).tags=o.target.value),placeholder:"etiket1, etiket2, etiket3",class:_(["input-bordered input w-full",{"input-error":l.value.tags||s(t).errors.tags}])},null,42,rt)]),l.value.tags||s(t).errors.tags?(d(),i("label",nt,[e("span",it,c(l.value.tags||s(t).errors.tags),1)])):u("",!0)])]),e("div",null,[e("div",dt,[ct,e("div",ut,[e("input",{type:"text",value:s(t).seo_keywords,onInput:a[8]||(a[8]=o=>s(t).seo_keywords=o.target.value),placeholder:"anahtar1, anahtar2, anahtar3",class:_(["input-bordered input w-full",{"input-error":l.value.seo_keywords||s(t).errors.seo_keywords}])},null,42,_t)]),l.value.seo_keywords||s(t).errors.seo_keywords?(d(),i("label",pt,[e("span",vt,c(l.value.seo_keywords||s(t).errors.seo_keywords),1)])):u("",!0)])]),e("div",null,[e("div",mt,[gt,e("div",bt,[e("textarea",{value:s(t).meta_description,onInput:a[9]||(a[9]=o=>s(t).meta_description=o.target.value),placeholder:"Arama motorları için kısa bir açıklama (max 160 karakter)",class:_(["textarea-bordered textarea w-full",{"textarea-error":l.value.meta_description||s(t).errors.meta_description}]),maxlength:"160",rows:"2"},null,42,ht),e("div",yt,c(((w=s(t).meta_description)==null?void 0:w.length)||0)+"/160",1)]),l.value.meta_description||s(t).errors.meta_description?(d(),i("label",ft,[e("span",xt,c(l.value.meta_description||s(t).errors.meta_description),1)])):u("",!0),kt])]),e("div",null,[e("div",wt,[zt,e("div",It,[e("input",{type:"number",value:s(t).views_count,onInput:a[10]||(a[10]=o=>s(t).views_count=o.target.value),class:"input-bordered input w-full",readonly:""},null,40,Tt)])])]),e("div",Et,[e("label",Mt,[I(e("input",{type:"checkbox","onUpdate:modelValue":a[11]||(a[11]=o=>s(t).hasDraw=o),class:"checkbox checkbox-neutral"},null,512),[[R,s(t).hasDraw]]),Bt])])]),Lt,e("div",Ct,[e("button",{type:"submit",class:_(["btn btn-primary",{loading:s(t).processing}]),disabled:s(t).processing}," Yazıyı Kaydet ",10,Dt)])],32)])])}}});export{At as default};
