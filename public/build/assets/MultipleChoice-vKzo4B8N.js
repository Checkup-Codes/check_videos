import{Q as E,i,l as m,E as W,g as a,b as d,F as b,m as S,t as c,h,N as j,o,n as C,e as B}from"./app-Odm2mtG0.js";/* empty css            */const L={class:"flex min-h-screen flex-col items-center justify-center"},T={key:0,class:"w-full max-w-md rounded-2xl border border-gray-200 bg-white p-6 shadow-sm"},V=d("h2",{class:"mb-2 text-2xl font-semibold text-gray-900"},"Quiz Completed",-1),D=d("p",{class:"mb-4 text-gray-600"},"Here's how you did:",-1),O={class:"space-y-2 text-left text-sm text-gray-800"},R={key:0,class:"ml-2 text-xs text-gray-500"},U={key:1,class:"relative w-full max-w-md rounded-2xl border border-gray-200 bg-white p-6 shadow-sm"},$={key:0,class:"absolute right-4 top-3 text-xs text-gray-400"},q={key:1,class:"mb-4 text-xl font-semibold text-gray-900"},H={class:"flex flex-col gap-3"},I=["onClick"],G={key:2,class:"mt-4 text-sm text-gray-700"},Y={__name:"MultipleChoice",props:{gameType:String,packSlug:String},setup(M){const w=M,r=E().props.languagePacks||[],p=i(()=>w.packSlug?r.find(e=>e.slug===w.packSlug):null),s=m([]),_=i(()=>Object.fromEntries(s.value.map(e=>[e.id,e]))),g=m(0),u=m(null),v=m([]),f=m(!1);W(()=>{console.log("Pack slug:",w.packSlug),console.log("All packs:",r);const e=r.find(l=>l.slug===w.packSlug);console.log("Found pack:",e),e&&e.words&&e.words.length?(console.log("Loading words from found pack, words count:",e.words.length),s.value=[...e.words].sort(()=>Math.random()-.5)):r.length>0&&r[0].words&&r[0].words.length?(console.log("Fallback to first pack, words count:",r[0].words.length),s.value=[...r[0].words].sort(()=>Math.random()-.5)):console.log("No words found in any pack")});const n=i(()=>s.value.length?s.value[g.value]:null),N=i(()=>{if(!n.value)return[];let e=s.value.filter(l=>l.id!==n.value.id);return e=e.sort(()=>Math.random()-.5).slice(0,3),e.push(n.value),e.sort(()=>Math.random()-.5)}),Q=e=>{var l,t;u.value||(u.value=e.id,v.value.push({word_id:(l=n.value)==null?void 0:l.id,selected_id:e.id,correct:e.id===((t=n.value)==null?void 0:t.id)}))},z=i(()=>n.value?u.value===n.value.id?"Correct!":`Wrong! The correct answer is: ${n.value.meaning}`:""),y=i(()=>s.value.length&&g.value===s.value.length-1),F=()=>{y.value?(f.value=!0,A()):s.value.length&&(g.value++,u.value=null)},P=()=>{p.value&&p.value.words?s.value=[...p.value.words].sort(()=>Math.random()-.5):r.length>0&&r[0].words?s.value=[...r[0].words].sort(()=>Math.random()-.5):s.value=[],g.value=0,u.value=null,v.value=[],f.value=!1},A=()=>{if(!v.value.length)return;const e=v.value.map(l=>({word_id:l.word_id,review_count:1,incorrect_count:l.correct?0:1}));j.post("/update-words",{words:e},{preserveState:!0,onSuccess:()=>console.log("Words updated successfully"),onError:l=>console.error("Failed to update word stats",l)})};return(e,l)=>(o(),a("div",L,[f.value?(o(),a("div",T,[V,D,d("ul",O,[(o(!0),a(b,null,S(v.value,t=>{var x,k;return o(),a("li",{key:t.word_id,class:"flex justify-between rounded-md bg-gray-50 px-4 py-2"},[d("span",{class:C(t.correct?"text-green-600":"text-red-600")},c(((x=_.value[t.word_id])==null?void 0:x.word)||"Unknown"),3),d("span",null,[B(c(t.correct?"✓":"✗")+" ",1),t.correct?h("",!0):(o(),a("span",R," (Correct: "+c(((k=_.value[t.word_id])==null?void 0:k.meaning)||"Unknown")+") ",1))])])}),128))]),d("button",{onClick:P,class:"mt-6 w-full rounded-lg bg-black px-4 py-2 text-sm font-medium text-white transition hover:bg-gray-700"}," Restart Quiz ")])):(o(),a("div",U,[s.value.length?(o(),a("span",$,c(g.value+1)+"/"+c(s.value.length),1)):h("",!0),n.value?(o(),a("h2",q,c(n.value.word),1)):h("",!0),d("div",H,[(o(!0),a(b,null,S(N.value,t=>(o(),a("button",{key:t.id,onClick:x=>Q(t),class:C(["w-full rounded-lg px-4 py-3 text-sm font-medium transition focus:outline-none",u.value&&t.id===n.value.id?"bg-green-500 text-white":u.value&&t.id===u.value?"bg-red-500 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"])},c(t.meaning),11,I))),128))]),u.value?(o(),a("p",G,c(z.value),1)):h("",!0),u.value?(o(),a("button",{key:3,onClick:F,class:"mt-6 w-full rounded-lg bg-black px-4 py-2 text-sm font-medium text-white transition hover:bg-gray-700"},c(y.value?"Analyze":"Next"),1)):h("",!0)]))]))}};export{Y as default};
