import{Q as X,b as F,T as ee,g as u,c as a,f as _,u as m,Z as te,w as I,a as t,e as T,h as U,j as d,o as n,F as V,l as A,i as b,E as H,k as j,n as k,t as c,p as se,R as N,m as $}from"./ssr-B7YpsODM.js";import{_ as re}from"./CheckScreen-Cfqi5kOd.js";import{I as oe}from"./ImageCropper-DWpMGDxL.js";import"./app-D1F1K9mU.js";/* empty css            */const le={class:"space-y-6 py-6"},ne={class:"rounded-xl bg-card p-6 ring-1 ring-border/50"},ae={class:"space-y-4"},ie={class:"flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-border px-6 py-8 transition-colors hover:border-primary"},ue={key:0,class:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4"},de=["src"],me=["onClick"],ce={class:"rounded-xl bg-card p-6 ring-1 ring-border/50"},pe={class:"flex gap-4"},ve={class:"flex cursor-pointer items-center gap-2"},ge={class:"flex cursor-pointer items-center gap-2"},fe={class:"rounded-xl bg-card p-6 ring-1 ring-border/50"},xe={class:"mb-4 flex items-center justify-between"},be={key:0,class:"rounded-lg border border-dashed border-border py-8 text-center"},ke={key:1,class:"space-y-3"},he={class:"min-w-0 flex-1"},ye={class:"font-medium text-foreground"},we={key:0,class:"mt-1 truncate text-sm text-muted-foreground"},Ce=["href"],_e={key:2,class:"mt-2 text-xs text-destructive"},je={key:0},ze={key:1},Me={key:2},Le={class:"ml-4 flex items-center gap-2"},Pe=["onClick"],Be=["onClick"],Ue={key:2,class:"mt-4 rounded-lg bg-destructive/10 p-3 text-sm text-destructive"},Ve={class:"flex items-center justify-end gap-3"},$e=["disabled"],Re={class:"w-full max-w-md rounded-xl bg-card p-6 shadow-xl"},De={class:"mb-4 flex items-center justify-between"},Ee={class:"text-lg font-semibold text-foreground"},Fe={class:"space-y-4"},Ie={key:0,class:"text-destructive"},Te={class:"mt-6 flex justify-end gap-3"},Ae=["disabled"],He={class:"w-full max-w-sm rounded-xl bg-card p-6 shadow-xl"},Ne={class:"mb-4 text-sm text-muted-foreground"},Ge={class:"flex justify-end gap-3"},Qe={__name:"CreateWorkspace",setup(Se){const G=X(),S=F(()=>{var r,e,s;return((s=(e=(r=G.props)==null?void 0:r.screen)==null?void 0:e.seo)==null?void 0:s.title)||"Yeni Çalışma Alanı"}),l=ee({images:[],status:"published",products:[]}),h=u([]),y=u(!1),R=u(""),p=u([]),v=u(0),z=u(!1),g=u(null),o=u({name:"",features:"",link:""}),x=u(!1),w=u(null),M=u(""),f=r=>{if(!r)return!0;try{return new URL(r),!0}catch{return!1}},L=r=>{const e=l.products[r];return e.name.length>255||e.link&&!f(e.link)||e.link&&e.link.length>500},P=F(()=>l.products.some((r,e)=>L(e))),Y=r=>{const e=Array.from(r.target.files);e.length!==0&&(p.value=e,v.value=0,B(e[0]))},B=r=>{const e=new FileReader;e.onload=s=>{R.value=s.target.result,y.value=!0},e.readAsDataURL(r)},K=r=>{var i;const e=((i=p.value[v.value])==null?void 0:i.name)||`image-${Date.now()}.jpg`,s=new File([r],e,{type:"image/jpeg"});l.images.push(s),h.value.push(URL.createObjectURL(r)),y.value=!1,v.value++,v.value<p.value.length?setTimeout(()=>{B(p.value[v.value])},100):p.value=[]},W=()=>{y.value=!1,v.value++,v.value<p.value.length?setTimeout(()=>{B(p.value[v.value])},100):p.value=[]},J=r=>{l.images.splice(r,1),h.value.splice(r,1)},D=(r=null)=>{g.value=r,r!==null?o.value={...l.products[r]}:o.value={name:"",features:"",link:""},z.value=!0},C=()=>{z.value=!1,g.value=null,o.value={name:"",features:"",link:""}},O=()=>{!o.value.name||o.value.name.length>255||o.value.link&&(!f(o.value.link)||o.value.link.length>500)||(g.value!==null?l.products[g.value]={...o.value}:l.products.push({...o.value}),C())},Q=r=>{w.value=r,M.value=l.products[r].name,x.value=!0},Z=()=>{w.value!==null&&l.products.splice(w.value,1),x.value=!1,w.value=null,M.value=""},q=()=>{if(P.value)return;const r=new FormData;l.images.forEach((e,s)=>r.append(`images[${s}]`,e)),r.append("status",l.status),l.products.forEach((e,s)=>{r.append(`products[${s}][name]`,e.name),e.features&&r.append(`products[${s}][features]`,e.features),e.link&&r.append(`products[${s}][link]`,e.link)}),l.transform(()=>r).post("/workspace",{forceFormData:!0})};return(r,e)=>(n(),a(V,null,[_(m(te),{title:S.value},null,8,["title"]),_(re,null,{default:I(()=>[t("div",le,[e[23]||(e[23]=t("div",null,[t("h1",{class:"text-2xl font-bold text-foreground"},"Yeni Çalışma Alanı"),t("p",{class:"mt-1 text-sm text-muted-foreground"},"Çalışma alanınızı ve ürünlerinizi ekleyin")],-1)),t("form",{onSubmit:U(q,["prevent"]),class:"space-y-6"},[t("div",ne,[e[12]||(e[12]=t("h2",{class:"mb-4 text-lg font-semibold text-foreground"},"Görseller",-1)),t("div",ae,[t("label",ie,[e[8]||(e[8]=t("svg",{class:"mb-2 h-10 w-10 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e[9]||(e[9]=t("span",{class:"text-sm font-medium text-foreground"},"Resim Yükle",-1)),e[10]||(e[10]=t("span",{class:"mt-1 text-xs text-muted-foreground"},"PNG, JPG, WEBP - max 5MB",-1)),t("input",{type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:Y},null,32)]),h.value.length>0?(n(),a("div",ue,[(n(!0),a(V,null,A(h.value,(s,i)=>(n(),a("div",{key:i,class:"group relative aspect-video overflow-hidden rounded-lg ring-1 ring-border"},[t("img",{src:s,alt:"Preview",class:"h-full w-full object-cover"},null,8,de),t("button",{type:"button",onClick:E=>J(i),class:"absolute right-2 top-2 rounded-full bg-destructive p-1.5 text-destructive-foreground opacity-0 transition-opacity group-hover:opacity-100"},[...e[11]||(e[11]=[t("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,me)]))),128))])):d("",!0)])]),t("div",ce,[e[15]||(e[15]=t("h2",{class:"mb-4 text-lg font-semibold text-foreground"},"Durum",-1)),t("div",pe,[t("label",ve,[b(t("input",{type:"radio","onUpdate:modelValue":e[0]||(e[0]=s=>m(l).status=s),value:"published",class:"h-4 w-4 border-input text-primary focus:ring-primary"},null,512),[[H,m(l).status]]),e[13]||(e[13]=t("span",{class:"text-sm text-foreground"},"Yayınla",-1))]),t("label",ge,[b(t("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=s=>m(l).status=s),value:"draft",class:"h-4 w-4 border-input text-primary focus:ring-primary"},null,512),[[H,m(l).status]]),e[14]||(e[14]=t("span",{class:"text-sm text-foreground"},"Taslak",-1))])])]),t("div",fe,[t("div",xe,[e[17]||(e[17]=t("h2",{class:"text-lg font-semibold text-foreground"},"Ürünler",-1)),t("button",{type:"button",onClick:e[2]||(e[2]=s=>D()),class:"inline-flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90"},[...e[16]||(e[16]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),j(" Ürün Ekle ",-1)])])]),m(l).products.length===0?(n(),a("div",be,[...e[18]||(e[18]=[t("p",{class:"text-sm text-muted-foreground"},"Henüz ürün eklenmedi",-1)])])):(n(),a("div",ke,[(n(!0),a(V,null,A(m(l).products,(s,i)=>(n(),a("div",{key:i,class:k(["flex items-center justify-between rounded-lg border border-border bg-background p-4",{"border-destructive":L(i)}])},[t("div",he,[t("h3",ye,c(s.name),1),s.features?(n(),a("p",we,c(s.features),1)):d("",!0),s.link?(n(),a("a",{key:1,href:s.link,target:"_blank",class:"mt-1 inline-flex items-center gap-1 text-xs text-primary hover:underline"},[...e[19]||(e[19]=[t("span",null,"Link",-1),t("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)])],8,Ce)):d("",!0),L(i)?(n(),a("div",_e,[s.name.length>255?(n(),a("p",je,"İsim 255 karakteri aşamaz ("+c(s.name.length)+"/255)",1)):d("",!0),s.link&&!f(s.link)?(n(),a("p",ze,"Geçersiz URL formatı")):d("",!0),s.link&&s.link.length>500?(n(),a("p",Me,"Link 500 karakteri aşamaz ("+c(s.link.length)+"/500)",1)):d("",!0)])):d("",!0)]),t("div",Le,[t("button",{type:"button",onClick:E=>D(i),class:"rounded-lg p-2 text-muted-foreground hover:bg-accent hover:text-foreground"},[...e[20]||(e[20]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Pe),t("button",{type:"button",onClick:E=>Q(i),class:"rounded-lg p-2 text-destructive hover:bg-destructive/10"},[...e[21]||(e[21]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Be)])],2))),128))])),P.value?(n(),a("div",Ue," Bazı ürünlerde hata var. Lütfen düzeltin. ")):d("",!0)]),t("div",Ve,[_(m(se),{href:"/workspace",class:"rounded-lg border border-border px-4 py-2 text-sm font-medium text-foreground hover:bg-accent"},{default:I(()=>[...e[22]||(e[22]=[j(" İptal ",-1)])]),_:1}),t("button",{type:"submit",disabled:m(l).processing||P.value,class:"rounded-lg bg-primary px-6 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 disabled:opacity-50"},c(m(l).processing?"Kaydediliyor...":"Kaydet"),9,$e)])],32)]),(n(),T(N,{to:"body"},[z.value?(n(),a("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:U(C,["self"])},[t("div",Re,[t("div",De,[t("h3",Ee,c(g.value!==null?"Ürünü Düzenle":"Yeni Ürün"),1),t("button",{onClick:C,class:"text-muted-foreground hover:text-foreground"},[...e[24]||(e[24]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Fe,[t("div",null,[e[25]||(e[25]=t("label",{class:"mb-1 block text-sm font-medium text-foreground"},[j("İsim "),t("span",{class:"text-destructive"},"*")],-1)),b(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.name=s),type:"text",maxlength:"255",placeholder:"Ürün adı",class:k(["w-full rounded-lg border border-input bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",{"border-destructive":o.value.name.length>255}])},null,2),[[$,o.value.name]]),t("p",{class:k(["mt-1 text-xs",o.value.name.length>255?"text-destructive":"text-muted-foreground"])},c(o.value.name.length)+"/255 ",3)]),t("div",null,[e[26]||(e[26]=t("label",{class:"mb-1 block text-sm font-medium text-foreground"},"Özellikler",-1)),b(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.features=s),rows:"3",placeholder:"Ürün özellikleri...",class:"w-full rounded-lg border border-input bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[$,o.value.features]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"mb-1 block text-sm font-medium text-foreground"},"Satın Alma Linki",-1)),b(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.link=s),type:"url",maxlength:"500",placeholder:"https://...",class:k(["w-full rounded-lg border border-input bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",{"border-destructive":o.value.link&&!f(o.value.link)||o.value.link.length>500}])},null,2),[[$,o.value.link]]),t("p",{class:k(["mt-1 text-xs",o.value.link.length>500?"text-destructive":"text-muted-foreground"])},[j(c(o.value.link.length)+"/500 ",1),o.value.link&&!f(o.value.link)?(n(),a("span",Ie," - Geçersiz URL")):d("",!0)],2)])]),t("div",Te,[t("button",{onClick:C,class:"rounded-lg border border-border px-4 py-2 text-sm font-medium text-foreground hover:bg-accent"}," İptal "),t("button",{onClick:O,disabled:!o.value.name||o.value.name.length>255||o.value.link&&(!f(o.value.link)||o.value.link.length>500),class:"rounded-lg bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 disabled:opacity-50"},c(g.value!==null?"Güncelle":"Ekle"),9,Ae)])])])):d("",!0)])),(n(),T(N,{to:"body"},[x.value?(n(),a("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:e[7]||(e[7]=U(s=>x.value=!1,["self"]))},[t("div",He,[e[28]||(e[28]=t("h3",{class:"mb-2 text-lg font-semibold text-foreground"},"Ürünü Sil",-1)),t("p",Ne,' "'+c(M.value)+'" ürününü silmek istediğinizden emin misiniz? ',1),t("div",Ge,[t("button",{onClick:e[6]||(e[6]=s=>x.value=!1),class:"rounded-lg border border-border px-4 py-2 text-sm font-medium text-foreground hover:bg-accent"}," İptal "),t("button",{onClick:Z,class:"rounded-lg bg-destructive px-4 py-2 text-sm font-medium text-destructive-foreground hover:bg-destructive/90"}," Sil ")])])])):d("",!0)])),_(oe,{show:y.value,"image-src":R.value,"aspect-ratio":16/9,onCrop:K,onCancel:W},null,8,["show","image-src"])]),_:1})],64))}};export{Qe as default};
