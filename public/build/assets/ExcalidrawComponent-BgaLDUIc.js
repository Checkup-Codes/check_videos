const __vite__fileDeps=["assets/main-CtafY0VE.js","assets/index-D02rgqcm.js","assets/app-DmpDP_1b.js","assets/app-kbW2Gyv6.css","assets/app-BzBOnTLa.css","assets/index-n7LLhjda.js","assets/client-BVQ6kPnn.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{Q as k,l as _,y as C,H as i,o as u,g as c,t as f,h as w,b as o,j as S,I,F as x,m as T,u as L,x as b}from"./app-DmpDP_1b.js";const O={key:0,class:"mt-4 rounded bg-green-200 p-3 text-green-800"},R={class:"mx-10 mb-2 mt-4 flex justify-between space-x-4 rounded bg-gray-100 px-2 py-1 text-gray-400"},P={class:"flex"},A=o("label",{for:"versionDropdown",class:"font-semibold text-gray-700"},"Versiyon Seç:",-1),B=["value"],M={class:"ml-auto flex items-center justify-end space-x-2"},N=o("div",{id:"excalidraw-container",class:"relative h-[650px] w-full pt-3"},[o("div",{id:"excali",class:"h-full w-full"})],-1),$={__name:"ExcalidrawComponent",setup(j){const{props:r}=k(),v=_([]),l=_(""),n=_(r.write.write_draws),s=_(n.value.length>0?n.value[0].id:null);C(()=>{E()});const E=()=>{i(async()=>{const{Excalidraw:a}=await import("./main-CtafY0VE.js").then(e=>e.m);return{Excalidraw:a}},__vite__mapDeps([0,1,2,3,4,5])).then(({Excalidraw:a})=>{i(()=>import("./index-D02rgqcm.js").then(e=>e.i),__vite__mapDeps([1,2,3,4])).then(e=>{i(()=>import("./client-BVQ6kPnn.js").then(t=>t.c),__vite__mapDeps([6,5,1,2,3,4])).then(t=>{const d=document.getElementById("excali"),m=t.createRoot(d),h=n.value.length>0?{elements:JSON.parse(n.value[0].elements),scrollToContent:!0}:{elements:[],scrollToContent:!0},g=p=>{v.value=p};m.render(e.createElement(a,{initialData:h,onChange:g,viewModeEnabled:!r.auth.user}))})})})},y=()=>{const a=n.value.find(e=>e.id===s.value);a&&i(async()=>{const{Excalidraw:e}=await import("./main-CtafY0VE.js").then(t=>t.m);return{Excalidraw:e}},__vite__mapDeps([0,1,2,3,4,5])).then(({Excalidraw:e})=>{i(()=>import("./index-D02rgqcm.js").then(t=>t.i),__vite__mapDeps([1,2,3,4])).then(t=>{i(()=>import("./client-BVQ6kPnn.js").then(d=>d.c),__vite__mapDeps([6,5,1,2,3,4])).then(d=>{const m=document.getElementById("excali"),h=d.createRoot(m),g={elements:JSON.parse(a.elements),scrollToContent:!0};h.render(t.createElement(e,{initialData:g,onChange:p=>{v.value=p},viewModeEnabled:!r.auth.user}))})})})},D=()=>{const a=v.value,e=JSON.stringify(a);b.post(`/writes/${r.write.id}/draw`,{elements:e}).then(t=>{l.value="Canvas durumu başarıyla kaydedildi!",n.value.push(t.data)}).catch(t=>{l.value="Kaydetme sırasında bir hata oluştu. Lütfen tekrar deneyin."})},V=()=>{n.value.find(e=>e.id===s.value)&&confirm("Bu versiyonu silmek istediğinizden emin misiniz?")&&b.delete(`/writes/${r.write.id}/draw/${s.value}`).then(()=>{l.value="Versiyon başarıyla silindi.",n.value=n.value.filter(e=>e.id!==s.value),n.value.length>0?(s.value=n.value[0].id,y()):(v.value=[],s.value=null)}).catch(e=>{l.value="Silme işlemi sırasında bir hata oluştu. Lütfen tekrar deneyin."})};return(a,e)=>(u(),c(x,null,[l.value?(u(),c("div",O,f(l.value),1)):w("",!0),o("div",R,[o("div",P,[A,S(o("select",{id:"versionDropdown","onUpdate:modelValue":e[0]||(e[0]=t=>s.value=t),onChange:y,class:"mx-5 h-7 rounded-md border border-gray-300 bg-white py-0 pl-2 text-gray-700 shadow-sm focus:border-gray-500 focus:outline-none focus:ring focus:ring-gray-200"},[(u(!0),c(x,null,T(n.value,t=>(u(),c("option",{key:t.id,value:t.id},"Versiyon "+f(t.version),9,B))),128))],544),[[I,s.value]])]),o("div",M,[L(r).auth.user?(u(),c("button",{key:0,onClick:V,class:"rounded bg-red-200 px-5 text-black hover:bg-red-300"}," Sil ")):w("",!0),o("button",{id:"",onClick:D,class:"rounded bg-green-200 px-5 text-black hover:bg-green-300"}," Kaydet ")])]),N],64))}};export{$ as _};
