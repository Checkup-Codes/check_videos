import{Q as T,i as d,l as C,E as $,L as N,g as l,b as s,t as i,F as v,m as p,a as z,w as D,u as G,n as w,A as V,h as m,e as I,o as a,k as U}from"./app-BM0qUes5.js";/* empty css            */const W={class:"flex min-h-screen flex-col items-center justify-center"},F={key:0,class:"w-full max-w-md rounded-2xl border border-gray-200 bg-white p-6 shadow-sm"},K=s("h2",{class:"mb-2 text-2xl font-semibold text-gray-900"},"Test Özeti",-1),q={class:"mb-4 text-center"},Y={class:"text-4xl font-bold text-gray-900"},Z=s("p",{class:"text-sm text-gray-600"},"Puan",-1),J={class:"mb-4 grid grid-cols-2 gap-4 rounded-lg bg-gray-50 p-4"},X={class:"text-center"},ee={class:"text-2xl font-bold text-green-600"},te=s("p",{class:"text-sm text-gray-600"},"Doğru",-1),se={class:"text-center"},ne={class:"text-2xl font-bold text-red-600"},re=s("p",{class:"text-sm text-gray-600"},"Yanlış",-1),le={class:"mb-4 space-y-2 text-left text-sm text-gray-800"},ae={class:"flex gap-2"},oe={class:"mb-4 h-1 w-full overflow-hidden rounded-full bg-gray-200"},ue={class:"mb-4 text-right text-sm text-gray-500"},ie={key:0,class:"space-y-4"},ce={class:"flex items-center justify-between"},de=s("h2",{class:"text-xl font-semibold text-gray-900"},"Eksik harfleri tamamlayın:",-1),ge=["disabled"],ve={class:"mt-1 text-sm text-gray-500"},me={key:0,class:"rounded-lg bg-blue-50 p-3"},he=s("p",{class:"text-sm text-blue-600"},"Örnek Cümle:",-1),xe={key:0,class:"mt-1 text-sm text-gray-700"},fe={key:1,class:"mt-1 text-sm text-gray-700"},pe={class:"flex justify-center space-x-2"},we={key:0},_e={key:1},ye={key:1},be={key:1,class:"mt-4 rounded-lg bg-yellow-50 p-4"},ke={class:"text-sm text-yellow-800"},Ce={class:"font-bold"},Ie={class:"grid grid-cols-7 gap-2"},Le=["onClick","disabled"],Qe=["disabled"],Ae=["disabled"],He={__name:"WordCompletion",props:{gameType:String,packSlug:String,words:Array,gameConfig:Object},setup(L){const c=L,Q=T().props.languagePacks||[];d(()=>c.packSlug?Q.find(t=>t.slug===c.packSlug):null);const e=C({isLoading:!0,isPlaying:!1,currentQuestion:null,showAnswer:!1,isCorrect:!1,progress:0,currentIndex:0,totalQuestions:0,userResponses:[],maskedIndices:[],selectedLetters:[],hintShown:!1,currentHintIndex:0}),g=C([]),A=d(()=>Object.fromEntries(g.value.map(t=>[t.id,t]))),h=d(()=>e.value.maskedIndices.length===e.value.selectedLetters.length),S=async()=>{if(!c.words||c.words.length<5){alert("Oyunu başlatmak için en az 5 kelime gereklidir.");return}e.value.isLoading=!0;let t=[...c.words];c.gameConfig.difficulty!=="all"&&(t=t.filter(o=>o.difficulty_level===parseInt(c.gameConfig.difficulty))),c.gameConfig.learningStatus!=="all"&&(t=t.filter(o=>o.learning_status===parseInt(c.gameConfig.learningStatus))),c.gameConfig.wordSelection==="difficult"?t.sort((o,n)=>n.incorrect_count-o.incorrect_count):c.gameConfig.wordSelection==="easy"?t.sort((o,n)=>o.incorrect_count-n.incorrect_count):t.sort(()=>Math.random()-.5);const u=Math.min(parseInt(c.gameConfig.questionCount),t.length);t=t.slice(0,u),await new Promise(o=>{g.value=t,e.value.totalQuestions=g.value.length,e.value.currentIndex=0,e.value.userResponses=[],o()}),e.value.isLoading=!1,e.value.isPlaying=!0,x()},P=()=>{e.value.currentQuestion.example_sentences&&(e.value.hintShown?e.value.currentQuestion.example_sentences.length>e.value.currentHintIndex+1&&e.value.currentHintIndex++:(e.value.hintShown=!0,e.value.currentHintIndex=0))},x=()=>{if(e.value.currentIndex>=g.value.length){R();return}e.value.currentQuestion=g.value[e.value.currentIndex],e.value.showAnswer=!1,e.value.selectedLetters=[],e.value.hintShown=!1,e.value.currentHintIndex=0;const t=e.value.currentQuestion.word.length,u=Math.max(2,Math.floor(t*.4)),o=Array.from({length:t},(n,r)=>r).filter(n=>e.value.currentQuestion.word[n]!==" ");e.value.maskedIndices=o.sort(()=>Math.random()-.5).slice(0,u).sort((n,r)=>n-r)},f=t=>{e.value.selectedLetters.length<e.value.maskedIndices.length&&e.value.selectedLetters.push(t)},_=()=>{if(!h.value)return;const u=e.value.currentQuestion.word.split("").map((o,n)=>{if(e.value.maskedIndices.includes(n)){const r=e.value.maskedIndices.indexOf(n);return e.value.selectedLetters[r]}return o}).join("").toLowerCase()===e.value.currentQuestion.word.toLowerCase();e.value.showAnswer=!0,e.value.isCorrect=u,e.value.userResponses.push({word_id:e.value.currentQuestion.id,correct:u}),e.value.progress=(e.value.currentIndex+1)/e.value.totalQuestions*100,setTimeout(()=>{e.value.currentIndex++,x()},3e3)},R=()=>{e.value.isPlaying=!1},H=()=>{e.value.currentIndex=0,e.value.userResponses=[],e.value.isPlaying=!0,x()},E=d(()=>{if(!e.value.userResponses.length)return 0;const t=e.value.userResponses.filter(u=>u.correct).length;return Math.round(t/e.value.userResponses.length*100)}),M=d(()=>e.value.userResponses.filter(t=>t.correct).length),O=d(()=>e.value.userResponses.filter(t=>!t.correct).length);$(()=>{S(),window.addEventListener("keydown",y)}),N(()=>{window.removeEventListener("keydown",y)});const y=t=>{if(e.value.showAnswer||!e.value.isPlaying)return;const u=t.key.toUpperCase();(/^[A-Z]$/.test(u)||u===" ")&&f(u),t.key==="Backspace"&&j(),t.key==="Enter"&&h.value&&_()},j=()=>{e.value.selectedLetters.length>0&&e.value.selectedLetters.pop()},B=()=>{e.value.selectedLetters=[]};return(t,u)=>{var o;return a(),l("div",W,[!e.value.isPlaying&&e.value.userResponses.length>0?(a(),l("div",F,[K,s("div",q,[s("p",Y,i(E.value)+" / 100",1),Z]),s("div",J,[s("div",X,[s("p",ee,i(M.value),1),te]),s("div",se,[s("p",ne,i(O.value),1),re])]),s("ul",le,[(a(!0),l(v,null,p(e.value.userResponses,n=>{var r;return a(),l("li",{key:n.word_id,class:"flex justify-between rounded-md bg-gray-50 px-4 py-2"},[s("span",{class:w(n.correct?"text-green-600":"text-red-600")},i(((r=A.value[n.word_id])==null?void 0:r.word)||"Unknown"),3),s("span",null,i(n.correct?"✓":"✗"),1)])}),128))]),s("div",ae,[z(G(U),{href:`/rendition/words/${c.packSlug}`,class:"flex-1 rounded-lg bg-black px-4 py-2 text-center text-sm font-medium text-white transition hover:bg-gray-700"},{default:D(()=>[I(" Pakete Dön ")]),_:1},8,["href"]),s("button",{onClick:H,class:"flex-1 rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 transition hover:bg-gray-100"}," Tekrar Başla ")])])):(a(),l("div",{key:1,class:w(["relative w-full max-w-md rounded-2xl border border-gray-200 p-6 shadow-sm transition-colors duration-500",{"bg-white":!e.value.showAnswer,"bg-green-50":e.value.showAnswer&&e.value.isCorrect,"bg-red-50":e.value.showAnswer&&!e.value.isCorrect}])},[s("div",oe,[s("div",{class:"duration-2000 h-full bg-black transition-all",style:V({width:`${e.value.progress}%`})},null,4)]),s("div",ue," Soru "+i(e.value.currentIndex+1)+" / "+i(e.value.totalQuestions),1),e.value.currentQuestion?(a(),l("div",ie,[s("div",null,[s("div",ce,[de,e.value.showAnswer?m("",!0):(a(),l("button",{key:0,onClick:P,class:"rounded-lg border border-gray-200 px-3 py-1 text-sm text-gray-600 hover:bg-gray-50",disabled:e.value.hintShown&&(!e.value.currentQuestion.example_sentences||e.value.currentQuestion.example_sentences.length<=1)},i(e.value.hintShown?`İpucu (${e.value.currentHintIndex+1}/${((o=e.value.currentQuestion.example_sentences)==null?void 0:o.length)||0})`:"İpucu Göster"),9,ge))]),s("p",ve,"Anlam: "+i(e.value.currentQuestion.meaning),1)]),e.value.hintShown?(a(),l("div",me,[he,e.value.currentQuestion.example_sentences&&e.value.currentQuestion.example_sentences.length>0?(a(),l("p",xe,i(e.value.currentQuestion.example_sentences[e.value.currentHintIndex].sentence),1)):(a(),l("p",fe,"Bu kelime için örnek cümle bulunmuyor."))])):m("",!0),s("div",pe,[(a(!0),l(v,null,p(e.value.currentQuestion.word,(n,r)=>{var b,k;return a(),l("div",{key:r,class:w(["flex h-12 w-12 items-center justify-center rounded-lg border-2 text-xl font-bold",{"border-gray-200 bg-gray-50":e.value.maskedIndices.includes(r),"border-gray-300 bg-white":!e.value.maskedIndices.includes(r),"text-red-600":e.value.showAnswer&&!e.value.isCorrect&&e.value.maskedIndices.includes(r)&&((b=e.value.selectedLetters[e.value.maskedIndices.indexOf(r)])==null?void 0:b.toLowerCase())!==n.toLowerCase(),"text-green-600":e.value.showAnswer&&e.value.maskedIndices.includes(r)&&((k=e.value.selectedLetters[e.value.maskedIndices.indexOf(r)])==null?void 0:k.toLowerCase())===n.toLowerCase()}])},[e.value.maskedIndices.includes(r)?(a(),l(v,{key:0},[e.value.selectedLetters[e.value.maskedIndices.indexOf(r)]?(a(),l("span",we,i(e.value.selectedLetters[e.value.maskedIndices.indexOf(r)]),1)):(a(),l("span",_e,"_"))],64)):(a(),l("span",ye,i(n),1))],2)}),128))]),e.value.showAnswer&&!e.value.isCorrect?(a(),l("div",be,[s("p",ke,[I(" Doğru cevap: "),s("span",Ce,i(e.value.currentQuestion.word),1)])])):m("",!0),s("div",Ie,[(a(!0),l(v,null,p("ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),n=>(a(),l("button",{key:n,onClick:r=>f(n),disabled:e.value.showAnswer||e.value.selectedLetters.includes(n),class:"h-10 w-10 rounded-lg border border-gray-200 text-center text-lg font-medium transition hover:bg-gray-50 disabled:opacity-50"},i(n),9,Le))),128)),s("button",{onClick:u[0]||(u[0]=n=>f(" ")),disabled:e.value.showAnswer||e.value.selectedLetters.includes(" "),class:"h-10 w-10 rounded-lg border border-gray-200 text-center text-lg font-medium transition hover:bg-gray-50 disabled:opacity-50"}," ␣ ",8,Qe)]),s("button",{onClick:B,class:"w-full rounded-lg border border-gray-300 px-4 py-2 text-center text-sm font-medium text-gray-700 transition hover:bg-gray-100"}," Seçilen Harfleri Temizle "),s("button",{onClick:_,disabled:e.value.showAnswer||!h.value,class:"w-full rounded-lg bg-black px-4 py-2 text-center text-sm font-medium text-white transition hover:bg-gray-700 disabled:opacity-50"}," Kontrol Et ",8,Ae)])):m("",!0)],2))])}}};export{He as default};
