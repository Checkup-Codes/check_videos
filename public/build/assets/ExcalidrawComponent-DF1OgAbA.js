const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/main-EjxdmxYR.js","assets/index-6vFu6Rbu.js","assets/ssr-COd_82OS.js","assets/ssr-XoFR8tid.css","assets/index-DclkkzAs.js","assets/client-BWlOUKS1.js"])))=>i.map(i=>d[i]);
import{a as m}from"./app-udAvpmnU.js";import{Q as y,r as o,s as V,m as A,c as h,h as p,a as s,u as C,f as D,t as T,x as M,o as v}from"./ssr-COd_82OS.js";const I={class:"relative h-full w-full"},N={key:0,class:"absolute right-4 top-[53px] z-10 lg:top-4"},O={key:1,class:"absolute right-4 top-[101px] z-20 rounded-lg border border-green-300 bg-green-100 px-3 py-2 text-sm text-green-800 shadow-lg lg:top-16"},R={__name:"ExcalidrawComponent",setup(S){const{props:l}=y(),u=o([]),i=o(""),n=o(l.write.write_draws),d=o(null),r=o(document.documentElement.getAttribute("data-theme")==="dark");V(r,t=>{d.value&&d.value.updateScene({theme:t?"dark":"light"})}),A(()=>{const t=new MutationObserver(e=>{e.forEach(a=>{a.attributeName==="data-theme"&&(r.value=document.documentElement.getAttribute("data-theme")==="dark")})});return t.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),w(),()=>t.disconnect()});const w=()=>{m(async()=>{const{Excalidraw:t}=await import("./main-EjxdmxYR.js").then(e=>e.m);return{Excalidraw:t}},__vite__mapDeps([0,1,2,3,4])).then(({Excalidraw:t})=>{m(()=>import("./index-6vFu6Rbu.js").then(e=>e.i),__vite__mapDeps([1,2,3])).then(e=>{m(()=>import("./client-BWlOUKS1.js").then(a=>a.c),__vite__mapDeps([5,4,1,2,3])).then(a=>{const b=document.getElementById("excali"),x=a.createRoot(b),f=n.value.length>0?{elements:JSON.parse(n.value[0].elements),scrollToContent:!0,theme:r.value?"dark":"light"}:{elements:[],scrollToContent:!0,theme:r.value?"dark":"light"},k=c=>{u.value=c},E=e.createElement(t,{initialData:f,onChange:k,viewModeEnabled:!l.auth.user,theme:r.value?"dark":"light",onMount:c=>{d.value=c}});x.render(E)})})})},_=()=>{const t=u.value.length>0?u.value:[],e=JSON.stringify(t);M.post(`/writes/${l.write.id}/draw`,{elements:e,version:1}).then(a=>{g("Canvas durumu başarıyla kaydedildi!"),n.value.length>0?n.value[0]=a.data:n.value.push(a.data)}).catch(()=>{g("Kaydetme sırasında bir hata oluştu. Lütfen tekrar deneyin.")})},g=t=>{i.value=t,setTimeout(()=>{i.value=""},3e3)};return(t,e)=>(v(),h("div",I,[C(l).auth.user?(v(),h("div",N,[s("button",{onClick:_,class:"flex items-center gap-2 rounded-lg border border-base-300 bg-base-100 px-3 py-2 text-sm text-base-content shadow-lg transition-all duration-200 hover:bg-base-200"},[...e[0]||(e[0]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 3.75V16.5L12 14.25 7.5 16.5V3.75m9 0H18A2.25 2.25 0 0120.25 6v12A2.25 2.25 0 0118 20.25H6A2.25 2.25 0 013.75 18V6A2.25 2.25 0 016 3.75h1.5m9 0h-9"})],-1),D(" Kaydet ",-1)])])])):p("",!0),i.value?(v(),h("div",O,T(i.value),1)):p("",!0),e[1]||(e[1]=s("div",{id:"excalidraw-container",class:"h-full w-full"},[s("div",{id:"excali",class:"h-full w-full"})],-1))]))}};export{R as _};
