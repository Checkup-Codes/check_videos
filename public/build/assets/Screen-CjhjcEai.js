import{Q as G,g as F,b as f,e as H,w,a as e,c as d,j as m,t as l,u as i,o as a,n as h,k as b,F as S,l as D,f as q,p as z}from"./ssr-BIVtT62i.js";import{_ as R}from"./CheckScreen-FFv7YZwa.js";const U={class:"mx-auto max-w-4xl space-y-6 p-6"},Y={class:"space-y-4 rounded-lg border border-border bg-card p-6"},I={class:"text-center"},O={class:"text-muted-foreground"},J={class:"flex justify-center"},W={class:"relative h-32 w-32"},X={class:"h-32 w-32 -rotate-90 transform"},Z=["stroke-dasharray"],ee={class:"absolute inset-0 flex flex-col items-center justify-center"},te={class:"grid grid-cols-3 gap-4"},se={class:"rounded-lg border border-border bg-background p-4 text-center"},re={class:"text-2xl font-bold text-foreground"},oe={class:"rounded-lg border border-border bg-background p-4 text-center"},ne={class:"text-2xl font-bold text-foreground"},ae={class:"rounded-lg border border-border bg-background p-4 text-center"},de={class:"text-2xl font-bold text-foreground"},ie={class:"flex flex-wrap justify-center gap-4 text-sm text-muted-foreground"},le={key:0,class:"flex items-center gap-2"},ce={key:1,class:"flex items-center gap-2"},ue={key:0,class:"border-t border-border pt-4"},me={class:"space-y-4"},pe={class:"rounded-md border border-input bg-background p-4"},xe={class:"whitespace-pre-wrap font-medium text-foreground",id:"shareMessage"},ge={class:"flex gap-2"},fe={class:"space-y-4"},be={class:"space-y-6"},ve={class:"flex items-start justify-between"},he={class:"flex-1"},_e={class:"mb-2 flex items-center gap-2"},ke={key:0,class:"flex items-center gap-1 text-sm font-medium text-green-600 dark:text-green-400"},ye={key:1,class:"flex items-center gap-1 text-sm font-medium text-red-600 dark:text-red-400"},we={class:"whitespace-pre-wrap text-lg font-medium text-foreground"},Ce={class:"space-y-2"},je={class:"font-medium text-muted-foreground"},Me={class:"flex-1 whitespace-pre-wrap text-foreground"},$e={class:"flex gap-2"},Te={key:0,class:"rounded-md bg-green-500 px-2 py-1 text-xs font-medium text-white"},Be={key:1,class:"rounded-md bg-red-500 px-2 py-1 text-xs font-medium text-white"},Se={key:0,class:"rounded-md border border-blue-200 bg-blue-50 p-3 dark:border-blue-800 dark:bg-blue-950"},De={class:"flex items-start gap-2"},qe={class:"mt-1 whitespace-pre-wrap text-sm text-blue-800 dark:text-blue-200"},ze={key:0,class:"flex gap-4"},Pe={__name:"Screen",setup(Ve){const{props:C}=G(),s=C.result||{},k=C.isGuest||!1,v=F("Mesajı Kopyala"),V=f(()=>k&&s.answers?s.answers.map((r,t)=>({id:`guest-answer-${t}`,question:r.question,option:r.option,is_correct:r.is_correct})):s.answers||[]),j=f(()=>{const r=s.score||0;return r>=80?"text-green-500":r>=60?"text-yellow-500":"text-red-500"}),M=f(()=>2*Math.PI*56),K=f(()=>(s.score||0)/100*M.value),N=r=>!r||!r.options?[]:r.options.sort((t,c)=>(t.order||0)-(c.order||0)),P=r=>{if(!r)return"";const t=Math.floor(r/60),c=r%60;return t>0?`${t} dakika ${c} saniye`:`${c} saniye`},A=r=>r?new Date(r).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",L=f(()=>typeof navigator<"u"&&"share"in navigator),y=f(()=>{var p,u;const r=((p=s.test)==null?void 0:p.title)||"Test",t=s.participant_name||"Ben",c=Math.round(s.score||0),x=s.total_questions||0,o=(u=s.test)==null?void 0:u.slug;if(!o)return"";const g=window.location.origin+`/tests/${o}/take`;return`${t}, Checkupcodes'taki "${r}" testinden ${x} soruluk sınavda ${c} puan aldı. Sen de dener misin? ${g}`}),Q=async()=>{try{await navigator.clipboard.writeText(y.value),v.value="Kopyalandı!",setTimeout(()=>{v.value="Mesajı Kopyala"},2e3)}catch{const t=document.createElement("textarea");t.value=y.value,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();try{document.execCommand("copy"),v.value="Kopyalandı!",setTimeout(()=>{v.value="Mesajı Kopyala"},2e3)}catch(c){console.error("Kopyalama hatası:",c)}document.body.removeChild(t)}},E=async()=>{var u,n;const r=((u=s.test)==null?void 0:u.title)||"Test",t=s.participant_name||"Ben",c=Math.round(s.score||0),x=s.total_questions||0,o=(n=s.test)==null?void 0:n.slug;if(!o)return;const g=window.location.origin+`/tests/${o}/take`,p={title:`Test Sonucu: ${r}`,text:`${t}, Checkupcodes'taki "${r}" testinden ${x} soruluk sınavda ${c} puan aldı. Sen de dener misin?`,url:g};try{navigator.share&&await navigator.share(p)}catch(_){_.name!=="AbortError"&&console.error("Paylaşım hatası:",_)}};return(r,t)=>(a(),H(R,null,{default:w(()=>{var c,x;return[e("div",U,[e("div",Y,[e("div",I,[t[0]||(t[0]=e("h1",{class:"mb-2 text-3xl font-bold text-foreground"},"Test Sonucu",-1)),e("p",O,l((c=i(s).test)==null?void 0:c.title),1)]),e("div",J,[e("div",W,[(a(),d("svg",X,[t[1]||(t[1]=e("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor","stroke-width":"8",fill:"none",class:"text-muted"},null,-1)),e("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor","stroke-width":"8",fill:"none","stroke-dasharray":`${K.value} ${M.value}`,class:h(["text-primary transition-all duration-500",j.value])},null,10,Z)])),e("div",ee,[e("span",{class:h(["text-3xl font-bold",j.value])},l(Math.round(i(s).score)),3),t[2]||(t[2]=e("span",{class:"text-xs text-muted-foreground"},"puan",-1))])])]),e("div",te,[e("div",se,[e("div",re,l(i(s).correct_answers),1),t[3]||(t[3]=e("div",{class:"text-sm text-muted-foreground"},"Doğru",-1))]),e("div",oe,[e("div",ne,l(i(s).total_questions-i(s).correct_answers),1),t[4]||(t[4]=e("div",{class:"text-sm text-muted-foreground"},"Yanlış",-1))]),e("div",ae,[e("div",de,l(i(s).total_questions),1),t[5]||(t[5]=e("div",{class:"text-sm text-muted-foreground"},"Toplam",-1))])]),e("div",ie,[i(s).time_taken?(a(),d("div",le,[t[6]||(t[6]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",null,l(P(i(s).time_taken)),1)])):m("",!0),i(s).completed_at?(a(),d("div",ce,[t[7]||(t[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",null,l(A(i(s).completed_at)),1)])):m("",!0)]),i(k)?(a(),d("div",ue,[t[11]||(t[11]=e("h3",{class:"mb-4 text-lg font-semibold text-foreground"},"Sonucunu Paylaş",-1)),e("div",me,[e("div",pe,[t[8]||(t[8]=e("p",{class:"mb-2 text-sm text-muted-foreground"},"Paylaşılabilir mesaj:",-1)),e("p",xe,l(y.value),1)]),e("div",ge,[e("button",{onClick:Q,class:"inline-flex h-10 items-center justify-center gap-2 rounded-md bg-primary px-4 text-sm font-medium text-primary-foreground hover:bg-primary/90"},[t[9]||(t[9]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)),b(" "+l(v.value),1)]),L.value?(a(),d("button",{key:0,onClick:E,class:"inline-flex h-10 items-center justify-center gap-2 rounded-md border border-input bg-background px-4 text-sm font-medium text-foreground hover:bg-accent hover:text-accent-foreground"},[...t[10]||(t[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.684 13.342C8.885 12.938 9 12.482 9 12c0-.482-.115-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})],-1),b(" Paylaş ",-1)])])):m("",!0)])])])):m("",!0)]),e("div",fe,[t[16]||(t[16]=e("h2",{class:"text-xl font-semibold text-foreground"},"Sorular ve Cevaplar",-1)),e("div",be,[(a(!0),d(S,null,D(V.value,(o,g)=>{var p,u;return a(),d("div",{key:o.id||g,class:h(["space-y-4 rounded-lg border border-border bg-card p-6",{"border-green-500 bg-green-50 dark:bg-green-950":o.is_correct,"border-red-500 bg-red-50 dark:bg-red-950":!o.is_correct}])},[e("div",ve,[e("div",he,[e("div",_e,[e("span",{class:h(["rounded-md px-2 py-1 text-sm font-semibold",o.is_correct?"bg-green-500 text-white":"bg-red-500 text-white"])}," Soru "+l(g+1),3),o.is_correct?(a(),d("span",ke,[...t[12]||(t[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),b(" Doğru ",-1)])])):(a(),d("span",ye,[...t[13]||(t[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),b(" Yanlış ",-1)])]))]),e("p",we,l((p=o.question)==null?void 0:p.question_text),1)])]),e("div",Ce,[(a(!0),d(S,null,D(N(o.question),(n,_)=>{var $,T,B;return a(),d("div",{key:n.id,class:h(["flex items-start gap-3 rounded-lg border p-3",{"border-green-500 bg-green-100 dark:bg-green-900":n.is_correct,"border-red-500 bg-red-100 dark:bg-red-900":!n.is_correct&&(o.option_id===n.id||(($=o.option)==null?void 0:$.id)===n.id),"border-border bg-background":!n.is_correct&&o.option_id!==n.id&&((T=o.option)==null?void 0:T.id)!==n.id}])},[e("span",je,l(String.fromCharCode(65+_))+".",1),e("span",Me,l(n.option_text),1),e("div",$e,[n.is_correct?(a(),d("span",Te," Doğru Cevap ")):m("",!0),!n.is_correct&&(o.option_id===n.id||((B=o.option)==null?void 0:B.id)===n.id)?(a(),d("span",Be," Sizin Cevabınız ")):m("",!0)])],2)}),128))]),(u=o.question)!=null&&u.explanation?(a(),d("div",Se,[e("div",De,[t[15]||(t[15]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 flex-shrink-0 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[t[14]||(t[14]=e("p",{class:"text-sm font-medium text-blue-900 dark:text-blue-100"},"Açıklama:",-1)),e("p",qe,l(o.question.explanation),1)])])])):m("",!0)],2)}),128))])]),i(k)?m("",!0):(a(),d("div",ze,[q(i(z),{href:`/tests/${(x=i(s).test)==null?void 0:x.slug}`,class:"inline-flex h-11 items-center justify-center rounded-md border border-input bg-background px-6 text-sm font-medium text-foreground hover:bg-accent hover:text-accent-foreground"},{default:w(()=>[...t[17]||(t[17]=[b(" Teste Geri Dön ",-1)])]),_:1},8,["href"]),q(i(z),{href:"/tests",class:"inline-flex h-11 items-center justify-center rounded-md bg-primary px-6 text-sm font-medium text-primary-foreground hover:bg-primary/90"},{default:w(()=>[...t[18]||(t[18]=[b(" Diğer Testler ",-1)])]),_:1})]))])]}),_:1}))}};export{Pe as default};
