import{Q as D,i as c,l as f,x as L,g as a,o,b as t,t as n,F as T,m as B,n as d,h as v,U as W,j as z,q as G,O as M,N}from"./app-Dg69v9io.js";/* empty css            */const F={class:"flex min-h-screen flex-col items-center justify-center"},O={key:0,class:"w-full max-w-md rounded-2xl border border-gray-200 bg-white p-6 shadow-sm"},$=t("h2",{class:"mb-2 text-2xl font-semibold text-gray-900"},"Test Özeti",-1),E={class:"mb-4 text-center"},K={class:"text-4xl font-bold text-gray-900"},U=t("p",{class:"text-sm text-gray-600"},"Puan",-1),V={class:"mb-4 grid grid-cols-2 gap-4 rounded-lg bg-gray-50 p-4"},Y={class:"text-center"},q={class:"text-2xl font-bold text-green-600"},Z=t("p",{class:"text-sm text-gray-600"},"Doğru",-1),J={class:"text-center"},X={class:"text-2xl font-bold text-red-600"},ee=t("p",{class:"text-sm text-gray-600"},"Yanlış",-1),te={class:"mb-4 max-h-60 overflow-y-auto"},se=t("h3",{class:"mb-2 font-medium text-gray-700"},"Cevaplarınız:",-1),re={class:"space-y-2 text-left text-sm text-gray-800"},ne={class:"flex flex-col"},ae={class:"text-xs text-gray-500"},oe={class:"flex gap-2"},le={class:"mb-4 h-1 w-full overflow-hidden rounded-full bg-gray-200"},ue={class:"mb-4 text-right text-sm text-gray-500"},ie={key:0,class:"space-y-4"},ce={class:"flex items-center justify-between"},de={class:"text-xl font-semibold text-gray-900"},ve=["disabled"],ge={class:"mt-1 text-sm text-gray-500"},me={key:0,class:"rounded-lg bg-blue-50 p-3"},xe=t("p",{class:"text-sm text-blue-600"},"Örnek Cümle:",-1),pe={key:0,class:"mt-1 text-sm text-gray-700"},he={key:1,class:"mt-1 text-sm text-gray-700"},we=["disabled"],_e={class:"mt-1 font-medium text-gray-900"},ke={__name:"TranslateWord",props:{gameType:String,packSlug:String,words:Array,gameConfig:Object},emits:["game-completed"],setup(y,{emit:b}){const u=y,k=b,C=D().props.languagePacks||[];c(()=>u.packSlug?C.find(s=>s.slug===u.packSlug):null);const e=f({isLoading:!0,isPlaying:!1,currentQuestion:null,userInput:"",showAnswer:!1,isCorrect:!1,progress:0,currentIndex:0,totalQuestions:0,userResponses:[],hintShown:!1,currentHintIndex:0}),i=f([]),m=c(()=>Object.fromEntries(i.value.map(s=>[s.id,s]))),x=async()=>{if(!u.words||u.words.length<2){alert("Oyunu başlatmak için en az 2 kelime gereklidir.");return}e.value.isLoading=!0;let s=[...u.words];s.sort(()=>Math.random()-.5),await new Promise(r=>{i.value=s,e.value.totalQuestions=i.value.length,e.value.currentIndex=0,e.value.userResponses=[],r()}),e.value.isLoading=!1,e.value.isPlaying=!0,p()},I=()=>{if(!e.value.currentQuestion.example_sentences||e.value.currentQuestion.example_sentences.length===0){e.value.hintShown=!0;return}e.value.hintShown?e.value.currentHintIndex=(e.value.currentHintIndex+1)%e.value.currentQuestion.example_sentences.length:(e.value.hintShown=!0,e.value.currentHintIndex=0)},p=()=>{if(e.value.currentIndex>=i.value.length){A();return}e.value.currentQuestion=i.value[e.value.currentIndex],e.value.userInput="",e.value.showAnswer=!1,e.value.hintShown=!1,e.value.currentHintIndex=0},h=()=>{if(!e.value.userInput.trim()||e.value.showAnswer)return;const s=e.value.userInput.trim().toLowerCase(),r=e.value.currentQuestion.meaning.toLowerCase();e.value.isCorrect=s===r,e.value.userResponses.push({word_id:e.value.currentQuestion.id,correct:e.value.isCorrect}),e.value.showAnswer=!0,e.value.progress=0;const g=setInterval(()=>{e.value.progress+=1,e.value.progress>=100&&(clearInterval(g),e.value.currentIndex++,e.value.userInput="",e.value.showAnswer=!1,e.value.progress=0,p())},20)},Q=c(()=>{if(!e.value.userResponses.length)return 0;const s=e.value.userResponses.filter(r=>r.correct).length;return Math.round(s/e.value.userResponses.length*100)}),S=s=>{switch(s){case"noun":return"İsim";case"verb":return"Fiil";case"adjective":return"Sıfat";case"adverb":return"Zarf";default:return"Bilinmiyor"}},A=()=>{e.value.isPlaying=!1,R()},R=()=>{if(!e.value.userResponses.length)return;const s=e.value.userResponses.map(r=>({word_id:r.word_id,review_count:1,incorrect_count:r.correct?0:1}));N.post("/update-words",{words:s},{preserveState:!0,onSuccess:()=>console.log("Words updated successfully"),onError:r=>console.error("Failed to update word stats",r)})},P=c(()=>e.value.userResponses.filter(s=>s.correct).length),H=c(()=>e.value.userResponses.filter(s=>!s.correct).length),j=()=>{e.value={isLoading:!0,isPlaying:!1,currentQuestion:null,userInput:"",showAnswer:!1,isCorrect:!1,progress:0,currentIndex:0,totalQuestions:0,userResponses:[],hintShown:!1,currentHintIndex:0},x()};return L(()=>{x()}),(s,r)=>{var g;return o(),a("div",F,[!e.value.isPlaying&&e.value.userResponses.length>0?(o(),a("div",O,[$,t("div",E,[t("p",K,n(Q.value)+" / 100",1),U]),t("div",V,[t("div",Y,[t("p",q,n(P.value),1),Z]),t("div",J,[t("p",X,n(H.value),1),ee])]),t("div",te,[se,t("ul",re,[(o(!0),a(T,null,B(e.value.userResponses,l=>{var w,_;return o(),a("li",{key:l.word_id,class:"flex items-center justify-between rounded-md bg-gray-50 px-4 py-2"},[t("div",ne,[t("span",{class:d(l.correct?"font-medium text-green-600":"font-medium text-red-600")},n(((w=m.value[l.word_id])==null?void 0:w.word)||"Unknown"),3),t("span",ae,n(((_=m.value[l.word_id])==null?void 0:_.meaning)||""),1)]),t("span",{class:d(l.correct?"text-lg text-green-600":"text-lg text-red-600")},n(l.correct?"✓":"✗"),3)])}),128))])]),t("div",oe,[t("button",{onClick:r[0]||(r[0]=l=>k("game-completed")),class:"flex-1 rounded-lg bg-black px-4 py-2 text-center text-sm font-medium text-white transition hover:bg-gray-700"}," Pakete Dön "),t("button",{onClick:j,class:"flex-1 rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 transition hover:bg-gray-100"}," Tekrar Başla ")])])):(o(),a("div",{key:1,class:d(["relative w-full max-w-md rounded-2xl border border-gray-200 p-6 shadow-sm transition-colors duration-500",{"bg-white":!e.value.showAnswer,"bg-green-50":e.value.showAnswer&&e.value.isCorrect,"bg-red-50":e.value.showAnswer&&!e.value.isCorrect}])},[t("div",le,[t("div",{class:"duration-2000 h-full bg-black transition-all",style:W({width:`${e.value.progress}%`})},null,4)]),t("div",ue," Soru "+n(e.value.currentIndex+1)+" / "+n(e.value.totalQuestions),1),e.value.currentQuestion?(o(),a("div",ie,[t("div",null,[t("div",ce,[t("h2",de,' "'+n(e.value.currentQuestion.word)+'" kelimesinin anlamı nedir? ',1),e.value.showAnswer?v("",!0):(o(),a("button",{key:0,onClick:I,class:"rounded-lg border border-gray-200 px-3 py-1 text-sm text-gray-600 hover:bg-gray-50",disabled:e.value.hintShown&&(!e.value.currentQuestion.example_sentences||e.value.currentQuestion.example_sentences.length<=1)},n(e.value.hintShown?`İpucu (${e.value.currentHintIndex+1}/${((g=e.value.currentQuestion.example_sentences)==null?void 0:g.length)||0})`:"İpucu Göster"),9,ve))]),t("p",ge,"Kelime Türü: "+n(S(e.value.currentQuestion.type)),1)]),e.value.hintShown?(o(),a("div",me,[xe,e.value.currentQuestion.example_sentences&&e.value.currentQuestion.example_sentences.length>0?(o(),a("p",pe,n(e.value.currentQuestion.example_sentences[e.value.currentHintIndex].sentence),1)):(o(),a("p",he,"Bu kelime için örnek cümle bulunmuyor."))])):v("",!0),z(t("input",{"onUpdate:modelValue":r[1]||(r[1]=l=>e.value.userInput=l),disabled:e.value.showAnswer,type:"text",placeholder:"Çeviriyi girin",class:"w-full rounded-lg border border-gray-300 p-3 text-base text-gray-900 shadow-sm placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyup:M(h,["enter"])},null,40,we),[[G,e.value.userInput]]),e.value.showAnswer?(o(),a("div",{key:1,class:d(["mt-2 rounded-lg p-3",{"bg-green-100":e.value.isCorrect,"bg-red-100":!e.value.isCorrect}])},[t("p",{class:d(["text-sm",{"text-green-600":e.value.isCorrect,"text-red-600":!e.value.isCorrect}])},n(e.value.isCorrect?"Doğru!":"Yanlış!"),3),t("p",_e,"Doğru cevap: "+n(e.value.currentQuestion.meaning),1)],2)):v("",!0),e.value.showAnswer?v("",!0):(o(),a("button",{key:2,onClick:h,class:"w-full rounded-lg bg-black px-4 py-2 text-sm font-medium text-white shadow-md transition hover:bg-gray-700"}," Cevabı Gönder "))])):v("",!0)],2))])}}};export{ke as default};
