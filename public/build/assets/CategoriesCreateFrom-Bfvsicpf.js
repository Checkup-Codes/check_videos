import{l as p,T as z,i as w,L as B,x as F,g as r,o as n,b as e,e as P,j as m,h as d,q as b,u as a,t as _,O as S,F as j,m as D,D as E,f as U,P as $}from"./app-B_HoVpoV.js";/* empty css            */const q={class:"bg-base-100 mx-auto mt-10 w-full max-w-full px-5 lg:mt-0"},A={class:"container mx-auto p-4"},N={class:"card bg-base-100 shadow-xl"},H={class:"card-body"},O=e("h2",{class:"card-title text-primary"},"Yeni Kategori",-1),R=e("p",{class:"text-sm opacity-80"}," Kategorileriniz için kategoriler oluşturun. İsterseniz bir üst kategori seçebilirsiniz. ",-1),X=e("div",{class:"divider"},null,-1),G={class:"form-control w-full"},I=e("label",{class:"label"},[e("span",{class:"label-text"},"İsim")],-1),W={key:0,class:"label"},Y={class:"label-text-alt text-error"},J={class:"form-control mt-4 w-full"},Q=e("label",{class:"label"},[e("span",{class:"label-text"},"Slug")],-1),Z={key:0,class:"label"},ee={class:"label-text-alt text-error"},te={class:"form-control mt-4 w-full"},se=e("label",{class:"label"},[e("span",{class:"label-text"},"Üst Kategori")],-1),ae={class:"relative w-full"},le={key:0,class:"absolute z-30 mt-1 w-full"},oe={class:"menu bg-base-100 rounded-box border-base-300 max-h-60 w-full overflow-y-auto border p-2 shadow-lg"},re=["onMousedown"],ne={key:1,class:"mt-2 flex items-center"},ie={class:"badge badge-primary"},ue=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),ce=[ue],de={key:0,class:"label"},pe={class:"label-text-alt text-error"},_e={class:"form-control mt-4 w-full"},he=e("label",{class:"label"},[e("span",{class:"label-text"},"Durum")],-1),me=e("option",{value:"public"},"Açık",-1),ve=e("option",{value:"hidden"},"Gizli",-1),be=[me,ve],ge={key:0,class:"label"},fe={class:"label-text-alt text-error"},we={class:"card-actions mt-6 justify-end"},xe=["disabled"],ye={key:0,class:"loading loading-spinner loading-sm"},Me={__name:"CategoriesCreateFrom",props:{categories:{type:Array,default:()=>[]}},setup(x){const i=p(x.categories||[]),t=z({name:"",slug:"",parent_id:"",status:"public"}),u=p(""),h=p(""),c=p(!1),g=p(!1),f=p(null),y=()=>{clearTimeout(f.value),v.value.length>0&&(c.value=!0)},k=()=>{f.value=setTimeout(()=>{c.value=!1},100)},v=w(()=>!i.value||i.value.length===0?[]:u.value?i.value.filter(s=>s&&s.name&&s.name.toLowerCase().includes(u.value.toLowerCase())):i.value),C=w(()=>!t.name||!t.slug),K=()=>{t.parent_id="",u.value.length>=1&&(c.value=!0)},L=s=>{!s||!s.id||(t.parent_id=s.id,u.value=s.name,h.value=s.name,$(()=>{c.value=!1}))},M=()=>{t.parent_id="",u.value="",h.value=""};B(()=>t.name,s=>{s&&(t.slug=s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))});const T=()=>{t.post(route("categories.store")).then(()=>{console.log("Kategori başarıyla oluşturuldu"),t.reset(),u.value="",h.value=""}).catch(s=>{console.error("Kategori oluşturulurken hata:",s)})};F(()=>{(!i.value||i.value.length===0)&&V(),document.addEventListener("keydown",s=>{s.key==="Escape"&&(c.value=!1)})});const V=async()=>{g.value=!0;try{const s=await fetch(route("categories.index"),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!s.ok)throw new Error(`HTTP error: ${s.status}`);const l=await s.json();l&&l.categories&&(i.value=l.categories,console.log("Kategoriler yüklendi:",i.value.length))}catch(s){console.error("Kategoriler yüklenirken hata:",s)}finally{g.value=!1}};return(s,l)=>(n(),r("div",q,[e("div",A,[e("div",N,[e("div",H,[O,R,X,e("form",{onSubmit:P(T,["prevent"])},[e("div",G,[I,m(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=o=>a(t).name=o),class:"input input-bordered w-full",placeholder:"Kategori ismi"},null,512),[[b,a(t).name]]),a(t).errors.name?(n(),r("label",W,[e("span",Y,_(a(t).errors.name),1)])):d("",!0)]),e("div",J,[Q,m(e("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=o=>a(t).slug=o),class:"input input-bordered w-full",placeholder:"kategori-slug"},null,512),[[b,a(t).slug]]),a(t).errors.slug?(n(),r("label",Z,[e("span",ee,_(a(t).errors.slug),1)])):d("",!0)]),e("div",te,[se,e("div",ae,[m(e("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=o=>u.value=o),onFocus:y,onBlur:k,onInput:K,onKeydown:l[3]||(l[3]=S(o=>c.value=!1,["esc"])),class:"input input-bordered w-full",placeholder:"Üst kategori ara"},null,544),[[b,u.value]]),c.value&&v.value.length>0?(n(),r("div",le,[e("ul",oe,[(n(!0),r(j,null,D(v.value,o=>(n(),r("li",{key:o.id},[e("a",{onMousedown:Ce=>L(o),class:"hover:bg-primary hover:text-primary-content"},_(o.name),41,re)]))),128))])])):d("",!0),a(t).parent_id?(n(),r("div",ne,[e("div",ie,_(h.value),1),e("button",{type:"button",onClick:M,class:"btn btn-ghost btn-xs ml-2","aria-label":"Üst kategoriyi kaldır"},ce)])):d("",!0)]),a(t).errors.parent_id?(n(),r("label",de,[e("span",pe,_(a(t).errors.parent_id),1)])):d("",!0)]),e("div",_e,[he,m(e("select",{"onUpdate:modelValue":l[4]||(l[4]=o=>a(t).status=o),class:"select select-bordered w-full"},be,512),[[E,a(t).status]]),a(t).errors.status?(n(),r("label",ge,[e("span",fe,_(a(t).errors.status),1)])):d("",!0)]),e("div",we,[e("button",{type:"submit",class:"btn btn-primary",disabled:a(t).processing||C.value},[a(t).processing?(n(),r("span",ye)):d("",!0),U(" Kategori Oluştur ")],8,xe)])],32)])])])]))}};export{Me as default};
