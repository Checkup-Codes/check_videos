import{Q as N,l as v,i as S,x as D,P as H,c as T,o as a,w as y,b as e,g as l,t as d,h as _,n as P,f,u as x,a as A,k as $,N as W}from"./app-gEdnwVJa.js";import{_ as I}from"./ExcalidrawComponent-DpllIxZZ.js";import{_ as O}from"./CheckScreen-DIiVMeUW.js";/* empty css            */const R={class:"card border border-base-200 bg-base-100 shadow-md transition-all duration-200"},V={class:"card-body p-4 sm:p-6"},q={class:"mb-2 sm:mb-4"},G={class:"break-words text-xl font-bold sm:text-2xl"},U={class:"mt-2"},F={key:0,class:"badge badge-outline text-xs"},Q={class:"sticky bottom-0 left-0 right-0 z-10 -mx-4 mt-4 border-t border-base-200 bg-base-100 p-2 sm:static sm:z-0 sm:mx-0 sm:mt-0 sm:border-0 sm:bg-transparent sm:p-0"},J={class:"flex items-center justify-between"},K={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"mr-1 h-4 w-4"},X={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"},Y={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},Z={key:0,class:"flex gap-2"},ee=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"mr-1 h-4 w-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1),te=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"mr-1 h-4 w-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),se=e("div",{class:"divider my-2"},null,-1),oe={key:0,class:"min-h-[500px]"},ne={key:1,class:"content-container"},re={key:0,class:"alert alert-info mb-4 px-3 py-2 text-sm sm:mb-6 sm:p-4"},ae=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"h-5 w-5 shrink-0 stroke-current"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),le=["innerHTML"],ie={class:"text-base-content/70 mt-4 flex flex-col space-y-2 p-2 text-xs sm:mt-6 sm:flex-row sm:items-center sm:justify-between sm:space-y-0 sm:p-3 sm:text-sm"},ce={class:"flex flex-wrap items-center gap-2"},de={class:"flex items-center gap-1"},me=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",class:"h-3.5 w-3.5 sm:h-4 sm:w-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),ue={key:0,class:"whitespace-nowrap"},fe=Object.assign({name:"WriteByCategoryScreen"},{__name:"Screen",setup(he){const{props:u}=N();v(u.category||{});const o=v(u.write||{}),h=v(null),M=u.auth||{},r=v(!1),C=S(()=>{if(!o.value.content)return"";const s=new DOMParser().parseFromString(o.value.content,"text/html");return s.querySelectorAll("img").forEach((t,p)=>{const i=`content-img-${p}`;t.id=i,t.setAttribute("loading","lazy"),t.setAttribute("decoding","async"),t.setAttribute("importance","low"),!t.hasAttribute("width")&&!t.hasAttribute("height")&&(t.setAttribute("width","800"),t.setAttribute("height","600"));const c=s.createElement("div");c.className="img-skeleton-wrapper relative",c.style.width="100%",c.style.marginBottom="1rem",c.style.marginTop="1rem";const k=s.createElement("div");k.className="skeleton img-skeleton absolute inset-0 h-full w-full rounded-lg",k.id=`skeleton-${i}`;const b=t.parentNode;if(b){const w=s.createElement("div");w.className="img-wrapper relative",w.style.width="100%",t.style.opacity="0",t.style.transition="opacity 0.3s ease-in-out",t.setAttribute("onload",`
        this.style.opacity = '1';
        const skeleton = document.getElementById('skeleton-${i}');
        if (skeleton) skeleton.style.display = 'none';
      `),t.setAttribute("onerror",`
        const skeleton = document.getElementById('skeleton-${i}');
        if (skeleton) {
          skeleton.style.display = 'none';
          skeleton.insertAdjacentHTML('afterend', '<div class="text-error text-sm py-2">Görsel yüklenemedi</div>');
        }
        this.style.display = 'none';
      `);const E=t.cloneNode(!0);w.appendChild(E),c.appendChild(k),c.appendChild(w);try{b.insertBefore(c,t),b.removeChild(t)}catch(j){console.error("DOM manipülasyon hatası:",j)}}}),s.body.innerHTML}),g=n=>n?new Date(n).toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric"}):"";D(()=>{h.value&&B(),window.location.pathname.includes("categories")?r.value=!0:r.value=u.showDraw||!1;const n=new URLSearchParams(window.location.search);r.value=n.has("draw"),r.value||H(()=>{const s=new IntersectionObserver(t=>{t.forEach(p=>{if(p.isIntersecting){const i=p.target;i.setAttribute("loading","eager"),i.setAttribute("importance","high"),s.unobserve(i)}})},{rootMargin:"200px 0px",threshold:.01});document.querySelectorAll(".article-content img").forEach(t=>s.observe(t))})});const B=()=>{if(!h.value)return;h.value.querySelectorAll("a").forEach(s=>{const m=s.getAttribute("href");m&&!m.startsWith("/")&&!m.startsWith("#")&&(s.setAttribute("target","_blank"),s.setAttribute("rel","noopener noreferrer"))})},z=()=>{r.value=!r.value;const n=new URL(window.location.href);r.value?n.searchParams.set("draw","1"):n.searchParams.delete("draw"),window.history.pushState({},"",n)},L=n=>{confirm("Bu yazıyı silmek istediğinize emin misiniz?")&&W.delete(route("writes.destroy",n))};return(n,s)=>(a(),T(O,null,{default:y(()=>[e("div",R,[e("div",V,[e("div",q,[e("h1",G,d(o.value.title),1),e("div",U,[o.value.category?(a(),l("span",F,d(o.value.category.name),1)):_("",!0)])]),e("div",Q,[e("div",J,[e("button",{onClick:z,class:P(["btn btn-sm grow-0 sm:grow-0",r.value?"btn-primary":"btn-outline"])},[(a(),l("svg",K,[r.value?(a(),l("path",X)):(a(),l("path",Y))])),f(" "+d(r.value?"Metni Göster":"Çizim Göster"),1)],2),x(M).user?(a(),l("div",Z,[A(x($),{href:n.route("writes.edit",o.value.id),class:"btn btn-ghost btn-sm text-xs"},{default:y(()=>[ee,f(" Düzenle ")]),_:1},8,["href"]),e("button",{onClick:s[0]||(s[0]=m=>L(o.value.id)),class:"btn btn-ghost btn-sm text-xs text-error"},[te,f(" Sil ")])])):_("",!0)])]),se,r.value?(a(),l("div",oe,[A(I,{write:o.value},null,8,["write"])])):(a(),l("div",ne,[o.value.summary?(a(),l("div",re,[ae,e("span",null,d(o.value.summary),1)])):_("",!0),e("div",{class:"article-content ql-editor",ref_key:"contentRef",ref:h,innerHTML:C.value},null,8,le)])),e("div",ie,[e("div",null,"Oluşturma: "+d(g(o.value.created_at)),1),e("div",ce,[e("span",de,[me,f(" "+d(o.value.views_count)+" görüntüleme ",1)]),o.value.updated_at!==o.value.created_at?(a(),l("span",ue," Son güncelleme: "+d(g(o.value.updated_at)),1)):_("",!0)])])])])]),_:1}))}});export{fe as default};
