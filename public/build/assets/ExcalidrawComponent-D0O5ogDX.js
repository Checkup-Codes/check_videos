const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/main-xJT5jGAa.js","assets/index-yBjzXJbu.js","assets/index-fNjTmf9T.js","assets/index-CZwfcqFE.js","assets/ssr-DzRk3HnO.js","assets/ssr-DgFiKwLf.css","assets/client-B41foDqh.js"])))=>i.map(i=>d[i]);
import{a as m}from"./app-CJ9FyM0q.js";import{Q as k,r,s as D,m as C,c as h,o as v,h as b,a as o,t as T,u as I,F as M,x as O}from"./ssr-DzRk3HnO.js";const S={key:0,class:"rounded bg-green-200 p-3 text-green-800"},V={class:"bg-base-100"},A={class:"flex justify-between rounded-md px-1 py-2 text-base-content"},N={class:"ml-auto flex items-center justify-end space-x-2"},R=o("div",{id:"excalidraw-container",class:"h-[800px] w-full overflow-hidden rounded-lg border-2 border-base-300"},[o("div",{id:"excali",class:"h-full w-full"})],-1),P={__name:"ExcalidrawComponent",setup(B){const{props:l}=k(),c=r([]),i=r(""),n=r(l.write.write_draws),d=r(null),s=r(document.documentElement.getAttribute("data-theme")==="dark");D(s,e=>{d.value&&d.value.updateScene({theme:e?"dark":"light"})}),C(()=>{const e=new MutationObserver(t=>{t.forEach(a=>{a.attributeName==="data-theme"&&(s.value=document.documentElement.getAttribute("data-theme")==="dark")})});return e.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),g(),()=>e.disconnect()});const g=()=>{m(async()=>{const{Excalidraw:e}=await import("./main-xJT5jGAa.js").then(t=>t.m);return{Excalidraw:e}},__vite__mapDeps([0,1,2])).then(({Excalidraw:e})=>{m(()=>import("./index-CZwfcqFE.js").then(t=>t.i),__vite__mapDeps([3,4,5,1])).then(t=>{m(()=>import("./client-B41foDqh.js").then(a=>a.c),__vite__mapDeps([6,4,5,2,1])).then(a=>{const w=document.getElementById("excali"),f=a.createRoot(w),x=n.value.length>0?{elements:JSON.parse(n.value[0].elements),scrollToContent:!0,theme:s.value?"dark":"light"}:{elements:[],scrollToContent:!0,theme:s.value?"dark":"light"},E=u=>{c.value=u},y=t.createElement(e,{initialData:x,onChange:E,viewModeEnabled:!l.auth.user,theme:s.value?"dark":"light",onMount:u=>{d.value=u}});f.render(y)})})})},p=()=>{const e=c.value.length>0?c.value:[],t=JSON.stringify(e);O.post(`/writes/${l.write.id}/draw`,{elements:t,version:1}).then(a=>{_("Canvas durumu başarıyla kaydedildi!"),n.value.length>0?n.value[0]=a.data:n.value.push(a.data)}).catch(()=>{_("Kaydetme sırasında bir hata oluştu. Lütfen tekrar deneyin.")})},_=e=>{i.value=e,setTimeout(()=>{i.value=""},3e3)};return(e,t)=>(v(),h(M,null,[i.value?(v(),h("div",S,T(i.value),1)):b("",!0),o("div",V,[o("div",A,[o("div",N,[I(l).auth.user?(v(),h("button",{key:0,onClick:p,class:"btn btn-primary btn-sm"},"Kaydet")):b("",!0)])]),R])],64))}};export{P as _};
