import{Q as K,b as U,T as W,g as c,c as a,f as z,u as d,Z as J,w as $,a as t,e as E,h as M,j as i,o as n,F as L,l as R,i as b,E as D,k as y,n as x,t as u,p as O,R as H,m as P}from"./ssr-COJdwiSz.js";import{_ as Q}from"./CheckScreen-uC_pBN3G.js";const Z={class:"space-y-6 py-6"},q={class:"rounded-xl bg-card p-6 ring-1 ring-border/50"},X={class:"space-y-4"},ee={class:"flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-border px-6 py-8 transition-colors hover:border-primary"},te={key:0,class:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4"},se=["src"],re=["onClick"],oe={class:"rounded-xl bg-card p-6 ring-1 ring-border/50"},le={class:"flex gap-4"},ne={class:"flex cursor-pointer items-center gap-2"},ae={class:"flex cursor-pointer items-center gap-2"},ie={class:"rounded-xl bg-card p-6 ring-1 ring-border/50"},de={class:"mb-4 flex items-center justify-between"},ue={key:0,class:"rounded-lg border border-dashed border-border py-8 text-center"},me={key:1,class:"space-y-3"},ce={class:"min-w-0 flex-1"},pe={class:"font-medium text-foreground"},ve={key:0,class:"mt-1 truncate text-sm text-muted-foreground"},ge=["href"],fe={key:2,class:"mt-2 text-xs text-destructive"},be={key:0},xe={key:1},ke={key:2},he={class:"ml-4 flex items-center gap-2"},ye=["onClick"],we=["onClick"],_e={key:2,class:"mt-4 rounded-lg bg-destructive/10 p-3 text-sm text-destructive"},Ce={class:"flex items-center justify-end gap-3"},je=["disabled"],ze={class:"w-full max-w-md rounded-xl bg-card p-6 shadow-xl"},Me={class:"mb-4 flex items-center justify-between"},Le={class:"text-lg font-semibold text-foreground"},Pe={class:"space-y-4"},Be={key:0,class:"text-destructive"},Ve={class:"mt-6 flex justify-end gap-3"},Ue=["disabled"],$e={class:"w-full max-w-sm rounded-xl bg-card p-6 shadow-xl"},Ee={class:"mb-4 text-sm text-muted-foreground"},Re={class:"flex justify-end gap-3"},Ge={__name:"CreateWorkspace",setup(De){const A=K(),G=U(()=>{var o,e,s;return((s=(e=(o=A.props)==null?void 0:o.screen)==null?void 0:e.seo)==null?void 0:s.title)||"Yeni Çalışma Alanı"}),l=W({images:[],status:"published",products:[]}),g=c([]),w=c(!1),p=c(null),r=c({name:"",features:"",link:""}),f=c(!1),k=c(null),_=c(""),v=o=>{if(!o)return!0;try{return new URL(o),!0}catch{return!1}},C=o=>{const e=l.products[o];return e.name.length>255||e.link&&!v(e.link)||e.link&&e.link.length>500},j=U(()=>l.products.some((o,e)=>C(e))),N=o=>{const e=Array.from(o.target.files);l.images=[...l.images,...e],g.value=[...g.value,...e.map(s=>URL.createObjectURL(s))]},T=o=>{l.images.splice(o,1),g.value.splice(o,1)},B=(o=null)=>{p.value=o,o!==null?r.value={...l.products[o]}:r.value={name:"",features:"",link:""},w.value=!0},h=()=>{w.value=!1,p.value=null,r.value={name:"",features:"",link:""}},F=()=>{!r.value.name||r.value.name.length>255||r.value.link&&(!v(r.value.link)||r.value.link.length>500)||(p.value!==null?l.products[p.value]={...r.value}:l.products.push({...r.value}),h())},S=o=>{k.value=o,_.value=l.products[o].name,f.value=!0},Y=()=>{k.value!==null&&l.products.splice(k.value,1),f.value=!1,k.value=null,_.value=""},I=()=>{if(j.value)return;const o=new FormData;l.images.forEach((e,s)=>o.append(`images[${s}]`,e)),o.append("status",l.status),l.products.forEach((e,s)=>{o.append(`products[${s}][name]`,e.name),e.features&&o.append(`products[${s}][features]`,e.features),e.link&&o.append(`products[${s}][link]`,e.link)}),l.transform(()=>o).post("/workspace",{forceFormData:!0})};return(o,e)=>(n(),a(L,null,[z(d(J),{title:G.value},null,8,["title"]),z(Q,null,{default:$(()=>[t("div",Z,[e[23]||(e[23]=t("div",null,[t("h1",{class:"text-2xl font-bold text-foreground"},"Yeni Çalışma Alanı"),t("p",{class:"mt-1 text-sm text-muted-foreground"},"Çalışma alanınızı ve ürünlerinizi ekleyin")],-1)),t("form",{onSubmit:M(I,["prevent"]),class:"space-y-6"},[t("div",q,[e[12]||(e[12]=t("h2",{class:"mb-4 text-lg font-semibold text-foreground"},"Görseller",-1)),t("div",X,[t("label",ee,[e[8]||(e[8]=t("svg",{class:"mb-2 h-10 w-10 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e[9]||(e[9]=t("span",{class:"text-sm font-medium text-foreground"},"Resim Yükle",-1)),e[10]||(e[10]=t("span",{class:"mt-1 text-xs text-muted-foreground"},"PNG, JPG, WEBP - max 5MB",-1)),t("input",{type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:N},null,32)]),g.value.length>0?(n(),a("div",te,[(n(!0),a(L,null,R(g.value,(s,m)=>(n(),a("div",{key:m,class:"group relative aspect-video overflow-hidden rounded-lg ring-1 ring-border"},[t("img",{src:s,alt:"Preview",class:"h-full w-full object-cover"},null,8,se),t("button",{type:"button",onClick:V=>T(m),class:"absolute right-2 top-2 rounded-full bg-destructive p-1.5 text-destructive-foreground opacity-0 transition-opacity group-hover:opacity-100"},[...e[11]||(e[11]=[t("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,re)]))),128))])):i("",!0)])]),t("div",oe,[e[15]||(e[15]=t("h2",{class:"mb-4 text-lg font-semibold text-foreground"},"Durum",-1)),t("div",le,[t("label",ne,[b(t("input",{type:"radio","onUpdate:modelValue":e[0]||(e[0]=s=>d(l).status=s),value:"published",class:"h-4 w-4 border-input text-primary focus:ring-primary"},null,512),[[D,d(l).status]]),e[13]||(e[13]=t("span",{class:"text-sm text-foreground"},"Yayınla",-1))]),t("label",ae,[b(t("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=s=>d(l).status=s),value:"draft",class:"h-4 w-4 border-input text-primary focus:ring-primary"},null,512),[[D,d(l).status]]),e[14]||(e[14]=t("span",{class:"text-sm text-foreground"},"Taslak",-1))])])]),t("div",ie,[t("div",de,[e[17]||(e[17]=t("h2",{class:"text-lg font-semibold text-foreground"},"Ürünler",-1)),t("button",{type:"button",onClick:e[2]||(e[2]=s=>B()),class:"inline-flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90"},[...e[16]||(e[16]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),y(" Ürün Ekle ",-1)])])]),d(l).products.length===0?(n(),a("div",ue,[...e[18]||(e[18]=[t("p",{class:"text-sm text-muted-foreground"},"Henüz ürün eklenmedi",-1)])])):(n(),a("div",me,[(n(!0),a(L,null,R(d(l).products,(s,m)=>(n(),a("div",{key:m,class:x(["flex items-center justify-between rounded-lg border border-border bg-background p-4",{"border-destructive":C(m)}])},[t("div",ce,[t("h3",pe,u(s.name),1),s.features?(n(),a("p",ve,u(s.features),1)):i("",!0),s.link?(n(),a("a",{key:1,href:s.link,target:"_blank",class:"mt-1 inline-flex items-center gap-1 text-xs text-primary hover:underline"},[...e[19]||(e[19]=[t("span",null,"Link",-1),t("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)])],8,ge)):i("",!0),C(m)?(n(),a("div",fe,[s.name.length>255?(n(),a("p",be,"İsim 255 karakteri aşamaz ("+u(s.name.length)+"/255)",1)):i("",!0),s.link&&!v(s.link)?(n(),a("p",xe,"Geçersiz URL formatı")):i("",!0),s.link&&s.link.length>500?(n(),a("p",ke,"Link 500 karakteri aşamaz ("+u(s.link.length)+"/500)",1)):i("",!0)])):i("",!0)]),t("div",he,[t("button",{type:"button",onClick:V=>B(m),class:"rounded-lg p-2 text-muted-foreground hover:bg-accent hover:text-foreground"},[...e[20]||(e[20]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,ye),t("button",{type:"button",onClick:V=>S(m),class:"rounded-lg p-2 text-destructive hover:bg-destructive/10"},[...e[21]||(e[21]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,we)])],2))),128))])),j.value?(n(),a("div",_e," Bazı ürünlerde hata var. Lütfen düzeltin. ")):i("",!0)]),t("div",Ce,[z(d(O),{href:"/workspace",class:"rounded-lg border border-border px-4 py-2 text-sm font-medium text-foreground hover:bg-accent"},{default:$(()=>[...e[22]||(e[22]=[y(" İptal ",-1)])]),_:1}),t("button",{type:"submit",disabled:d(l).processing||j.value,class:"rounded-lg bg-primary px-6 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 disabled:opacity-50"},u(d(l).processing?"Kaydediliyor...":"Kaydet"),9,je)])],32)]),(n(),E(H,{to:"body"},[w.value?(n(),a("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:M(h,["self"])},[t("div",ze,[t("div",Me,[t("h3",Le,u(p.value!==null?"Ürünü Düzenle":"Yeni Ürün"),1),t("button",{onClick:h,class:"text-muted-foreground hover:text-foreground"},[...e[24]||(e[24]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Pe,[t("div",null,[e[25]||(e[25]=t("label",{class:"mb-1 block text-sm font-medium text-foreground"},[y("İsim "),t("span",{class:"text-destructive"},"*")],-1)),b(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>r.value.name=s),type:"text",maxlength:"255",placeholder:"Ürün adı",class:x(["w-full rounded-lg border border-input bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",{"border-destructive":r.value.name.length>255}])},null,2),[[P,r.value.name]]),t("p",{class:x(["mt-1 text-xs",r.value.name.length>255?"text-destructive":"text-muted-foreground"])},u(r.value.name.length)+"/255 ",3)]),t("div",null,[e[26]||(e[26]=t("label",{class:"mb-1 block text-sm font-medium text-foreground"},"Özellikler",-1)),b(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>r.value.features=s),rows:"3",placeholder:"Ürün özellikleri...",class:"w-full rounded-lg border border-input bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[P,r.value.features]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"mb-1 block text-sm font-medium text-foreground"},"Satın Alma Linki",-1)),b(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>r.value.link=s),type:"url",maxlength:"500",placeholder:"https://...",class:x(["w-full rounded-lg border border-input bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",{"border-destructive":r.value.link&&!v(r.value.link)||r.value.link.length>500}])},null,2),[[P,r.value.link]]),t("p",{class:x(["mt-1 text-xs",r.value.link.length>500?"text-destructive":"text-muted-foreground"])},[y(u(r.value.link.length)+"/500 ",1),r.value.link&&!v(r.value.link)?(n(),a("span",Be," - Geçersiz URL")):i("",!0)],2)])]),t("div",Ve,[t("button",{onClick:h,class:"rounded-lg border border-border px-4 py-2 text-sm font-medium text-foreground hover:bg-accent"}," İptal "),t("button",{onClick:F,disabled:!r.value.name||r.value.name.length>255||r.value.link&&(!v(r.value.link)||r.value.link.length>500),class:"rounded-lg bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 disabled:opacity-50"},u(p.value!==null?"Güncelle":"Ekle"),9,Ue)])])])):i("",!0)])),(n(),E(H,{to:"body"},[f.value?(n(),a("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:e[7]||(e[7]=M(s=>f.value=!1,["self"]))},[t("div",$e,[e[28]||(e[28]=t("h3",{class:"mb-2 text-lg font-semibold text-foreground"},"Ürünü Sil",-1)),t("p",Ee,' "'+u(_.value)+'" ürününü silmek istediğinizden emin misiniz? ',1),t("div",Re,[t("button",{onClick:e[6]||(e[6]=s=>f.value=!1),class:"rounded-lg border border-border px-4 py-2 text-sm font-medium text-foreground hover:bg-accent"}," İptal "),t("button",{onClick:Y,class:"rounded-lg bg-destructive px-4 py-2 text-sm font-medium text-destructive-foreground hover:bg-destructive/90"}," Sil ")])])])):i("",!0)]))]),_:1})],64))}};export{Ge as default};
