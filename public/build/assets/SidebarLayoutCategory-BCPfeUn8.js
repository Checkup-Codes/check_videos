import{B as R,Q as j,b as p,W as I,g,y as W,s as G,H as x,X as H,Y as K,z as M,e as k,w as m,a as c,f as u,u as L,p as E,n as h,c as T,j as b,o as v,t as O}from"./ssr-AmW-FCLL.js";import{_ as Q,a as U}from"./SubSidebarScreen-BebsfVnG.js";import X from"./CategoryTree-DIf2AqAT.js";import{u as Y}from"./useSidebar-DMREIepV.js";import q from"./IconMenu-CSafTLuM.js";import F from"./IconFolder-DZ_syNTq.js";import J from"./IconChevronDown-Dn8wKxFG.js";import{_ as Z}from"./app-C5lgqGcU.js";import"./IconLock-Dg6tD8WK.js";import"./IconLink-BQbtB0B0.js";/* empty css            */const ee={class:"relative z-10 shrink-0 border-b border-border bg-background p-2"},te={class:"flex items-center justify-between gap-2"},se={class:"flex items-center gap-1"},re={key:0},oe={key:0},ae={class:"flex items-center gap-1"},le=["title"],ne={class:"text-xs"},ie=Object.assign({name:"SidebarLayoutCategory"},{__name:"SidebarLayoutCategory",emits:["update:isNarrow"],setup(ce,{emit:$}){Y();const r=R(),o=j();p(()=>!!(o.props.auth&&o.props.auth.user));const y=p(()=>!1),d=I("categories",[]),N=p(()=>{const e=(d==null?void 0:d.value)??d;return e&&Array.isArray(e)&&e.length>0?e:o.props.categories&&Array.isArray(o.props.categories)&&o.props.categories.length>0?o.props.categories:[]}),a=p(()=>r.getters["CategorySidebar/collapsedSet"].size===0),B=()=>"",P=g(!0),V=g(null),l=g(r.getters["Writes/isCollapsed"]),n=g(null),z=$;W(l,e=>{z("update:isNarrow",e)});const C=e=>{if(!e||!Array.isArray(e)||e.length===0)return[];let t=[];return e.forEach(s=>{s&&s.id&&(t.push(s.id),s.children&&Array.isArray(s.children)&&s.children.length>0&&(t=t.concat(C(s.children))))}),t},D=()=>{const e=N.value;if(!e||e.length===0){console.warn("Categories not available for toggle");return}if(a.value){const t=C(e);t.length>0&&r.dispatch("CategorySidebar/collapseAll",t)}else r.dispatch("CategorySidebar/expandAll")};let i=null;const f=()=>{var e,t,s;return(t=(e=n.value)==null?void 0:e.$el)!=null&&t.value?n.value.$el.value:(s=n.value)!=null&&s.$el?n.value.$el:n.value},_=()=>{const e=f();if(e){const t=e.scrollTop||0;r.dispatch("CategorySidebar/setScrollPosition",t)}},S=()=>{x(()=>{const e=f();if(e){const t=r.getters["CategorySidebar/scrollPosition"];t>0&&(e.scrollTop=t)}})},w=()=>{const e=f();e&&!i&&(i=()=>_(),e.addEventListener("scroll",i,{passive:!0}))},A=()=>{const e=f();e&&i&&(e.removeEventListener("scroll",i),i=null)};return G(()=>{l.value=r.getters["Writes/isCollapsed"],x(()=>{w(),S()})}),H(()=>{x(()=>{w(),S()})}),K(()=>{_(),A()}),M(()=>{_(),A()}),(e,t)=>(v(),k(U,{isNarrow:l.value},{default:m(()=>[c("div",ee,[c("div",te,[c("div",se,[u(L(E),{href:e.route("writes.index"),class:h(["inline-flex h-6 items-center gap-1 rounded px-2 text-xs transition-colors",y.value?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"]),title:"Liste görünümü"},{default:m(()=>[u(q,{class:"h-3 w-3"}),l.value?b("",!0):(v(),T("span",re,"Liste"))]),_:1},8,["href","class"]),u(L(E),{href:e.route("categories.index"),class:h(["inline-flex h-6 items-center gap-1 rounded px-2 text-xs transition-colors",y.value?"text-muted-foreground hover:bg-accent hover:text-accent-foreground":"bg-accent text-accent-foreground"]),title:"Kategori görünümü"},{default:m(()=>[u(F,{class:"h-3 w-3"}),l.value?b("",!0):(v(),T("span",oe,"Kategori"))]),_:1},8,["href","class"])]),c("div",ae,[c("button",{onClick:D,class:h(["inline-flex h-6 items-center gap-1 rounded px-2 text-xs text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground",{"bg-accent text-accent-foreground":a.value}]),title:a.value?"Tümünü Daralt":"Tümünü Genişlet"},[u(J,{class:h(["h-3 w-3 transition-transform duration-200",{"rotate-180":a.value}])},null,8,["class"]),c("span",ne,O(a.value?"Daralt":"Genişlet"),1)],10,le)])])]),u(Q,{ref_key:"scrollableRef",ref:n,class:"sidebar-content-embedded min-h-0 flex-1",infoClass:"flex-1 min-h-0 overflow-y-auto overscroll-none"},{default:m(()=>[P.value?(v(),k(X,{key:0,ref_key:"categoryTreeRef",ref:V,getLinkClasses:B,expandAll:a.value,isCollapsed:l.value},null,8,["expandAll","isCollapsed"])):b("",!0)]),_:1},512)]),_:1},8,["isNarrow"]))}}),ye=Z(ie,[["__scopeId","data-v-50262e05"]]);export{ye as default};
