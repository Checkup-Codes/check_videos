import{Q as F,l as p,T as P,i as C,L as j,x as E,g as n,o as r,b as e,e as $,j as v,h as _,q as f,u as a,t as m,O as U,F as q,m as N,D as A,f as G,P as H}from"./app-B_HoVpoV.js";/* empty css            */const R={class:"bg-base-100 mx-auto mt-10 w-full max-w-full px-5 lg:mt-0"},X={class:"container mx-auto p-4"},I={class:"card bg-base-100 shadow-xl"},O={class:"card-body"},Q=e("h2",{class:"card-title text-primary"},"Kategori Düzenle",-1),W=e("p",{class:"text-sm opacity-80"}," Kategorileriniz için düzenlemeler yapabilirsiniz. İsterseniz bir üst kategori seçebilirsiniz. ",-1),J=e("div",{class:"divider"},null,-1),Y={class:"form-control w-full"},Z=e("label",{class:"label"},[e("span",{class:"label-text"},"İsim")],-1),ee={key:0,class:"label"},te={class:"label-text-alt text-error"},se={class:"form-control mt-4 w-full"},le=e("label",{class:"label"},[e("span",{class:"label-text"},"Slug")],-1),ae={key:0,class:"label"},oe={class:"label-text-alt text-error"},ne={class:"form-control mt-4 w-full"},re=e("label",{class:"label"},[e("span",{class:"label-text"},"Üst Kategori")],-1),ie={class:"relative w-full"},ue={key:0,class:"absolute z-30 mt-1 w-full"},ce={class:"menu bg-base-100 rounded-box border-base-300 max-h-60 w-full overflow-y-auto border p-2 shadow-lg"},de=["onMousedown"],pe={key:1,class:"mt-2 flex items-center"},_e={class:"badge badge-primary"},me=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),ge=[me],ve={key:0,class:"label"},be={class:"label-text-alt text-error"},he={class:"form-control mt-4 w-full"},fe=e("label",{class:"label"},[e("span",{class:"label-text"},"Durum")],-1),ye=e("option",{value:"public"},"Açık",-1),we=e("option",{value:"hidden"},"Gizli",-1),xe=[ye,we],ke={key:0,class:"label"},Ce={class:"label-text-alt text-error"},Ke={class:"mt-6 flex justify-between"},ze=["disabled"],Le={key:0,class:"loading loading-spinner loading-sm"},Ve={__name:"CategoriesEditFrom",setup(Me){var x,k;const{props:g}=F(),u=p(g.categories||[]),c=p(g.category||{}),s=P({name:c.value.name||"",slug:c.value.slug||"",parent_id:c.value.parent_id||null,status:c.value.status||"public"}),i=p(((x=g.category.parent)==null?void 0:x.name)||""),b=p(((k=g.category.parent)==null?void 0:k.name)||""),d=p(!1),y=p(!1),w=p(null),K=()=>{clearTimeout(w.value),h.value.length>0&&(d.value=!0)},z=()=>{w.value=setTimeout(()=>{d.value=!1},100)},h=C(()=>!u.value||u.value.length===0?[]:u.value.filter(t=>t&&t.id!==c.value.id&&(!i.value||t.name&&t.name.toLowerCase().includes(i.value.toLowerCase())))),L=C(()=>!s.name||!s.slug),M=()=>{i.value.length>=1?d.value=!0:i.value===""&&(s.parent_id=null)},T=t=>{!t||!t.id||t.id===c.value.id||(s.parent_id=t.id,i.value=t.name,b.value=t.name,H(()=>{d.value=!1}))},B=()=>{s.parent_id=null,i.value="",b.value=""};j(()=>s.name,t=>{t&&(s.slug=t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))});const S=()=>{s.put(route("categories.update",{category:c.value.id})).then(()=>{console.log("Kategori başarıyla güncellendi")}).catch(t=>{console.error("Kategori güncellenirken hata:",t)})},V=t=>{confirm("Bu kategoriyi silmek istediğinize emin misiniz?")&&s.delete(route("categories.destroy",{category:t})).then(()=>{console.log("Kategori başarıyla silindi")}).catch(l=>{console.error("Kategori silinirken hata:",l)})};E(()=>{(!u.value||u.value.length===0)&&D(),document.addEventListener("keydown",t=>{t.key==="Escape"&&(d.value=!1)})});const D=async()=>{y.value=!0;try{const t=await fetch(route("categories.index"),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw new Error(`HTTP error: ${t.status}`);const l=await t.json();l&&l.categories&&(u.value=l.categories,console.log("Kategoriler yüklendi:",u.value.length))}catch(t){console.error("Kategoriler yüklenirken hata:",t)}finally{y.value=!1}};return(t,l)=>(r(),n("div",R,[e("div",X,[e("div",I,[e("div",O,[Q,W,J,e("form",{onSubmit:$(S,["prevent"])},[e("div",Y,[Z,v(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=o=>a(s).name=o),class:"input input-bordered w-full",placeholder:"Kategori ismi"},null,512),[[f,a(s).name]]),a(s).errors.name?(r(),n("label",ee,[e("span",te,m(a(s).errors.name),1)])):_("",!0)]),e("div",se,[le,v(e("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=o=>a(s).slug=o),class:"input input-bordered w-full",placeholder:"kategori-slug"},null,512),[[f,a(s).slug]]),a(s).errors.slug?(r(),n("label",ae,[e("span",oe,m(a(s).errors.slug),1)])):_("",!0)]),e("div",ne,[re,e("div",ie,[v(e("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=o=>i.value=o),onFocus:K,onBlur:z,onInput:M,onKeydown:l[3]||(l[3]=U(o=>d.value=!1,["esc"])),class:"input input-bordered w-full",placeholder:"Üst kategori ara"},null,544),[[f,i.value]]),d.value&&h.value.length>0?(r(),n("div",ue,[e("ul",ce,[(r(!0),n(q,null,N(h.value,o=>(r(),n("li",{key:o.id},[e("a",{onMousedown:Te=>T(o),class:"hover:bg-primary hover:text-primary-content"},m(o.name),41,de)]))),128))])])):_("",!0),a(s).parent_id?(r(),n("div",pe,[e("div",_e,m(b.value),1),e("button",{type:"button",onClick:B,class:"btn btn-ghost btn-xs ml-2","aria-label":"Üst kategoriyi kaldır"},ge)])):_("",!0)]),a(s).errors.parent_id?(r(),n("label",ve,[e("span",be,m(a(s).errors.parent_id),1)])):_("",!0)]),e("div",he,[fe,v(e("select",{"onUpdate:modelValue":l[4]||(l[4]=o=>a(s).status=o),class:"select select-bordered w-full"},xe,512),[[A,a(s).status]]),a(s).errors.status?(r(),n("label",ke,[e("span",Ce,m(a(s).errors.status),1)])):_("",!0)]),e("div",Ke,[e("button",{type:"button",onClick:l[5]||(l[5]=o=>V(a(g).category.id)),class:"btn btn-error btn-outline"}," Kategoriyi Sil "),e("button",{type:"submit",class:"btn btn-primary",disabled:a(s).processing||L.value},[a(s).processing?(r(),n("span",Le)):_("",!0),G(" Kategoriyi Güncelle ")],8,ze)])],32)])])])]))}};export{Ve as default};
