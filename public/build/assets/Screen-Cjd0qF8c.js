import{Q as j,l as k,i as z,x as D,P as R,c as $,o as i,w as A,b as t,g as c,t as u,h as g,n as I,f as M,u as C,a as E,k as P,N as O}from"./app-DQVzeCX6.js";import{_ as W}from"./ExcalidrawComponent-CCBZsX4G.js";import{_ as F}from"./CheckScreen-jL90K63y.js";/* empty css            */const V={class:"card border border-base-200 bg-base-100 shadow-md transition-all duration-200"},G={class:"card-body p-4 sm:p-6"},U={class:"mb-2 sm:mb-4"},Q={class:"break-words text-xl font-bold sm:text-2xl"},J={class:"mt-2"},K={key:0,class:"badge badge-outline text-xs"},X={class:"sticky"},Y={class:"flex items-center justify-between"},Z={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"mr-1 h-4 w-4"},ee={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"},te={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},se={key:0,class:"flex gap-2"},oe=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"mr-1 h-4 w-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1),re=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"mr-1 h-4 w-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),ne=[re],le=t("div",{class:"divider my-1"},null,-1),ae={key:0,class:"min-h-[500px]"},ie={key:1,class:"content-container"},ce={key:0,class:"alert alert-info mb-4 px-3 py-2 text-sm sm:mb-6 sm:p-4"},de=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"h-5 w-5 shrink-0 stroke-current"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),ue=["innerHTML"],me={class:"text-base-content/70 mt-4 flex flex-col space-y-2 p-2 text-xs sm:mt-6 sm:flex-row sm:items-center sm:justify-between sm:space-y-0 sm:p-3 sm:text-sm"},he={class:"flex flex-wrap items-center gap-2"},pe={class:"flex items-center gap-1"},ye=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",class:"h-3.5 w-3.5 sm:h-4 sm:w-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),we={key:0,class:"whitespace-nowrap"},xe=Object.assign({name:"WriteByCategoryScreen"},{__name:"Screen",setup(ve){const{props:p}=j();k(p.category||{});const r=k(p.write||{}),y=k(null),L=p.auth||{},a=k(!1),B=z(()=>{if(!r.value.content)return"";const s=new DOMParser().parseFromString(r.value.content,"text/html");return s.querySelectorAll("img").forEach((e,d)=>{const h=`content-img-${d}`;e.id=h,e.setAttribute("loading","lazy"),e.setAttribute("decoding","async"),e.setAttribute("importance","low"),!e.hasAttribute("width")&&!e.hasAttribute("height")&&(e.setAttribute("width","800"),e.setAttribute("height","600"));const o=s.createElement("div");o.className="img-skeleton-wrapper relative",o.style.width="100%",o.style.marginBottom="1rem",o.style.marginTop="1rem";const l=s.createElement("div");l.className="skeleton img-skeleton absolute inset-0 h-full w-full rounded-lg",l.id=`skeleton-${h}`;const _=e.parentNode;if(_){const f=s.createElement("div");f.className="img-wrapper relative",f.style.width="100%",e.style.opacity="0",e.style.transition="opacity 0.3s ease-in-out",e.setAttribute("onload",`
        this.style.opacity = '1';
        const skeleton = document.getElementById('skeleton-${h}');
        if (skeleton) skeleton.style.display = 'none';
      `),e.setAttribute("onerror",`
        const skeleton = document.getElementById('skeleton-${h}');
        if (skeleton) {
          skeleton.style.display = 'none';
          skeleton.insertAdjacentHTML('afterend', '<div class="text-error text-sm py-2">Görsel yüklenemedi</div>');
        }
        this.style.display = 'none';
      `);const H=e.cloneNode(!0);f.appendChild(H),o.appendChild(l),o.appendChild(f);try{_.insertBefore(o,e),_.removeChild(e)}catch(N){console.error("DOM manipülasyon hatası:",N)}}}),s.querySelectorAll("li").forEach(e=>{e.hasAttribute("data-list")||(e.parentElement&&e.parentElement.tagName==="OL"?e.setAttribute("data-list","ordered"):e.setAttribute("data-list","bullet"));const d=e.querySelector(".ql-ui");d&&d.setAttribute("contenteditable","false")}),s.querySelectorAll("p").forEach(e=>{(e.innerHTML.trim()==="<br>"||e.innerHTML.trim()===""||!e.innerHTML.trim())&&(e.innerHTML="&nbsp;",e.style.marginBottom="1rem",e.style.height="1.5rem")}),s.querySelectorAll(".ql-code-block-container").forEach(e=>{e.setAttribute("class","mockup-code w-full");const d=e.querySelector(".ql-code-block");if(d){const h=d.textContent||d.innerText;e.innerHTML="";const o=s.createElement("pre"),l=s.createElement("code");l.textContent=h,o.appendChild(l),o.style.fontFamily="ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace",o.style.margin="0",o.style.padding="0.75rem",o.style.whiteSpace="pre-wrap",o.style.wordBreak="break-word",o.setAttribute("data-prefix","$"),l.style.fontFamily="ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace",l.style.color="inherit",l.style.background="transparent",l.style.padding="0",l.style.margin="0",l.style.border="none",e.style.backgroundColor="hsl(var(--n))",e.style.color="hsl(var(--nc))",e.style.borderRadius="0.5rem",e.style.margin="1.5rem 0",e.style.padding="1rem",e.style.width="100%",e.style.position="relative",e.style.overflow="hidden",e.appendChild(o)}}),s.querySelectorAll('[style*="color"], [style*="background-color"]').forEach(e=>{e.style.color&&e.classList.add("quill-colored-text"),e.style.backgroundColor&&e.classList.add("quill-colored-background")}),s.body.innerHTML}),x=n=>n?new Date(n).toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric"}):"";D(()=>{y.value&&S(),window.location.pathname.includes("categories")?a.value=!0:a.value=p.showDraw||!1;const n=new URLSearchParams(window.location.search);a.value=n.has("draw"),a.value||R(()=>{const s=new IntersectionObserver(w=>{w.forEach(b=>{if(b.isIntersecting){const v=b.target;v.setAttribute("loading","eager"),v.setAttribute("importance","high"),s.unobserve(v)}})},{rootMargin:"200px 0px",threshold:.01});document.querySelectorAll(".article-content img").forEach(w=>s.observe(w))})});const S=()=>{if(!y.value)return;y.value.querySelectorAll("a").forEach(s=>{const m=s.getAttribute("href");m&&!m.startsWith("/")&&!m.startsWith("#")&&(s.setAttribute("target","_blank"),s.setAttribute("rel","noopener noreferrer"))})},q=()=>{a.value=!a.value;const n=new URL(window.location.href);a.value?n.searchParams.set("draw","1"):n.searchParams.delete("draw"),window.history.pushState({},"",n)},T=n=>{confirm("Bu yazıyı silmek istediğinize emin misiniz?")&&O.delete(route("writes.destroy",n))};return(n,s)=>(i(),$(F,null,{default:A(()=>[t("div",V,[t("div",G,[t("div",U,[t("h1",Q,u(r.value.title),1),t("div",J,[r.value.category?(i(),c("span",K,u(r.value.category.name),1)):g("",!0)])]),t("div",X,[t("div",Y,[t("button",{onClick:q,class:I(["btn btn-sm grow-0 sm:grow-0",a.value?"btn-primary":"btn-outline"])},[(i(),c("svg",Z,[a.value?(i(),c("path",ee)):(i(),c("path",te))])),M(" "+u(a.value?"Metni Göster":"Çizimi Göster"),1)],2),C(L).user?(i(),c("div",se,[E(C(P),{href:n.route("writes.edit",r.value.id),class:"btn btn-ghost btn-sm text-xs"},{default:A(()=>[oe]),_:1},8,["href"]),t("button",{onClick:s[0]||(s[0]=m=>T(r.value.id)),class:"btn btn-ghost btn-sm text-xs text-error"},ne)])):g("",!0)])]),le,a.value?(i(),c("div",ae,[E(W,{write:r.value},null,8,["write"])])):(i(),c("div",ie,[r.value.summary?(i(),c("div",ce,[de,t("span",null,u(r.value.summary),1)])):g("",!0),t("div",{class:"article-content ql-editor",ref_key:"contentRef",ref:y,innerHTML:B.value},null,8,ue)])),t("div",me,[t("div",null,"Oluşturma: "+u(x(r.value.created_at)),1),t("div",he,[t("span",pe,[ye,M(" "+u(r.value.views_count)+" görüntüleme ",1)]),r.value.updated_at!==r.value.created_at?(i(),c("span",we," Son güncelleme: "+u(x(r.value.updated_at)),1)):g("",!0)])])])])]),_:1}))}});export{xe as default};
