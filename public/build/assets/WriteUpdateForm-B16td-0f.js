import{Q as le,r as h,p as D,T as ie,m as $,y as V,c as a,a as s,B as ne,l as ae,h as m,k as g,v as y,u as r,n as w,t as b,e as ue,I as A,F,g as P,H as de,f as I,o as u,N as ce,J as K}from"./ssr-Dv_HsqzD.js";import ve from"./RichTextEditor-dboBbfD5.js";import"./quill.snow-D3u6MCRB.js";import"./app-ChiiLQ4B.js";/* empty css            */const fe={class:"card rounded-lg border border-border bg-card text-card-foreground shadow-sm"},me={class:"p-6"},be={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},ge={class:"md:col-span-2"},pe={class:"mb-4 w-full"},xe={class:"relative"},he={key:0,class:"mt-1 text-sm text-destructive"},ye={class:"mb-4 w-full"},we={class:"relative"},_e={key:0,class:"mt-1 text-sm text-destructive"},ke={class:"mb-4 w-full"},Ce={class:"flex space-x-2"},Se={key:0,class:"mt-1 text-sm text-destructive"},ze={class:"md:col-span-2"},Ve={class:"mb-4 w-full"},Te={class:"relative"},Me={key:0,class:"mt-1 text-sm text-destructive"},Be={class:"md:col-span-2"},Le={class:"relative w-full"},Ue={class:"relative"},je={key:0,tabindex:"0",class:"absolute z-[1] mt-1 max-h-60 w-full overflow-y-auto rounded-md border border-border bg-popover p-1 shadow-lg"},De=["onMousedown"],Oe={class:"font-medium"},Ee={key:0,class:"mt-1 text-sm text-destructive"},Ne={class:"relative w-full"},$e={class:"relative"},Ae={key:0,tabindex:"0",class:"absolute z-[1] mt-1 max-h-60 w-full overflow-y-auto rounded-md border border-border bg-popover p-1 shadow-lg"},Fe=["onMousedown"],Pe={class:"flex flex-col gap-0.5"},Ie={class:"font-medium"},Ke={key:0,class:"text-xs text-muted-foreground"},Ye={key:0,class:"mt-1 text-sm text-destructive"},Ge={class:"mb-4 w-full"},He={class:"relative"},Je={key:0,class:"mt-1 text-sm text-destructive"},We={class:"mb-4 w-full"},qe={class:"relative"},Re={key:0,class:"mt-1 text-sm text-destructive"},Qe={class:"mb-4 w-full"},Xe={class:"relative"},Ze={class:"mt-1 text-xs text-muted-foreground"},et={key:0,class:"mt-1 text-sm text-destructive"},tt={class:"mb-4 w-full"},st={class:"relative"},ot={class:"flex items-center space-x-2"},rt={class:"flex cursor-pointer items-center gap-2"},lt={class:"flex justify-end space-x-3"},it=["disabled"],nt={key:0,class:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},bt=Object.assign({name:"WriteUpdateForm"},{__name:"WriteUpdateForm",setup(at){const{props:O}=le(),Y=l=>{const e=[],d=new Set,o=c=>{!c||!Array.isArray(c)||c.forEach(n=>{n&&n.id&&!d.has(n.id)&&(d.add(n.id),e.push(n),n.children&&Array.isArray(n.children)&&n.children.length>0&&o(n.children))})};return o(l),e},G=h(O.categories||[]),p=D(()=>Y(G.value)),v=h(O.write),_=h(""),C=h(!1),E=h(null),T=[{value:"draft",label:"Şablon"},{value:"published",label:"Yayında"},{value:"private",label:"Gizli"},{value:"link_only",label:"Sadece Link"}],k=h(""),S=h(!1),N=h(null),M=D(()=>{if(!k.value)return T;const l=k.value.toLowerCase();return T.filter(e=>e.label.toLowerCase().includes(l))}),t=ie({title:v.value.title||"",slug:v.value.slug||"",content:v.value.content||"",published_at:v.value.published_at||"",summary:v.value.summary||"",status:v.value.status||"draft",category_id:v.value.category_id||"",seo_keywords:v.value.seo_keywords||"",meta_description:v.value.meta_description||"",tags:v.value.tags||"",views_count:v.value.views_count||0,hasDraw:v.value.hasDraw||!1}),i=h({title:"",slug:"",content:"",published_at:"",summary:"",status:"",category_id:"",seo_keywords:"",meta_description:"",tags:""}),f=h({date:"",time:""}),B=l=>{if(!l||!p.value||p.value.length===0)return"";const e=c=>p.value.find(n=>n.id===c),d=(c,n=[])=>{const x=e(c);return x?(n.unshift(x.name),x.parent_id?d(x.parent_id,n):n):n},o=d(l);return o.length>1?o.slice(0,-1).join(" > "):""},L=l=>{if(!l||!p.value||p.value.length===0)return"";const e=c=>p.value.find(n=>n.id===c),d=(c,n=[])=>{const x=e(c);return x?(n.unshift(x.name),x.parent_id?d(x.parent_id,n):n):n};return d(l).join(" > ")},z=D(()=>{if(!p.value||p.value.length===0)return[];if(!_.value){const o=[],c=new Set;return p.value.forEach(n=>{n&&n.id&&!c.has(n.id)&&(c.add(n.id),o.push(n))}),o}const l=_.value.toLowerCase(),e=[],d=new Set;return p.value.forEach(o=>{if(!o||!o.name||d.has(o.id))return;const c=o.name.toLowerCase().includes(l),x=B(o.id).toLowerCase().includes(l),re=L(o.id).toLowerCase().includes(l);(c||x||re)&&(d.add(o.id),e.push(o))}),e}),H=()=>{_.value.length>=1&&(C.value=!0)},J=()=>{clearTimeout(E.value),z.value.length>0&&(C.value=!0)},W=()=>{E.value=setTimeout(()=>{C.value=!1},100)},q=l=>{if(!l||!l.id)return;t.category_id=l.id;const e=L(l.id);_.value=e,K(()=>{C.value=!1})},R=()=>{_.value="",t.category_id="",C.value=!1},Q=()=>{k.value.length>=1&&(S.value=!0)},X=()=>{clearTimeout(N.value),M.value.length>0&&(S.value=!0)},Z=()=>{N.value=setTimeout(()=>{S.value=!1},100)},ee=l=>{!l||!l.value||(t.status=l.value,k.value=l.label,K(()=>{S.value=!1}))},te=()=>{k.value="",t.status="",S.value=!1};$(()=>{if(t.published_at){const e=new Date(t.published_at);isNaN(e.getTime())||(f.value.date=e.toISOString().split("T")[0],f.value.time=e.toTimeString().substring(0,5))}if(t.category_id){const e=p.value.find(d=>d.id===t.category_id);if(e){const d=L(e.id);_.value=d}}const l=T.find(e=>e.value===t.status);l&&(k.value=l.label),t.slug&&t.slug!==""&&(j.value=!0),document.addEventListener("keydown",e=>{e.key==="Escape"&&(C.value=!1,S.value=!1)})}),V(f.value,()=>{f.value.date&&f.value.time&&(t.published_at=`${f.value.date}T${f.value.time}:00`)},{deep:!0});const se=()=>{i.value.title=t.title?"":"Başlık zorunludur.",i.value.slug=t.slug?"":"Slug zorunludur.",i.value.content=t.content?"":"İçerik zorunludur.",i.value.published_at=f.value.date&&f.value.time?"":"Yayınlama tarihi zorunludur.",i.value.summary=t.summary?"":"Özet zorunludur.",i.value.category_id=t.category_id?"":"Kategori seçilmelidir.",i.value.published_at||(t.published_at=`${f.value.date}T${f.value.time}:00`)},U=`write_edit_form_${v.value.id||v.value.slug||"unknown"}`;V(t,l=>{localStorage.setItem(U,JSON.stringify(l))},{deep:!0}),$(()=>{const l=localStorage.getItem(U);if(l){const e=JSON.parse(l);Object.assign(t,e)}});const oe=()=>{se(),Object.values(i.value).some(l=>l!=="")||t.put(route("writes.update",{write:v.value.slug}),{onSuccess:()=>{localStorage.removeItem(U),ce.visit(route("writes.show",{write:t.slug}))}})};let j=h(!1);return V(()=>t.title,l=>{!j.value&&l&&(t.slug=l.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"").trim())}),V(()=>t.slug,(l,e)=>{e!==void 0&&l!==e&&e!==""&&(j.value=!0)}),(l,e)=>{var d;return u(),a("div",fe,[s("div",me,[e[30]||(e[30]=ne('<div class="mb-4 flex items-center justify-between"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg><h2 class="text-lg font-semibold text-card-foreground">Yazıyı Güncelle</h2></div></div>',1)),s("form",{onSubmit:ae(oe,["prevent"]),class:"space-y-6"},[s("div",be,[s("div",ge,[s("div",pe,[e[15]||(e[15]=s("label",{class:"mb-2 block text-sm font-medium text-foreground"},"Başlık",-1)),s("div",xe,[g(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>r(t).title=o),placeholder:"Yazının başlığını girin",class:w(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":i.value.title||r(t).errors.title}])},null,2),[[y,r(t).title]])]),i.value.title||r(t).errors.title?(u(),a("p",he,b(i.value.title||r(t).errors.title),1)):m("",!0)])]),s("div",null,[s("div",ye,[e[16]||(e[16]=s("label",{class:"mb-2 block text-sm font-medium text-foreground"},"Slug",-1)),s("div",we,[g(s("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>r(t).slug=o),placeholder:"örnek-yazı-slug",class:w(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":i.value.slug||r(t).errors.slug}])},null,2),[[y,r(t).slug]])]),i.value.slug||r(t).errors.slug?(u(),a("p",_e,b(i.value.slug||r(t).errors.slug),1)):m("",!0)])]),s("div",null,[s("div",ke,[e[17]||(e[17]=s("label",{class:"mb-2 block text-sm font-medium text-foreground"},"Yayınlama Tarihi",-1)),s("div",Ce,[g(s("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=o=>f.value.date=o),class:w(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":i.value.published_at||r(t).errors.published_at}])},null,2),[[y,f.value.date]]),g(s("input",{type:"time","onUpdate:modelValue":e[3]||(e[3]=o=>f.value.time=o),class:w(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":i.value.published_at||r(t).errors.published_at}])},null,2),[[y,f.value.time]])]),i.value.published_at||r(t).errors.published_at?(u(),a("p",Se,b(i.value.published_at||r(t).errors.published_at),1)):m("",!0)])]),s("div",ze,[s("div",Ve,[e[18]||(e[18]=s("label",{class:"mb-2 block text-sm font-medium text-foreground"},"Özet",-1)),s("div",Te,[g(s("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>r(t).summary=o),rows:"3",placeholder:"Yazının kısa özeti",class:w(["flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":i.value.summary||r(t).errors.summary}])},null,2),[[y,r(t).summary]])]),i.value.summary||r(t).errors.summary?(u(),a("p",Me,b(i.value.summary||r(t).errors.summary),1)):m("",!0)])]),s("div",Be,[ue(ve,{modelValue:r(t).content,"onUpdate:modelValue":e[5]||(e[5]=o=>r(t).content=o),label:"İçerik",error:i.value.content||r(t).errors.content,placeholder:"İçeriği buraya yazın...",height:"400px"},null,8,["modelValue","error"])]),s("div",null,[e[19]||(e[19]=s("label",{class:"mb-2 block text-sm font-medium text-foreground"},"Durumu",-1)),s("div",Le,[s("div",Ue,[g(s("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=o=>k.value=o),onFocus:X,onBlur:Z,onInput:Q,onKeydown:e[7]||(e[7]=A(o=>S.value=!1,["esc"])),placeholder:"Durum seçin veya arayın...",class:w(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 pr-10 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":i.value.status||r(t).errors.status}]),tabindex:"0"},null,34),[[y,k.value]]),k.value?(u(),a("button",{key:0,onClick:te,class:"absolute right-2 top-1/2 inline-flex h-6 w-6 -translate-y-1/2 items-center justify-center rounded-md text-xs font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"}," ✕ ")):m("",!0)]),S.value&&M.value.length>0?(u(),a("ul",je,[(u(!0),a(F,null,P(M.value,o=>(u(),a("li",{key:o.value,onMousedown:c=>ee(o),class:"cursor-pointer rounded-sm px-2 py-1.5 text-sm text-popover-foreground transition-colors hover:bg-accent hover:text-accent-foreground"},[s("span",Oe,b(o.label),1)],40,De))),128))])):m("",!0)]),i.value.status||r(t).errors.status?(u(),a("p",Ee,b(i.value.status||r(t).errors.status),1)):m("",!0)]),s("div",null,[e[21]||(e[21]=s("label",{class:"mb-2 block text-sm font-medium text-foreground"},"Kategori",-1)),s("div",Ne,[s("div",$e,[g(s("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=o=>_.value=o),onFocus:J,onBlur:W,onInput:H,onKeydown:e[9]||(e[9]=A(o=>C.value=!1,["esc"])),placeholder:"Kategori seçin veya arayın...",class:w(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 pr-10 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":i.value.category_id||r(t).errors.category_id}]),tabindex:"0"},null,34),[[y,_.value]]),_.value?(u(),a("button",{key:0,onClick:R,class:"absolute right-2 top-1/2 inline-flex h-6 w-6 -translate-y-1/2 items-center justify-center rounded-md text-xs font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"}," ✕ ")):m("",!0)]),C.value&&z.value&&z.value.length>0?(u(),a("ul",Ae,[(u(!0),a(F,null,P(z.value,o=>(u(),a("li",{key:o.id,onMousedown:c=>q(o),class:"cursor-pointer rounded-sm px-2 py-1.5 text-sm text-popover-foreground transition-colors hover:bg-accent hover:text-accent-foreground"},[s("div",Pe,[s("span",Ie,b(o.name),1),B(o.id)?(u(),a("span",Ke,[e[20]||(e[20]=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1 inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),I(" "+b(B(o.id)),1)])):m("",!0)])],40,Fe))),128))])):m("",!0)]),i.value.category_id||r(t).errors.category_id?(u(),a("p",Ye,b(i.value.category_id||r(t).errors.category_id),1)):m("",!0)]),s("div",null,[s("div",Ge,[e[22]||(e[22]=s("label",{class:"mb-2 block text-sm font-medium text-foreground"},"Etiketler",-1)),s("div",He,[g(s("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=o=>r(t).tags=o),placeholder:"etiket1, etiket2, etiket3",class:w(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":i.value.tags||r(t).errors.tags}])},null,2),[[y,r(t).tags]])]),i.value.tags||r(t).errors.tags?(u(),a("p",Je,b(i.value.tags||r(t).errors.tags),1)):m("",!0)])]),s("div",null,[s("div",We,[e[23]||(e[23]=s("label",{class:"mb-2 block text-sm font-medium text-foreground"},"SEO Anahtar Kelimeleri",-1)),s("div",qe,[g(s("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=o=>r(t).seo_keywords=o),placeholder:"anahtar1, anahtar2, anahtar3",class:w(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":i.value.seo_keywords||r(t).errors.seo_keywords}])},null,2),[[y,r(t).seo_keywords]])]),i.value.seo_keywords||r(t).errors.seo_keywords?(u(),a("p",Re,b(i.value.seo_keywords||r(t).errors.seo_keywords),1)):m("",!0)])]),s("div",null,[s("div",Qe,[e[24]||(e[24]=s("label",{class:"mb-2 block text-sm font-medium text-foreground"},"SEO Meta Açıklaması",-1)),s("div",Xe,[g(s("textarea",{"onUpdate:modelValue":e[12]||(e[12]=o=>r(t).meta_description=o),placeholder:"Arama motorları için kısa bir açıklama (max 160 karakter)",class:w(["flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":i.value.meta_description||r(t).errors.meta_description}]),maxlength:"160",rows:"2"},null,2),[[y,r(t).meta_description]]),s("div",Ze,b(((d=r(t).meta_description)==null?void 0:d.length)||0)+"/160",1)]),i.value.meta_description||r(t).errors.meta_description?(u(),a("p",et,b(i.value.meta_description||r(t).errors.meta_description),1)):m("",!0),e[25]||(e[25]=s("div",{class:"mt-1 text-xs text-muted-foreground"},[s("span",null,"İpucu: Bu açıklama arama sonuçlarında gösterilir. Boş bırakırsanız, özet kısmı kullanılacaktır.")],-1))])]),s("div",null,[s("div",tt,[e[26]||(e[26]=s("label",{class:"mb-2 block text-sm font-medium text-foreground"},"Görüntülenme Sayısı",-1)),s("div",st,[g(s("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=o=>r(t).views_count=o),class:"flex h-10 w-full rounded-md border border-input bg-muted px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",readonly:""},null,512),[[y,r(t).views_count]])])])]),s("div",ot,[s("label",rt,[g(s("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=o=>r(t).hasDraw=o),class:"h-4 w-4 rounded border-input text-primary focus:ring-2 focus:ring-ring focus:ring-offset-2"},null,512),[[de,r(t).hasDraw]]),e[27]||(e[27]=s("span",{class:"text-sm font-medium text-foreground"},"Çizim İçerir",-1))])])]),e[29]||(e[29]=s("div",{class:"my-6 border-t border-border"},null,-1)),s("div",lt,[s("button",{type:"submit",class:w(["inline-flex h-10 items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"cursor-not-allowed opacity-50":r(t).processing}]),disabled:r(t).processing},[r(t).processing?(u(),a("svg",nt,[...e[28]||(e[28]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):m("",!0),I(" "+b(r(t).processing?"Güncelleniyor...":"Güncelle"),1)],10,it)])],32)])])}}});export{bt as default};
