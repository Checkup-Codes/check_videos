import{Q as H,r as c,m as K,x as M,p as V,j as J,o as a,w as Q,a as e,e as U,t as d,c as i,F as z,g as B,f,h as w,n as g,S as X,U as Y}from"./ssr-DuagKrD0.js";import{_ as q}from"./GoBackButton-Cojfgd9g.js";import{_ as G}from"./CheckScreen-D1r9F2BV.js";import{_ as W}from"./app-E_9C73Nl.js";/* empty css            */const _=v=>(X("data-v-91d2a193"),v=v(),Y(),v),Z={class:"mb-5"},tt={class:"flex flex-col space-y-2 sm:flex-row sm:items-center sm:justify-between sm:space-y-0"},et={class:"w-full sm:w-auto"},st={class:"truncate text-xl font-bold text-primary sm:text-2xl"},ot={class:"card mt-5 border border-gray-200 bg-white shadow-lg transition-all duration-200 dark:border-gray-700 dark:bg-base-100"},nt={class:"card-body p-6"},at={key:0,class:"flex justify-center p-8"},lt=_(()=>e("span",{class:"loading loading-spinner loading-lg"},null,-1)),it=[lt],ct={key:1},rt={key:0,class:"p-4"},dt=_(()=>e("div",{class:"alert alert-warning"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("span",null,"Bu oynatma listesinde görüntülenecek video bulunamadı.")],-1)),ut=[dt],ht={key:1,class:"divide-y"},_t={class:"flex flex-col md:flex-row md:space-x-4"},vt={class:"relative mb-3 md:mb-0 md:w-1/3"},pt=["href"],mt=["src"],wt={class:"absolute bottom-2 right-2 rounded bg-black bg-opacity-70 px-1 py-0.5 text-xs text-white"},bt={class:"flex flex-col justify-between md:w-2/3"},kt={class:"mb-1 text-base font-medium leading-tight"},ft={class:"mb-3 flex space-x-4 text-xs text-gray-500"},gt={class:"flex items-center"},xt=_(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),yt={class:"flex items-center"},Ct=_(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})],-1)),jt={class:"flex space-x-2"},It=["href"],$t=_(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),St=["onClick"],Mt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Vt=_(()=>e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)),zt=[Vt],Bt={key:1},Pt={key:2},Lt={class:"flex justify-center overflow-x-auto p-4"},Nt={class:"join"},Dt=["disabled"],Rt={key:0,class:"btn btn-disabled btn-sm join-item"},At=["onClick"],Ft={key:1,class:"btn btn-disabled btn-sm join-item"},Et=["disabled"],P="https://www.googleapis.com/youtube/v3",L=10,Ot={__name:"Screen",setup(v){const{props:N}=H(),p=c(N.lesson),x="AIzaSyCoIcX9-KNL9aOYwsvdDpflXxHImczwFlQ",D=c(p.value.playlist_id),m=c([]),b=c(!1),l=c(1),y=c(null),R=c(null),C=c(0),u=c([]);K(()=>{$(),A()});const A=()=>{const s=localStorage.getItem(`checkedVideos_${p.value.id}`);s&&(u.value=JSON.parse(s))},F=()=>{localStorage.setItem(`checkedVideos_${p.value.id}`,JSON.stringify(u.value))},j=s=>u.value.includes(s),E=s=>{const o=u.value.indexOf(s.id);o===-1?u.value.push(s.id):u.value.splice(o,1),F()},I=s=>{if(!s)return"0";const o=parseInt(s.replace(/,/g,""));return o>=1e6?(o/1e6).toFixed(1)+"M":o>=1e3?(o/1e3).toFixed(1)+"K":s},$=async(s="")=>{b.value=!0,m.value=[];try{const o=await M.get(`${P}/playlistItems`,{params:{part:"snippet",playlistId:D.value,maxResults:L,pageToken:s,key:x}}),t=o.data.items.map(n=>n.snippet.resourceId.videoId);C.value=o.data.pageInfo.totalResults;const h=await M.get(`${P}/videos`,{params:{part:"snippet,contentDetails,statistics",id:t.join(","),key:x}});m.value=h.data.items.map(n=>({id:n.id,title:n.snippet.title,thumbnail:n.snippet.thumbnails.high?n.snippet.thumbnails.high.url:n.snippet.thumbnails.default.url,duration:T(n.contentDetails.duration),viewCount:n.statistics.viewCount?n.statistics.viewCount.toLocaleString():"0",likeCount:n.statistics.likeCount?n.statistics.likeCount.toLocaleString():"0"})),y.value=o.data.nextPageToken||null,R.value=s||null}catch(o){console.error("Error fetching videos:",o)}finally{b.value=!1}},r=V(()=>Math.ceil(C.value/L)),O=V(()=>{const s=[],o=r.value;if(l.value>2&&l.value<o-1)for(let t=l.value-1;t<=l.value+1;t++)s.push(t);else if(l.value<=2)for(let t=2;t<=Math.min(3,o-1);t++)s.push(t);else if(l.value>=o-1)for(let t=Math.max(o-2,2);t<o;t++)s.push(t);return s}),k=s=>{l.value=s,$(s===1?"":y.value)},T=s=>{const o=/PT(\d+H)?(\d+M)?(\d+S)?/,t=s.match(o),h=t[1]?t[1].slice(0,-1):"00",n=t[2]?t[2].slice(0,-1).padStart(2,"0"):"00",S=t[3]?t[3].slice(0,-1).padStart(2,"0"):"00";return h==="00"?`${n}:${S}`:`${h}:${n}:${S}`};return(s,o)=>(a(),J(G,null,{default:Q(()=>[e("div",Z,[e("div",tt,[U(q,{href:"/lessons"}),e("div",et,[e("h2",st,d(p.value.title),1)])]),e("div",ot,[e("div",nt,[b.value?(a(),i("div",at,it)):(a(),i("div",ct,[m.value.length===0?(a(),i("div",rt,ut)):(a(),i("ul",ht,[(a(!0),i(z,null,B(m.value,t=>(a(),i("li",{key:t.id,class:"py-4 hover:bg-base-100"},[e("div",_t,[e("div",vt,[e("a",{href:`https://www.youtube.com/watch?v=${t.id}`,target:"_blank",class:"aspect-w-16 aspect-h-9 block overflow-hidden rounded-lg"},[e("img",{src:t.thumbnail,alt:"Video thumbnail",class:"h-full w-full object-cover"},null,8,mt),e("div",wt,d(t.duration),1)],8,pt)]),e("div",bt,[e("div",null,[e("h3",kt,d(t.title),1),e("div",ft,[e("div",gt,[xt,f(" "+d(I(t.viewCount))+" görüntülenme ",1)]),e("div",yt,[Ct,f(" "+d(I(t.likeCount)),1)])])]),e("div",jt,[e("a",{href:`https://www.youtube.com/watch?v=${t.id}`,target:"_blank",class:"btn btn-primary btn-sm"},[$t,f(" İzle ")],8,It),e("button",{class:"btn btn-outline btn-sm",onClick:h=>E(t)},[j(t.id)?(a(),i("svg",Mt,zt)):w("",!0),j(t.id)?(a(),i("span",Bt,"İzlendi")):(a(),i("span",Pt,"İzlenmedi"))],8,St)])])])]))),128))])),e("div",Lt,[e("div",Nt,[e("button",{disabled:l.value===1,onClick:o[0]||(o[0]=t=>k(1)),class:g(["btn btn-sm join-item",l.value===1?"btn-active":""])}," 1 ",10,Dt),l.value>3?(a(),i("span",Rt,"...")):w("",!0),(a(!0),i(z,null,B(O.value,t=>(a(),i("button",{key:t,onClick:h=>k(t),class:g(["btn btn-sm join-item",l.value===t?"btn-active":""])},d(t),11,At))),128)),l.value<r.value-2?(a(),i("span",Ft,"...")):w("",!0),r.value>1?(a(),i("button",{key:2,disabled:l.value===r.value,onClick:o[1]||(o[1]=t=>k(r.value)),class:g(["btn btn-sm join-item",l.value===r.value?"btn-active":""])},d(r.value),11,Et)):w("",!0)])])]))])])])]),_:1}))}},Ut=W(Ot,[["__scopeId","data-v-91d2a193"]]);export{Ut as default};
