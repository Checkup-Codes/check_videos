import{d as S,Q as z,T as V,g as c,s as j,x as B,y as F,c as n,a as s,h as T,j as u,n as w,u as r,t as f,i as I,k as p,f as k,w as _,p as M,q as N,o as a,A as R,H as E}from"./ssr-COJdwiSz.js";const A={class:"space-y-4"},D={class:"border-t border-border pt-6"},H={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},K=["value"],L={key:0,class:"mt-1 text-xs text-destructive"},P=["value"],q={key:0,class:"mt-1 text-xs text-destructive"},O={key:0,class:"rounded-md border border-border bg-muted/50 p-3"},U={class:"text-sm text-foreground"},G={class:"mt-2 text-sm font-medium text-green-600 dark:text-green-400"},Q={class:"flex items-center justify-end gap-2 pt-2"},Y={key:0,class:"text-sm text-muted-foreground"},$=["disabled"],J={key:0,class:"h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},W={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},Z=S({__name:"UpdateProfileInformationForm",props:{mustVerifyEmail:{},status:{}},setup(v){const m=z().props.auth.user,t=V({name:m.name,email:m.email}),b=c(null),g=c(null),o=c({name:"",email:""}),C=()=>{Object.keys(o.value).forEach(e=>{o.value[e]=""});let i=!1;return(!t.name||t.name.trim()==="")&&(o.value.name="İsim zorunludur.",i=!0),!t.email||t.email.trim()===""?(o.value.email="E-posta zorunludur.",i=!0):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(o.value.email="Geçerli bir e-posta adresi girin.",i=!0),i&&x(),i},x=()=>{E(()=>{const i=[{ref:b,error:o.value.name},{ref:g,error:o.value.email}];for(const e of i)if(e.error&&e.ref.value){e.ref.value.scrollIntoView({behavior:"smooth",block:"center"}),E(()=>{var h;const l=(h=e.ref.value)==null?void 0:h.querySelector("input");l&&l.focus()});break}})},y=()=>{C()||t.patch(route("profile.update"),{onError:e=>{Object.assign(o.value,e),x()}})};let d=null;return j(()=>{d=()=>{y()},window.addEventListener("sidebarFormSubmit",d)}),B(()=>{d&&window.removeEventListener("sidebarFormSubmit",d)}),F(()=>t.processing,i=>{window.dispatchEvent(new CustomEvent("formProcessingState",{detail:{processing:i}}))}),(i,e)=>(a(),n("div",A,[s("div",D,[e[8]||(e[8]=s("h2",{class:"mb-4 text-sm font-semibold text-foreground"},"Profil Bilgileri",-1)),s("form",{onSubmit:T(y,["prevent"]),class:"space-y-4"},[s("div",H,[s("div",{ref_key:"nameRef",ref:b},[e[2]||(e[2]=s("label",{for:"name",class:"mb-1 block text-sm font-medium text-foreground"},"İsim",-1)),s("input",{id:"name",type:"text",value:r(t).name,onInput:e[0]||(e[0]=l=>r(t).name=l.target.value),autocomplete:"name",placeholder:"Adınız",class:w(["flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":o.value.name||r(t).errors.name}])},null,42,K),o.value.name||r(t).errors.name?(a(),n("p",L,f(o.value.name||r(t).errors.name),1)):u("",!0)],512),s("div",{ref_key:"emailRef",ref:g},[e[3]||(e[3]=s("label",{for:"email",class:"mb-1 block text-sm font-medium text-foreground"},"E-posta",-1)),s("input",{id:"email",type:"email",value:r(t).email,onInput:e[1]||(e[1]=l=>r(t).email=l.target.value),autocomplete:"username",placeholder:"ornek@email.com",class:w(["flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":o.value.email||r(t).errors.email}])},null,42,P),o.value.email||r(t).errors.email?(a(),n("p",q,f(o.value.email||r(t).errors.email),1)):u("",!0)],512)]),v.mustVerifyEmail&&r(m).email_verified_at===null?(a(),n("div",O,[s("p",U,[e[5]||(e[5]=p(" E-posta adresiniz doğrulanmamış. ",-1)),k(r(M),{href:i.route("verification.send"),method:"post",as:"button",class:"text-sm font-medium text-primary underline-offset-4 hover:underline"},{default:_(()=>[...e[4]||(e[4]=[p(" Doğrulama e-postasını tekrar gönder. ",-1)])]),_:1},8,["href"])]),I(s("div",G," Yeni bir doğrulama bağlantısı e-posta adresinize gönderildi. ",512),[[N,v.status==="verification-link-sent"]])])):u("",!0),s("div",Q,[k(R,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:_(()=>[r(t).recentlySuccessful?(a(),n("p",Y,"Kaydedildi.")):u("",!0)]),_:1}),s("button",{type:"submit",disabled:r(t).processing,class:"inline-flex h-9 items-center justify-center gap-1.5 rounded-md bg-primary px-4 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"},[r(t).processing?(a(),n("svg",J,[...e[6]||(e[6]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(a(),n("svg",W,[...e[7]||(e[7]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"},null,-1)])])),p(" "+f(r(t).processing?"Kaydediliyor...":"Kaydet"),1)],8,$)])],32)])]))}});export{Z as _};
