import{r as L,x as E,A as I,_ as A,Q as B,i as D,a0 as P,a1 as W,C as z,g,o as m,h as y,F as V,m as $,b as a,J as M,K as j,c as O,w as F,n as C,t as k,f as H,u as J,k as q}from"./app-CJEG1hw9.js";/* empty css            */const G=10*60*1e3;function Q(s,f=G){const l=L(parseInt(localStorage.getItem(`${s}_lastReset`))||Date.now());let d=null;const b=(c,w=!1)=>{d&&clearTimeout(d);const i=()=>{c>0&&localStorage.setItem(s,c.toString())};w?i():d=setTimeout(i,100)},n=()=>{const c=Date.now();if(c-l.value>=f)return console.log(`Resetting scroll position for ${s} due to timeout`),localStorage.removeItem(s),l.value=c,localStorage.setItem(`${s}_lastReset`,c.toString()),0;const i=parseInt(localStorage.getItem(s));return!isNaN(i)&&i>0?i:0},r=()=>{localStorage.removeItem(s),l.value=Date.now(),localStorage.setItem(`${s}_lastReset`,l.value.toString())},v=()=>{d&&clearTimeout(d)};let u;return E(()=>{u=setInterval(()=>{Date.now()-l.value>=f&&r()},Math.min(f,6e4))}),I(()=>{v(),u&&clearInterval(u)}),{saveScrollPosition:b,getSavedScrollPosition:n,resetScroll:r,cleanup:v}}const x=s=>(M("data-v-3ade40c9"),s=s(),j(),s),U={class:"mb-1 flex items-center gap-2"},Y={key:0},Z=x(()=>a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"})],-1)),X=[Z],K=x(()=>a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z","clip-rule":"evenodd"})],-1)),ee=[K],te={class:"text-base-content/70 flex justify-between text-xs"},oe={class:"flex items-center gap-1"},se=x(()=>a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-[14px] w-[14px]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),a("circle",{cx:"12",cy:"12",r:"3"})],-1)),ne={key:0,class:"flex h-32 items-center justify-center text-center opacity-50"},ae=x(()=>a("div",null,"Henüz yazı bulunmuyor",-1)),re=[ae],ie="writeList_scrollPosition",le=Object.assign({name:"WriteList"},{__name:"WriteList",props:{writes:Array,route:Function},setup(s,{expose:f}){const l=s,b=B().props.isAdmin||!1,n=L(null);let r=!1;const v=L(""),{saveScrollPosition:u,getSavedScrollPosition:c,cleanup:w}=Q(ie),i=D(()=>b?l.writes:l.writes.filter(o=>o.status!=="private"));f({filteredWrites:i,scrollContainer:n});const T=o=>{var e;const t=((e=n.value)==null?void 0:e.scrollTop)||0;t>0&&u(t,!0)},h=()=>{if(!n.value)return;const o=c();if(o>0){n.value.scrollTop=o;const t=document.querySelector(".border-primary");if(t){const e=n.value.getBoundingClientRect(),p=t.getBoundingClientRect();(p.top<e.top||p.bottom>e.bottom)&&t.scrollIntoView({block:"center",behavior:"instant"})}}};P(()=>{r=!0,h(),S()}),W(()=>{var t;r=!1;const o=((t=n.value)==null?void 0:t.scrollTop)||0;o>0&&u(o,!0)}),z(()=>l.writes,(o,t)=>{JSON.stringify(o)!==JSON.stringify(t)&&h()},{deep:!0});const S=()=>{v.value=window.location.pathname};E(()=>{var R;r=!0,S(),h();const o=()=>{r&&n.value&&u(n.value.scrollTop)};(R=n.value)==null||R.addEventListener("scroll",o,{passive:!0});const t=()=>{r&&(h(),S())},e=()=>{if(r&&n.value){const _=n.value.scrollTop;_>0&&u(_,!0)}},p=()=>{r&&(h(),S())};window.addEventListener("popstate",t),window.addEventListener("inertia:start",e),window.addEventListener("inertia:finish",p),I(()=>{var _;r=!1,w(),(_=n.value)==null||_.removeEventListener("scroll",o),window.removeEventListener("popstate",t),window.removeEventListener("inertia:start",e),window.removeEventListener("inertia:finish",p)})});const N=o=>{const t={year:"numeric",month:"short",day:"numeric"};return new Date(o).toLocaleDateString(void 0,t)};return(o,t)=>(m(),g("div",{ref_key:"scrollContainer",ref:n,class:"write-list-container h-full space-y-1 overflow-y-auto p-3"},[(m(!0),g(V,null,$(i.value,e=>(m(),O(J(q),{key:e.id,href:s.route("writes.show",{write:e.slug}),class:C(["block items-center justify-between rounded-lg border px-1 py-2 backdrop-blur-md transition-all duration-200",v.value===`/writes/${e.slug}`?"border-primary bg-primary text-primary-content shadow-md":"border-base-200 bg-base-200 text-base-content hover:bg-base-300"]),onClick:p=>T()},{default:F(()=>[a("div",U,[e.status==="private"?(m(),g("span",Y,X)):y("",!0),e.status==="link_only"?(m(),g("span",{key:1,class:C([v.value===`/writes/${e.slug}`?"text-primary-content":"text-primary"])},ee,2)):y("",!0),a("span",null,k(e.title),1)]),a("div",te,[a("span",null,k(N(e.created_at)),1),a("span",oe,[se,H(" "+k(e.views_count),1)])])]),_:2},1032,["href","class","onClick"]))),128)),i.value.length===0?(m(),g("div",ne,re)):y("",!0)],512))}}),de=A(le,[["__scopeId","data-v-3ade40c9"]]);export{de as default};
