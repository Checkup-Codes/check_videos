import{e as v,Q as be,p as O,T as me,m as j,y as F,A as ge,c as d,a as l,h as b,n as y,u as o,t as m,k as C,v as I,b as pe,D as J,F as W,g as Q,I as xe,f as ye,l as he,N as X,o as c,E as A}from"./ssr-DE0PqSHa.js";import we from"./RichTextEditor-6sP1MHZP.js";import"./quill-Dq4V7Caw.js";import"./app-Vsdp8_Ja.js";/* empty css            */const ke={class:"space-y-4 py-6"},_e={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Se=["value"],Ce={key:0,class:"mt-1 text-xs text-destructive"},Ee=["value"],Te={key:0,class:"mt-1 text-xs text-destructive"},Re={class:"flex gap-2"},Fe={key:0,class:"mt-1 text-xs text-destructive"},Ie=["value"],Le={key:0,class:"mt-1 text-xs text-destructive"},ze={class:"relative"},Oe={key:1,tabindex:"0",class:"absolute z-50 mt-1 max-h-48 w-full overflow-y-auto rounded border border-border bg-popover shadow-lg"},je=["onMousedown"],Ae={key:0,class:"mt-1 text-xs text-destructive"},De={class:"relative"},Ve={key:1,tabindex:"0",class:"absolute z-50 mt-1 max-h-48 w-full overflow-y-auto rounded border border-border bg-popover shadow-lg"},Me=["onMousedown"],Pe={class:"flex flex-col"},Be={key:0,class:"text-xs text-muted-foreground"},Ke={key:0,class:"mt-1 text-xs text-destructive"},$e=["value"],Ne={key:0,class:"mt-1 text-xs text-destructive"},Ue=["value"],He={key:0,class:"mt-1 text-xs text-destructive"},Ye=["value"],qe={class:"mt-1 flex items-center justify-between"},Ge={key:0,class:"text-xs text-destructive"},Je={class:"text-xs text-muted-foreground"},We=["value"],Qe={class:"flex items-center"},Xe={class:"flex cursor-pointer items-center gap-2"},Ze={class:"flex justify-end gap-2 pt-2"},et=["disabled"],tt=["disabled"],st={key:0,class:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_="write_create_form",dt=Object.assign({name:"WriteCreateForm"},{__name:"WriteCreateForm",setup(rt){const D=v(null),V=v(null),M=v(null),P=v(null),B=v(null),K=v(null),$=v(null),{props:Z}=be(),ee=r=>{const e=[],n=new Set,s=a=>{!a||!Array.isArray(a)||a.forEach(u=>{u&&u.id&&!n.has(u.id)&&(n.add(u.id),e.push(u),u.children&&Array.isArray(u.children)&&u.children.length>0&&s(u.children))})};return s(r),e},te=v(Z.categories||[]),g=O(()=>ee(te.value)),t=me({title:"",slug:"",content:"",published_at:"",summary:"",status:"published",category_id:"",seo_keywords:"",meta_description:"",tags:"",views_count:0,hasDraw:!1});t.processing=!1;const i=v({title:"",slug:"",content:"",published_at:"",summary:"",status:"",category_id:"",seo_keywords:"",meta_description:"",tags:""}),f=v({date:"",time:""}),S=[{value:"published",label:"Herkese Açık"},{value:"private",label:"Gizli"},{value:"link_only",label:"Sadece Link"}],x=v(""),h=v(""),w=v(!1),k=v(!1),N=v(null),U=v(null),H=O(()=>{if(!x.value)return S;const r=S.find(n=>n.value===t.status);if(r&&x.value===r.label)return S;const e=x.value.toLowerCase();return S.filter(n=>n.label.toLowerCase().includes(e))}),L=r=>{if(!r||!g.value||g.value.length===0)return"";const e=a=>g.value.find(u=>u.id===a),n=(a,u=[])=>{const p=e(a);return p?(u.unshift(p.name),p.parent_id?n(p.parent_id,u):u):u},s=n(r);return s.length>1?s.slice(0,-1).join(" > "):""},z=r=>{if(!r||!g.value||g.value.length===0)return"";const e=a=>g.value.find(u=>u.id===a),n=(a,u=[])=>{const p=e(a);return p?(u.unshift(p.name),p.parent_id?n(p.parent_id,u):u):u};return n(r).join(" > ")},E=O(()=>{if(!g.value||g.value.length===0)return[];if(!h.value){const s=[],a=new Set;return g.value.forEach(u=>{u&&u.id&&!a.has(u.id)&&(a.add(u.id),s.push(u))}),s}const r=h.value.toLowerCase(),e=[],n=new Set;return g.value.forEach(s=>{if(!s||!s.name||n.has(s.id))return;const a=s.name.toLowerCase().includes(r),p=L(s.id).toLowerCase().includes(r),ve=z(s.id).toLowerCase().includes(r);(a||p||ve)&&(n.add(s.id),e.push(s))}),e}),se=()=>{x.value.length>=1&&(k.value=!0)},re=()=>{clearTimeout(U.value),k.value=!0},oe=()=>{U.value=setTimeout(()=>{k.value=!1},100)},le=()=>{h.value.length>=1&&(w.value=!0)},ie=()=>{clearTimeout(N.value),E.value.length>0&&(w.value=!0)},ne=()=>{N.value=setTimeout(()=>{w.value=!1},100)},ue=r=>{!r||!r.value||(t.status=r.value,x.value=r.label,A(()=>{k.value=!1}))},ae=r=>{if(!r||!r.id)return;t.category_id=r.id;const e=z(r.id);h.value=e,A(()=>{w.value=!1})},de=()=>{x.value="",t.status="",k.value=!1},ce=()=>{h.value="",t.category_id="",w.value=!1};j(()=>{const r=S.find(e=>e.value===t.status);if(r&&(x.value=r.label),t.category_id){const e=g.value.find(n=>n.id===t.category_id);if(e){const n=z(e.id);h.value=n}}document.addEventListener("keydown",e=>{e.key==="Escape"&&(w.value=!1,k.value=!1)})}),j(()=>{const r=new Date;f.value.date=r.toISOString().split("T")[0],f.value.time=r.toTimeString().slice(0,5)}),F(f.value,()=>{f.value.date&&f.value.time&&(t.published_at=`${f.value.date}T${f.value.time}:00`)},{deep:!0}),F(t,r=>{const{processing:e,...n}=r;localStorage.setItem(_,JSON.stringify(n))},{deep:!0}),F(()=>t.processing,r=>{window.dispatchEvent(new CustomEvent("formProcessingState",{detail:{processing:r}}))});let T=null,R=null;j(()=>{t.processing=!1;const r=localStorage.getItem(_);if(r)try{const e=JSON.parse(r),{processing:n,...s}=e;Object.keys(s).length>0&&(s.title||s.content||s.category_id)?Object.assign(t,s):localStorage.removeItem(_)}catch(e){console.error("Error parsing localStorage data:",e),localStorage.removeItem(_)}t.processing=!1,T=()=>{q()},window.addEventListener("sidebarFormSubmit",T),R=()=>{G()},window.addEventListener("sidebarFormReset",R)});const Y=()=>{A(()=>{var n;const e=[{ref:D,error:i.value.title||t.errors.title},{ref:V,error:i.value.slug||t.errors.slug},{ref:B,error:i.value.content||t.errors.content},{ref:$,error:i.value.category_id||t.errors.category_id},{ref:M,error:i.value.published_at||t.errors.published_at},{ref:P,error:i.value.summary||t.errors.summary},{ref:K,error:i.value.status||t.errors.status}].find(s=>s.error);if(e&&((n=e.ref)!=null&&n.value)){e.ref.value.scrollIntoView({behavior:"smooth",block:"center"});const s=e.ref.value.querySelector("input, textarea");s&&setTimeout(()=>s.focus(),300)}})},fe=()=>{Object.keys(i.value).forEach(e=>{i.value[e]=""});let r=!1;return(!t.title||t.title.trim()==="")&&(i.value.title="Başlık zorunludur.",r=!0),(!t.slug||t.slug.trim()==="")&&(i.value.slug="Slug zorunludur.",r=!0),(!t.content||t.content.trim()===""||t.content==="<p><br></p>")&&(i.value.content="İçerik zorunludur.",r=!0),t.category_id||(i.value.category_id="Kategori seçilmelidir.",r=!0),f.value.date&&f.value.time?t.published_at=`${f.value.date}T${f.value.time}:00`:t.published_at=null,r&&Y(),!r},q=()=>{fe()&&t.post(route("writes.store"),{onSuccess:r=>{var e,n;localStorage.removeItem(_),(n=(e=r==null?void 0:r.props)==null?void 0:e.write)!=null&&n.slug?X.visit(route("writes.show",{write:r.props.write.slug})):t.slug&&X.visit(route("writes.show",{write:t.slug}))},onError:r=>{r&&(Object.keys(r).forEach(e=>{i.value.hasOwnProperty(e)&&(i.value[e]=r[e])}),Y())}})},G=()=>{t.reset(),t.processing=!1,Object.keys(i.value).forEach(r=>{i.value[r]=""}),f.value={date:"",time:""},localStorage.removeItem(_),console.log("Form reset completed")};return F(()=>t.title,r=>{const e={ı:"i",İ:"i",ğ:"g",Ğ:"g",ü:"u",Ü:"u",ş:"s",Ş:"s",ö:"o",Ö:"o",ç:"c",Ç:"c"};let n=r;Object.entries(e).forEach(([s,a])=>{n=n.replace(new RegExp(s,"g"),a)}),t.slug=n.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}),ge(()=>{T&&window.removeEventListener("sidebarFormSubmit",T),R&&window.removeEventListener("sidebarFormReset",R)}),(r,e)=>{var n;return c(),d("div",ke,[l("form",{onSubmit:he(q,["prevent"]),class:"space-y-4"},[l("div",_e,[l("div",{class:"md:col-span-2",ref_key:"titleRef",ref:D},[l("div",null,[e[15]||(e[15]=l("label",{class:"mb-1 block text-sm font-medium text-foreground"},"Başlık",-1)),l("input",{type:"text",value:o(t).title,onInput:e[0]||(e[0]=s=>o(t).title=s.target.value),placeholder:"Yazının başlığını girin",class:y(["flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":i.value.title||o(t).errors.title}])},null,42,Se),i.value.title||o(t).errors.title?(c(),d("p",Ce,m(i.value.title||o(t).errors.title),1)):b("",!0)])],512),l("div",{ref_key:"slugRef",ref:V},[e[16]||(e[16]=l("label",{class:"mb-1 block text-sm font-medium text-foreground"},"Slug",-1)),l("input",{type:"text",value:o(t).slug,onInput:e[1]||(e[1]=s=>o(t).slug=s.target.value),placeholder:"örnek-yazı-slug",class:y(["flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":i.value.slug||o(t).errors.slug}])},null,42,Ee),i.value.slug||o(t).errors.slug?(c(),d("p",Te,m(i.value.slug||o(t).errors.slug),1)):b("",!0)],512),l("div",{ref_key:"publishedAtRef",ref:M},[e[17]||(e[17]=l("label",{class:"mb-1 block text-sm font-medium text-foreground"},"Yayınlama Tarihi",-1)),l("div",Re,[C(l("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>f.value.date=s),class:y(["flex h-9 flex-1 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":i.value.published_at||o(t).errors.published_at}])},null,2),[[I,f.value.date]]),C(l("input",{type:"time","onUpdate:modelValue":e[3]||(e[3]=s=>f.value.time=s),class:y(["flex h-9 flex-1 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":i.value.published_at||o(t).errors.published_at}])},null,2),[[I,f.value.time]])]),i.value.published_at||o(t).errors.published_at?(c(),d("p",Fe,m(i.value.published_at||o(t).errors.published_at),1)):b("",!0)],512),l("div",{class:"md:col-span-2",ref_key:"summaryRef",ref:P},[e[18]||(e[18]=l("label",{class:"mb-1 block text-sm font-medium text-foreground"},"Özet",-1)),l("textarea",{value:o(t).summary,onInput:e[4]||(e[4]=s=>o(t).summary=s.target.value),placeholder:"Yazının kısa özeti",rows:"2",class:y(["flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":i.value.summary||o(t).errors.summary}])},null,42,Ie),i.value.summary||o(t).errors.summary?(c(),d("p",Le,m(i.value.summary||o(t).errors.summary),1)):b("",!0)],512),l("div",{class:"md:col-span-2",ref_key:"contentRef",ref:B},[pe(we,{modelValue:o(t).content,"onUpdate:modelValue":e[5]||(e[5]=s=>o(t).content=s),label:"İçerik",error:i.value.content||o(t).errors.content,placeholder:"İçeriği buraya yazın...",height:"400px"},null,8,["modelValue","error"])],512),l("div",{ref_key:"statusRef",ref:K},[e[19]||(e[19]=l("label",{class:"mb-1 block text-sm font-medium text-foreground"},"Durumu",-1)),l("div",ze,[C(l("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=s=>x.value=s),onFocus:re,onBlur:oe,onInput:se,onKeydown:e[7]||(e[7]=J(s=>k.value=!1,["esc"])),placeholder:"Durum seçin...",class:y(["flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 pr-8 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":i.value.status||o(t).errors.status}]),tabindex:"0"},null,34),[[I,x.value]]),x.value?(c(),d("button",{key:0,onClick:de,class:"absolute right-2 top-1/2 inline-flex h-5 w-5 -translate-y-1/2 items-center justify-center rounded text-xs hover:bg-accent"}," ✕ ")):b("",!0),k.value&&H.value.length>0?(c(),d("ul",Oe,[(c(!0),d(W,null,Q(H.value,s=>(c(),d("li",{key:s.value,onMousedown:a=>ue(s),class:"cursor-pointer px-2 py-1.5 text-sm hover:bg-accent"},m(s.label),41,je))),128))])):b("",!0)]),i.value.status||o(t).errors.status?(c(),d("p",Ae,m(i.value.status||o(t).errors.status),1)):b("",!0)],512),l("div",{ref_key:"categoryRef",ref:$},[e[20]||(e[20]=l("label",{class:"mb-1 block text-sm font-medium text-foreground"},"Kategori",-1)),l("div",De,[C(l("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=s=>h.value=s),onFocus:ie,onBlur:ne,onInput:le,onKeydown:e[9]||(e[9]=J(s=>w.value=!1,["esc"])),placeholder:"Kategori seçin...",class:y(["flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 pr-8 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive focus-visible:ring-destructive":i.value.category_id||o(t).errors.category_id}]),tabindex:"0"},null,34),[[I,h.value]]),h.value?(c(),d("button",{key:0,onClick:ce,class:"absolute right-2 top-1/2 inline-flex h-5 w-5 -translate-y-1/2 items-center justify-center rounded text-xs hover:bg-accent"}," ✕ ")):b("",!0),w.value&&E.value&&E.value.length>0?(c(),d("ul",Ve,[(c(!0),d(W,null,Q(E.value,s=>(c(),d("li",{key:s.id,onMousedown:a=>ae(s),class:"cursor-pointer px-2 py-1.5 text-sm hover:bg-accent"},[l("div",Pe,[l("span",null,m(s.name),1),L(s.id)?(c(),d("span",Be,m(L(s.id)),1)):b("",!0)])],40,Me))),128))])):b("",!0)]),i.value.category_id||o(t).errors.category_id?(c(),d("p",Ke,m(i.value.category_id||o(t).errors.category_id),1)):b("",!0)],512),l("div",null,[e[21]||(e[21]=l("label",{class:"mb-1 block text-sm font-medium text-foreground"},"Etiketler",-1)),l("input",{type:"text",value:o(t).tags,onInput:e[10]||(e[10]=s=>o(t).tags=s.target.value),placeholder:"etiket1, etiket2, etiket3",class:y(["flex h-9 w-full rounded border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive":i.value.tags||o(t).errors.tags}])},null,42,$e),i.value.tags||o(t).errors.tags?(c(),d("p",Ne,m(i.value.tags||o(t).errors.tags),1)):b("",!0)]),l("div",null,[e[22]||(e[22]=l("label",{class:"mb-1 block text-sm font-medium text-foreground"},"SEO Anahtar Kelimeleri",-1)),l("input",{type:"text",value:o(t).seo_keywords,onInput:e[11]||(e[11]=s=>o(t).seo_keywords=s.target.value),placeholder:"anahtar1, anahtar2, anahtar3",class:y(["flex h-9 w-full rounded border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive":i.value.seo_keywords||o(t).errors.seo_keywords}])},null,42,Ue),i.value.seo_keywords||o(t).errors.seo_keywords?(c(),d("p",He,m(i.value.seo_keywords||o(t).errors.seo_keywords),1)):b("",!0)]),l("div",null,[e[23]||(e[23]=l("label",{class:"mb-1 block text-sm font-medium text-foreground"},"SEO Meta Açıklaması",-1)),l("textarea",{value:o(t).meta_description,onInput:e[12]||(e[12]=s=>o(t).meta_description=s.target.value),placeholder:"Arama motorları için kısa bir açıklama (max 160 karakter)",class:y(["flex min-h-[60px] w-full rounded border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive":i.value.meta_description||o(t).errors.meta_description}]),maxlength:"160",rows:"2"},null,42,Ye),l("div",qe,[i.value.meta_description||o(t).errors.meta_description?(c(),d("p",Ge,m(i.value.meta_description||o(t).errors.meta_description),1)):b("",!0),l("span",Je,m(((n=o(t).meta_description)==null?void 0:n.length)||0)+"/160",1)])]),l("div",null,[e[24]||(e[24]=l("label",{class:"mb-1 block text-sm font-medium text-foreground"},"Görüntülenme Sayısı",-1)),l("input",{type:"number",value:o(t).views_count,onInput:e[13]||(e[13]=s=>o(t).views_count=s.target.value),class:"flex h-9 w-full rounded border border-input bg-muted px-3 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50",readonly:""},null,40,We)]),l("div",Qe,[l("label",Xe,[C(l("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=s=>o(t).hasDraw=s),class:"h-4 w-4 rounded border-input text-primary"},null,512),[[xe,o(t).hasDraw]]),e[25]||(e[25]=l("span",{class:"text-xs text-foreground"},"Çizim İçerir",-1))])])]),l("div",Ze,[l("button",{type:"button",onClick:G,class:"inline-flex h-9 items-center justify-center rounded-md border border-input bg-background px-4 text-sm font-medium ring-offset-background transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",disabled:o(t).processing}," Sıfırla ",8,et),l("button",{type:"submit",class:"inline-flex h-9 items-center justify-center rounded-md bg-primary px-4 text-sm font-medium text-primary-foreground ring-offset-background transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",disabled:o(t).processing||!o(t).title||!o(t).slug||!o(t).content||!o(t).category_id},[o(t).processing?(c(),d("svg",st,[...e[26]||(e[26]=[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):b("",!0),ye(" "+m(o(t).processing?"Kaydediliyor...":"Kaydet"),1)],8,tt)])],32)])}}});export{dt as default};
