import{g as r,b as V,y as $,x as A,e as K,c as N,j as O,a as o,P as U,i as P,m as q,R as F,o as R}from"./ssr-BOUwjHOF.js";import{_ as G}from"./app-CDYYNCdT.js";const J={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4"},Q={class:"w-full max-w-4xl rounded-xl bg-card shadow-2xl"},Z={class:"relative bg-black p-6"},ee=["src"],te={class:"mt-4 flex items-center justify-center gap-4"},oe=["disabled"],ne=["disabled"],se={__name:"ImageCropper",props:{show:{type:Boolean,default:!1},imageSrc:{type:String,default:""}},emits:["crop","cancel"],setup(g,{emit:B}){const L=g,h=B,i=r(null),c=r(null),n=r(1),u=r(0),d=r(0),p=r(!1),f=r(0),b=r(0),_=r(0),E=r(0),j=V(()=>({transform:`translate(${u.value}px, ${d.value}px) scale(${n.value})`,transformOrigin:"center center"})),H=()=>{if(!c.value||!i.value)return;const t=c.value,e=i.value;_.value=t.naturalWidth,E.value=t.naturalHeight;const s=e.clientWidth/e.clientHeight;t.naturalWidth/t.naturalHeight>s?(t.style.height="100%",t.style.width="auto"):(t.style.width="100%",t.style.height="auto"),setTimeout(()=>{const a=t.getBoundingClientRect(),l=e.getBoundingClientRect();u.value=(l.width-a.width)/2,d.value=(l.height-a.height)/2},10)},x=t=>{p.value=!0;const e=t.touches?t.touches[0]:t;f.value=e.clientX-u.value,b.value=e.clientY-d.value,document.addEventListener("mousemove",v),document.addEventListener("mouseup",m),document.addEventListener("touchmove",v),document.addEventListener("touchend",m)},v=t=>{if(!p.value)return;t.preventDefault();const e=t.touches?t.touches[0]:t;u.value=e.clientX-f.value,d.value=e.clientY-b.value},m=()=>{p.value=!1,document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",m),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",m)},M=()=>{n.value<3&&(n.value=Math.min(3,n.value+.2))},I=()=>{n.value>1&&(n.value=Math.max(1,n.value-.2))},D=()=>{if(!i.value||!c.value)return;const t=i.value,e=c.value,s=document.createElement("canvas"),y=s.getContext("2d");s.width=1920,s.height=1080;const a=t.getBoundingClientRect(),l=e.getBoundingClientRect(),k=e.naturalWidth/l.width,C=e.naturalHeight/l.height,X=(a.left-l.left)*k,Y=(a.top-l.top)*C,S=a.width*k,z=a.height*C;y.drawImage(e,X,Y,S,z,0,0,s.width,s.height),s.toBlob(T=>{h("crop",T)},"image/jpeg",.9)},w=()=>{h("cancel")},W=()=>{n.value=1,u.value=0,d.value=0};return $(()=>L.show,t=>{t&&W()}),A(()=>{m()}),(t,e)=>(R(),K(F,{to:"body"},[g.show?(R(),N("div",J,[o("div",Q,[o("div",{class:"flex items-center justify-between border-b border-border px-6 py-4"},[e[2]||(e[2]=o("h3",{class:"text-lg font-semibold text-foreground"},"Resmi Konumlandır",-1)),o("button",{onClick:w,class:"text-muted-foreground hover:text-foreground"},[...e[1]||(e[1]=[o("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),o("div",Z,[o("div",{ref_key:"cropArea",ref:i,class:"relative mx-auto aspect-video max-h-[50vh] overflow-hidden rounded-lg border-2 border-primary",onMousedown:x,onTouchstart:x},[o("img",{ref_key:"imageRef",ref:c,src:g.imageSrc,style:U(j.value),class:"absolute cursor-move select-none",draggable:"false",onLoad:H},null,44,ee)],544),o("div",te,[o("button",{onClick:I,class:"rounded-lg bg-muted p-2 text-foreground hover:bg-muted/80",disabled:n.value<=1},[...e[3]||(e[3]=[o("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])],8,oe),P(o("input",{type:"range","onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s),min:"1",max:"3",step:"0.1",class:"h-2 w-48 cursor-pointer appearance-none rounded-lg bg-muted"},null,512),[[q,n.value]]),o("button",{onClick:M,class:"rounded-lg bg-muted p-2 text-foreground hover:bg-muted/80",disabled:n.value>=3},[...e[4]||(e[4]=[o("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,ne)])]),e[5]||(e[5]=o("div",{class:"border-t border-border px-6 py-3"},[o("p",{class:"text-center text-sm text-muted-foreground"}," Resmi sürükleyerek konumlandırın ")],-1)),o("div",{class:"flex items-center justify-end gap-3 border-t border-border px-6 py-4"},[o("button",{onClick:w,class:"rounded-lg border border-border px-4 py-2 text-sm font-medium text-foreground hover:bg-accent"}," İptal "),o("button",{onClick:D,class:"rounded-lg bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90"}," Kaydet ")])])])):O("",!0)]))}},le=G(se,[["__scopeId","data-v-9937c924"]]);export{le as I};
