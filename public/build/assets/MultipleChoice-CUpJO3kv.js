import{Q as L,i as g,l as y,x as $,g as a,o,b as s,t as l,F as b,m as k,n as x,h as p,U as D}from"./app-DQVzeCX6.js";/* empty css            */const F={class:"flex min-h-screen flex-col items-center justify-center"},G={key:0,class:"w-full max-w-md rounded-2xl border border-gray-200 bg-white p-6 shadow-sm"},U=s("h2",{class:"mb-2 text-2xl font-semibold text-gray-900"},"Test Özeti",-1),E={class:"mb-4 text-center"},N={class:"text-4xl font-bold text-gray-900"},V=s("p",{class:"text-sm text-gray-600"},"Puan",-1),q={class:"mb-4 grid grid-cols-2 gap-4 rounded-lg bg-gray-50 p-4"},K={class:"text-center"},Y={class:"text-2xl font-bold text-green-600"},Z=s("p",{class:"text-sm text-gray-600"},"Doğru",-1),J={class:"text-center"},X={class:"text-2xl font-bold text-red-600"},ee=s("p",{class:"text-sm text-gray-600"},"Yanlış",-1),te={class:"mb-4 max-h-60 overflow-y-auto"},se=s("h3",{class:"mb-2 font-medium text-gray-700"},"Cevaplarınız:",-1),ne={class:"space-y-2 text-left text-sm text-gray-800"},re={class:"flex flex-col"},le={class:"text-xs text-gray-500"},ae={class:"flex gap-2"},oe={class:"mb-4 h-1 w-full overflow-hidden rounded-full bg-gray-200"},ue={class:"mb-4 text-right text-sm text-gray-500"},ie={key:0,class:"space-y-4"},ce={class:"flex items-center justify-between"},de={class:"text-xl font-semibold text-gray-900"},ge=["disabled"],ve={class:"mt-1 text-sm text-gray-500"},me={key:0,class:"rounded-lg bg-blue-50 p-3"},he=s("p",{class:"text-sm text-blue-600"},"Örnek Cümle:",-1),xe={key:0,class:"mt-1 text-sm text-gray-700"},fe={key:1,class:"mt-1 text-sm text-gray-700"},pe={class:"space-y-2"},_e=["onClick","disabled"],Qe={__name:"MultipleChoice",props:{gameType:String,packSlug:String,words:Array,gameConfig:Object},emits:["game-completed"],setup(C,{emit:Q}){const i=C,A=Q,I=L().props.languagePacks||[];g(()=>i.packSlug?I.find(t=>t.slug===i.packSlug):null);const e=y({isLoading:!0,isPlaying:!1,currentQuestion:null,currentOptions:[],selectedAnswer:null,showAnswer:!1,isCorrect:!1,progress:0,currentIndex:0,totalQuestions:0,userResponses:[],hintShown:!1,currentHintIndex:0}),h=y([]),_=g(()=>Object.fromEntries(h.value.map(t=>[t.id,t]))),S=()=>{e.value.currentIndex++,e.value.progress=Math.round(e.value.currentIndex/e.value.totalQuestions*100),e.value.currentIndex<e.value.totalQuestions?(e.value.selectedAnswer=null,e.value.showAnswer=!1,e.value.currentOptions=[],e.value.hintShown=!1,e.value.currentHintIndex=0,e.value.currentQuestion=h.value[e.value.currentIndex]):e.value.isPlaying=!1},w=async()=>{if(!i.words||i.words.length<2){alert("Oyunu başlatmak için en az 2 kelime gereklidir.");return}e.value.isLoading=!0;let t=[...i.words];if(i.gameConfig.prioritizeUnlearned){const u=t.filter(d=>d.learning_status===0),r=t.filter(d=>d.learning_status===1),c=t.filter(d=>d.learning_status===2);t=[...u,...r,...c]}else t=t.sort(()=>.5-Math.random());const n=Math.min(i.gameConfig.questionCount,t.length);t=t.slice(0,n),e.value={isLoading:!1,isPlaying:!0,currentQuestion:t[0],currentOptions:[],selectedAnswer:null,showAnswer:!1,isCorrect:!1,progress:0,currentIndex:0,totalQuestions:t.length,userResponses:[],hintShown:!1,currentHintIndex:0},h.value=t},O=g(()=>{if(!e.value.userResponses.length)return 0;const t=e.value.userResponses.filter(n=>n.correct).length;return Math.round(t/e.value.userResponses.length*100)}),M=t=>{switch(t){case"noun":return"İsim";case"verb":return"Fiil";case"adjective":return"Sıfat";case"adverb":return"Zarf";default:return"Bilinmiyor"}},R=g(()=>e.value.userResponses.filter(t=>t.correct).length),H=g(()=>e.value.userResponses.filter(t=>!t.correct).length),P=g(()=>e.value.currentQuestion?(e.value.currentOptions.length===0&&(e.value.currentOptions=B(e.value.currentQuestion,h.value)),e.value.currentOptions):[]),T=t=>{e.value.selectedAnswer=t,e.value.showAnswer=!0,e.value.isCorrect=f(t,e.value.currentQuestion),e.value.userResponses.push({word_id:e.value.currentQuestion.id,selected_option:t.meaningText,correct:e.value.isCorrect}),e.value.isCorrect||incrementIncorrectCount(e.value.currentQuestion.id),setTimeout(()=>{S()},1500)},W=()=>{e.value={isLoading:!0,isPlaying:!1,currentQuestion:null,currentOptions:[],selectedAnswer:null,showAnswer:!1,isCorrect:!1,progress:0,currentIndex:0,totalQuestions:0,userResponses:[],hintShown:!1,currentHintIndex:0},w()},j=()=>{if(!e.value.currentQuestion.example_sentences||e.value.currentQuestion.example_sentences.length===0){e.value.hintShown=!0;return}e.value.hintShown?e.value.currentHintIndex=(e.value.currentHintIndex+1)%e.value.currentQuestion.example_sentences.length:(e.value.hintShown=!0,e.value.currentHintIndex=0)},v=t=>{if(!t)return"";if(t.meanings&&t.meanings.length>0){const n=t.meanings.find(u=>u.is_primary);return n?n.meaning:t.meanings[0].meaning}return t.meaning||""},f=(t,n)=>!t||!n?!1:t.wordId===n.id,z=t=>{var n;return((n=e.value.selectedAnswer)==null?void 0:n.wordId)===t.wordId},B=(t,n,u=4)=>{const r={wordId:t.id,meaningText:v(t),isCorrect:!0};return[...[...n.filter(m=>m.id!==t.id&&v(m)!==v(t))].sort(()=>.5-Math.random()).slice(0,u-1).map(m=>({wordId:m.id,meaningText:v(m),isCorrect:!1})),r].sort(()=>.5-Math.random())};return $(()=>{w()}),(t,n)=>{var u;return o(),a("div",F,[!e.value.isPlaying&&e.value.userResponses.length>0?(o(),a("div",G,[U,s("div",E,[s("p",N,l(O.value)+" / 100",1),V]),s("div",q,[s("div",K,[s("p",Y,l(R.value),1),Z]),s("div",J,[s("p",X,l(H.value),1),ee])]),s("div",te,[se,s("ul",ne,[(o(!0),a(b,null,k(e.value.userResponses,r=>{var c;return o(),a("li",{key:r.word_id,class:"flex items-center justify-between rounded-md bg-gray-50 px-4 py-2"},[s("div",re,[s("span",{class:x(r.correct?"font-medium text-green-600":"font-medium text-red-600")},l(((c=_.value[r.word_id])==null?void 0:c.word)||"Unknown"),3),s("span",le,l(v(_.value[r.word_id])),1)]),s("span",{class:x(r.correct?"text-lg text-green-600":"text-lg text-red-600")},l(r.correct?"✓":"✗"),3)])}),128))])]),s("div",ae,[s("button",{onClick:n[0]||(n[0]=r=>A("game-completed")),class:"flex-1 rounded-lg bg-black px-4 py-2 text-center text-sm font-medium text-white transition hover:bg-gray-700"}," Pakete Dön "),s("button",{onClick:W,class:"flex-1 rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 transition hover:bg-gray-100"}," Tekrar Başla ")])])):(o(),a("div",{key:1,class:x(["relative w-full max-w-md rounded-2xl border border-gray-200 p-6 shadow-sm transition-colors duration-500",{"bg-white":!e.value.showAnswer,"bg-green-50":e.value.showAnswer&&e.value.isCorrect,"bg-red-50":e.value.showAnswer&&!e.value.isCorrect}])},[s("div",oe,[s("div",{class:"duration-2000 h-full bg-black transition-all",style:D({width:`${e.value.progress}%`})},null,4)]),s("div",ue," Soru "+l(e.value.currentIndex+1)+" / "+l(e.value.totalQuestions),1),e.value.currentQuestion?(o(),a("div",ie,[s("div",null,[s("div",ce,[s("h2",de,' "'+l(e.value.currentQuestion.word)+'" kelimesinin anlamı nedir? ',1),e.value.showAnswer?p("",!0):(o(),a("button",{key:0,onClick:j,class:"rounded-lg border border-gray-200 px-3 py-1 text-sm text-gray-600 hover:bg-gray-50",disabled:e.value.hintShown&&(!e.value.currentQuestion.example_sentences||e.value.currentQuestion.example_sentences.length<=1)},l(e.value.hintShown?`İpucu (${e.value.currentHintIndex+1}/${((u=e.value.currentQuestion.example_sentences)==null?void 0:u.length)||0})`:"İpucu Göster"),9,ge))]),s("p",ve,"Kelime Türü: "+l(M(e.value.currentQuestion.type)),1)]),e.value.hintShown?(o(),a("div",me,[he,e.value.currentQuestion.example_sentences&&e.value.currentQuestion.example_sentences.length>0?(o(),a("p",xe,l(e.value.currentQuestion.example_sentences[e.value.currentHintIndex].sentence),1)):(o(),a("p",fe,"Bu kelime için örnek cümle bulunmuyor."))])):p("",!0),s("div",pe,[(o(!0),a(b,null,k(P.value,(r,c)=>(o(),a("button",{key:c,onClick:d=>T(r),disabled:e.value.showAnswer,class:x(["w-full rounded-lg border border-gray-200 p-3 text-left text-base text-gray-900 transition hover:bg-gray-50 disabled:cursor-not-allowed",{"border-green-500 bg-green-50":e.value.showAnswer&&f(r,e.value.currentQuestion),"border-red-500 bg-red-50":e.value.showAnswer&&!f(r,e.value.currentQuestion)&&z(r)}])},l(r.meaningText),11,_e))),128))])])):p("",!0)],2))])}}};export{Qe as default};
