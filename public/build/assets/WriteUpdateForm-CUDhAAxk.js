import{Q as U,r as g,T as O,m as k,s as _,c as n,a as e,A as D,l as N,h as m,k as d,v as b,u as s,n as c,t as v,e as j,C as h,F as T,g as B,H as C,o as p,N as M}from"./ssr-CAy-S3_r.js";import Y from"./RichTextEditor-DEK7qunV.js";import"./quill.snow-h3o3GN4v.js";import"./app-CfiUSdJ9.js";/* empty css            */const A={class:"card"},E={class:"card-body p-6"},L={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},$={class:"md:col-span-2"},F={class:"form-control w-full"},G={class:"relative"},K={key:0,class:"label"},I={class:"label-text-alt text-error"},H={class:"form-control w-full"},W={class:"relative"},J={key:0,class:"label"},Q={class:"label-text-alt text-error"},R={class:"form-control w-full"},q={class:"flex space-x-2"},P={key:0,class:"label"},X={class:"label-text-alt text-error"},Z={class:"md:col-span-2"},ee={class:"form-control w-full"},te={class:"relative"},le={key:0,class:"label"},se={class:"label-text-alt text-error"},ae={class:"md:col-span-2"},re=["value"],oe={key:0,class:"label"},ie={class:"label-text-alt text-error"},ue={key:0,class:"label"},ne={class:"label-text-alt text-error"},de={class:"form-control w-full"},pe={class:"relative"},ce={key:0,class:"label"},ve={class:"label-text-alt text-error"},me={class:"form-control w-full"},be={class:"relative"},_e={key:0,class:"label"},ge={class:"label-text-alt text-error"},ye={class:"form-control w-full"},xe={class:"relative"},we={class:"mt-1 text-xs text-gray-500"},fe={key:0,class:"label"},ke={class:"label-text-alt text-error"},he={class:"form-control w-full"},Se={class:"relative"},ze={class:"flex items-center space-x-2"},Ve={class:"label cursor-pointer justify-start gap-2"},Ue={class:"flex justify-end space-x-3"},Oe=["disabled"],Me=Object.assign({name:"WriteUpdateForm"},{__name:"WriteUpdateForm",setup(De){const{props:w}=U(),S=g(w.categories),i=g(w.write),t=O({title:i.value.title||"",slug:i.value.slug||"",content:i.value.content||"",published_at:i.value.published_at||"",summary:i.value.summary||"",status:i.value.status||"draft",category_id:i.value.category_id||"",seo_keywords:i.value.seo_keywords||"",meta_description:i.value.meta_description||"",tags:i.value.tags||"",views_count:i.value.views_count||0,hasDraw:i.value.hasDraw||!1}),a=g({title:"",slug:"",content:"",published_at:"",summary:"",status:"",category_id:"",seo_keywords:"",meta_description:"",tags:""}),u=g({date:"",time:""});k(()=>{if(t.published_at){const o=new Date(t.published_at);isNaN(o.getTime())||(u.value.date=o.toISOString().split("T")[0],u.value.time=o.toTimeString().substring(0,5))}}),_(u.value,()=>{u.value.date&&u.value.time&&(t.published_at=`${u.value.date}T${u.value.time}:00`)},{deep:!0});const z=()=>{a.value.title=t.title?"":"Başlık zorunludur.",a.value.slug=t.slug?"":"Slug zorunludur.",a.value.content=t.content?"":"İçerik zorunludur.",a.value.published_at=u.value.date&&u.value.time?"":"Yayınlama tarihi zorunludur.",a.value.summary=t.summary?"":"Özet zorunludur.",a.value.category_id=t.category_id?"":"Kategori seçilmelidir.",a.value.published_at||(t.published_at=`${u.value.date}T${u.value.time}:00`)},y=`write_edit_form_${i.value.id||i.value.slug||"unknown"}`;_(t,o=>{localStorage.setItem(y,JSON.stringify(o))},{deep:!0}),k(()=>{const o=localStorage.getItem(y);if(o){const l=JSON.parse(o);Object.assign(t,l)}});const V=()=>{z(),Object.values(a.value).some(o=>o!=="")||t.put(route("writes.update",{write:i.value.slug}),{onSuccess:()=>{localStorage.removeItem(y),M.visit(route("writes.show",{write:t.slug}))}})};let x=!0;return _(()=>t.title,o=>{x||(t.slug=o.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim())}),_(()=>t.slug,(o,l)=>{o!==l&&(x=!0)}),_(()=>t.slug,o=>{o===""&&(x=!1)}),(o,l)=>{var f;return p(),n("div",A,[e("div",E,[l[28]||(l[28]=D('<div class="card-title flex items-center justify-between"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg><h2 class="text-gray-800 dark:text-white">Yazıyı Güncelle</h2></div></div>',1)),e("form",{onSubmit:N(V,["prevent"]),class:"space-y-6"},[e("div",L,[e("div",$,[e("div",F,[l[13]||(l[13]=e("label",{class:"label"},[e("span",{class:"label-text"},"Başlık")],-1)),e("div",G,[d(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=r=>s(t).title=r),placeholder:"Yazının başlığını girin",class:c(["input-bordered input w-full",{"input-error":a.value.title||s(t).errors.title}])},null,2),[[b,s(t).title]])]),a.value.title||s(t).errors.title?(p(),n("label",K,[e("span",I,v(a.value.title||s(t).errors.title),1)])):m("",!0)])]),e("div",null,[e("div",H,[l[14]||(l[14]=e("label",{class:"label"},[e("span",{class:"label-text"},"Slug")],-1)),e("div",W,[d(e("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=r=>s(t).slug=r),placeholder:"örnek-yazı-slug",class:c(["input-bordered input w-full",{"input-error":a.value.slug||s(t).errors.slug}])},null,2),[[b,s(t).slug]])]),a.value.slug||s(t).errors.slug?(p(),n("label",J,[e("span",Q,v(a.value.slug||s(t).errors.slug),1)])):m("",!0)])]),e("div",null,[e("div",R,[l[15]||(l[15]=e("label",{class:"label"},[e("span",{class:"label-text"},"Yayınlama Tarihi")],-1)),e("div",q,[d(e("input",{type:"date","onUpdate:modelValue":l[2]||(l[2]=r=>u.value.date=r),class:c(["input-bordered input w-full",{"input-error":a.value.published_at||s(t).errors.published_at}])},null,2),[[b,u.value.date]]),d(e("input",{type:"time","onUpdate:modelValue":l[3]||(l[3]=r=>u.value.time=r),class:c(["input-bordered input w-full",{"input-error":a.value.published_at||s(t).errors.published_at}])},null,2),[[b,u.value.time]])]),a.value.published_at||s(t).errors.published_at?(p(),n("label",P,[e("span",X,v(a.value.published_at||s(t).errors.published_at),1)])):m("",!0)])]),e("div",Z,[e("div",ee,[l[16]||(l[16]=e("label",{class:"label"},[e("span",{class:"label-text"},"Özet")],-1)),e("div",te,[d(e("textarea",{"onUpdate:modelValue":l[4]||(l[4]=r=>s(t).summary=r),rows:"3",placeholder:"Yazının kısa özeti",class:c(["textarea-bordered textarea w-full",{"textarea-error":a.value.summary||s(t).errors.summary}])},null,2),[[b,s(t).summary]])]),a.value.summary||s(t).errors.summary?(p(),n("label",le,[e("span",se,v(a.value.summary||s(t).errors.summary),1)])):m("",!0)])]),e("div",ae,[j(Y,{modelValue:s(t).content,"onUpdate:modelValue":l[5]||(l[5]=r=>s(t).content=r),label:"İçerik",error:a.value.content||s(t).errors.content,placeholder:"İçeriği buraya yazın...",height:"400px"},null,8,["modelValue","error"])]),e("div",null,[l[18]||(l[18]=e("label",{class:"label"},[e("span",{class:"label-text"},"Kategori")],-1)),d(e("select",{"onUpdate:modelValue":l[6]||(l[6]=r=>s(t).category_id=r),class:c(["select-bordered select w-full",{"select-error":a.value.category_id||s(t).errors.category_id}])},[l[17]||(l[17]=e("option",{value:"",disabled:""},"Kategori seç",-1)),(p(!0),n(T,null,B(S.value,r=>(p(),n("option",{key:r.id,value:r.id},v(r.name),9,re))),128))],2),[[h,s(t).category_id]]),a.value.category_id||s(t).errors.category_id?(p(),n("label",oe,[e("span",ie,v(a.value.category_id||s(t).errors.category_id),1)])):m("",!0)]),e("div",null,[l[20]||(l[20]=e("label",{class:"label"},[e("span",{class:"label-text"},"Durumu")],-1)),d(e("select",{"onUpdate:modelValue":l[7]||(l[7]=r=>s(t).status=r),class:c(["select-bordered select w-full",{"select-error":a.value.status||s(t).errors.status}])},[...l[19]||(l[19]=[e("option",{value:"draft"},"Şablon",-1),e("option",{value:"published"},"Yayında",-1),e("option",{value:"private"},"Gizli",-1),e("option",{value:"link_only"},"Sadece Link",-1)])],2),[[h,s(t).status]]),a.value.status||s(t).errors.status?(p(),n("label",ue,[e("span",ne,v(a.value.status||s(t).errors.status),1)])):m("",!0)]),e("div",null,[e("div",de,[l[21]||(l[21]=e("label",{class:"label"},[e("span",{class:"label-text"},"Etiketler")],-1)),e("div",pe,[d(e("input",{type:"text","onUpdate:modelValue":l[8]||(l[8]=r=>s(t).tags=r),placeholder:"etiket1, etiket2, etiket3",class:c(["input-bordered input w-full",{"input-error":a.value.tags||s(t).errors.tags}])},null,2),[[b,s(t).tags]])]),a.value.tags||s(t).errors.tags?(p(),n("label",ce,[e("span",ve,v(a.value.tags||s(t).errors.tags),1)])):m("",!0)])]),e("div",null,[e("div",me,[l[22]||(l[22]=e("label",{class:"label"},[e("span",{class:"label-text"},"SEO Anahtar Kelimeleri")],-1)),e("div",be,[d(e("input",{type:"text","onUpdate:modelValue":l[9]||(l[9]=r=>s(t).seo_keywords=r),placeholder:"anahtar1, anahtar2, anahtar3",class:c(["input-bordered input w-full",{"input-error":a.value.seo_keywords||s(t).errors.seo_keywords}])},null,2),[[b,s(t).seo_keywords]])]),a.value.seo_keywords||s(t).errors.seo_keywords?(p(),n("label",_e,[e("span",ge,v(a.value.seo_keywords||s(t).errors.seo_keywords),1)])):m("",!0)])]),e("div",null,[e("div",ye,[l[23]||(l[23]=e("label",{class:"label"},[e("span",{class:"label-text"},"SEO Meta Açıklaması")],-1)),e("div",xe,[d(e("textarea",{"onUpdate:modelValue":l[10]||(l[10]=r=>s(t).meta_description=r),placeholder:"Arama motorları için kısa bir açıklama (max 160 karakter)",class:c(["textarea-bordered textarea w-full",{"textarea-error":a.value.meta_description||s(t).errors.meta_description}]),maxlength:"160",rows:"2"},null,2),[[b,s(t).meta_description]]),e("div",we,v(((f=s(t).meta_description)==null?void 0:f.length)||0)+"/160",1)]),a.value.meta_description||s(t).errors.meta_description?(p(),n("label",fe,[e("span",ke,v(a.value.meta_description||s(t).errors.meta_description),1)])):m("",!0),l[24]||(l[24]=e("div",{class:"mt-1 text-xs text-gray-500"},[e("span",null,"İpucu: Bu açıklama arama sonuçlarında gösterilir. Boş bırakırsanız, özet kısmı kullanılacaktır.")],-1))])]),e("div",null,[e("div",he,[l[25]||(l[25]=e("label",{class:"label"},[e("span",{class:"label-text"},"Görüntülenme Sayısı")],-1)),e("div",Se,[d(e("input",{type:"number","onUpdate:modelValue":l[11]||(l[11]=r=>s(t).views_count=r),class:"input-bordered input w-full",readonly:""},null,512),[[b,s(t).views_count]])])])]),e("div",ze,[e("label",Ve,[d(e("input",{type:"checkbox","onUpdate:modelValue":l[12]||(l[12]=r=>s(t).hasDraw=r),class:"checkbox checkbox-primary"},null,512),[[C,s(t).hasDraw]]),l[26]||(l[26]=e("span",{class:"label-text"},"Çizim İçerir",-1))])])]),l[27]||(l[27]=e("div",{class:"divider"},null,-1)),e("div",Ue,[e("button",{type:"submit",class:c(["btn btn-primary",{loading:s(t).processing}]),disabled:s(t).processing}," Güncelle ",10,Oe)])],32)])])}}});export{Me as default};
