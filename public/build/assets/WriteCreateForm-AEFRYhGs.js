import{Q as K,r as b,T as N,m as C,s as z,c as i,o as n,a as t,z as $,l as M,h as d,n as _,u as s,t as v,k,v as w,e as U,F as E,g as I,G as A,N as G}from"./ssr-CelVhnxm.js";import H from"./RichTextEditor-Bs6qTs_i.js";import"./quill.snow-e-7rVIw3.js";import"./app-DKGn_rdn.js";/* empty css            */const J={class:"card"},P={class:"card-body p-6"},R=$('<div class="card-title flex items-center justify-between"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg><h2 class="text-gray-800 dark:text-white">Yeni Yazı Oluştur</h2></div></div>',1),W={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},Q={class:"md:col-span-2"},q={class:"form-control w-full"},X=t("label",{class:"label"},[t("span",{class:"label-text"},"Başlık")],-1),Z={class:"relative"},ee=["value"],te={key:0,class:"label"},se={class:"label-text-alt text-error"},le={class:"form-control w-full"},ae=t("label",{class:"label"},[t("span",{class:"label-text"},"Slug")],-1),oe={class:"relative"},re=["value"],ie={key:0,class:"label"},ne={class:"label-text-alt text-error"},ue={class:"form-control w-full"},ce=t("label",{class:"label"},[t("span",{class:"label-text"},"Yayınlama Tarihi")],-1),de={class:"flex space-x-2"},ve={key:0,class:"label"},_e={class:"label-text-alt text-error"},pe={class:"md:col-span-2"},me={class:"form-control w-full"},be=t("label",{class:"label"},[t("span",{class:"label-text"},"Özet")],-1),ge={class:"relative"},he=["value"],ye={key:0,class:"label"},fe={class:"label-text-alt text-error"},xe={class:"md:col-span-2"},ke=t("label",{class:"label"},[t("span",{class:"label-text"},"Durumu")],-1),we={class:"dropdown w-full"},Se={class:"relative"},Ce={key:0,tabindex:"0",class:"dropdown-content menu z-[1] max-h-60 w-full overflow-y-auto rounded-box bg-base-100 p-2 shadow"},ze=["onClick"],Ee={key:0,class:"label"},Ie={class:"label-text-alt text-error"},Oe=t("label",{class:"label"},[t("span",{class:"label-text"},"Kategori")],-1),Fe={class:"dropdown w-full"},Ve={class:"relative"},je={key:0,tabindex:"0",class:"dropdown-content menu z-[1] max-h-60 w-full overflow-y-auto rounded-box bg-base-100 p-2 shadow"},De=["onClick"],Le={key:0,class:"label"},Te={class:"label-text-alt text-error"},Ye={class:"form-control w-full"},Be=t("label",{class:"label"},[t("span",{class:"label-text"},"Etiketler")],-1),Ke={class:"relative"},Ne=["value"],$e={key:0,class:"label"},Me={class:"label-text-alt text-error"},Ue={class:"form-control w-full"},Ae=t("label",{class:"label"},[t("span",{class:"label-text"},"SEO Anahtar Kelimeleri")],-1),Ge={class:"relative"},He=["value"],Je={key:0,class:"label"},Pe={class:"label-text-alt text-error"},Re={class:"form-control w-full"},We=t("label",{class:"label"},[t("span",{class:"label-text"},"SEO Meta Açıklaması")],-1),Qe={class:"relative"},qe=["value"],Xe={class:"mt-1 text-xs text-gray-500"},Ze={key:0,class:"label"},et={class:"label-text-alt text-error"},tt=t("div",{class:"mt-1 text-xs text-gray-500"},[t("span",null,"İpucu: Bu açıklama arama sonuçlarında gösterilir. Boş bırakırsanız, özet kısmı kullanılacaktır.")],-1),st={class:"form-control w-full"},lt=t("label",{class:"label"},[t("span",{class:"label-text"},"Görüntülenme Sayısı")],-1),at={class:"relative"},ot=["value"],rt={class:"flex items-center space-x-2"},it={class:"label cursor-pointer justify-start gap-2"},nt=t("span",{class:"label-text"},"Çizim İçerir",-1),ut=t("div",{class:"divider"},null,-1),ct={class:"flex justify-end space-x-3"},dt=["disabled"],vt=["disabled","title"],y="write_create_form",yt=Object.assign({name:"WriteCreateForm"},{__name:"WriteCreateForm",setup(_t){const{props:g}=K();b(g.categories||[]);const e=N({title:"",slug:"",content:"",published_at:"",summary:"",status:"draft",category_id:"",seo_keywords:"",meta_description:"",tags:"",views_count:0,hasDraw:!1});e.processing=!1;const a=b({title:"",slug:"",content:"",published_at:"",summary:"",status:"",category_id:"",seo_keywords:"",meta_description:"",tags:""}),u=b({date:"",time:""}),f=[{value:"draft",label:"Şablon"},{value:"published",label:"Yayında"},{value:"private",label:"Gizli"},{value:"link_only",label:"Sadece Link"}],p=b(""),m=b(""),x=b(f),h=b(g.categories||[]),O=()=>{const r=p.value.toLowerCase();x.value=f.filter(l=>l.label.toLowerCase().includes(r))},F=()=>{const r=m.value.toLowerCase();h.value=g.categories.filter(l=>l.name.toLowerCase().includes(r))},V=r=>{e.status=r.value,p.value=r.label,x.value=f},j=r=>{e.category_id=r.id,m.value=r.name,h.value=g.categories},D=()=>{p.value="",e.status="",x.value=f},L=()=>{m.value="",e.category_id="",h.value=g.categories};C(()=>{const r=f.find(l=>l.value===e.status);if(r&&(p.value=r.label),e.category_id){const l=g.categories.find(c=>c.id===e.category_id);l&&(m.value=l.name)}}),C(()=>{const r=new Date;u.value.date=r.toISOString().split("T")[0],u.value.time=r.toTimeString().slice(0,5)}),z(u.value,()=>{u.value.date&&u.value.time&&(e.published_at=`${u.value.date}T${u.value.time}:00`)},{deep:!0}),z(e,r=>{const{processing:l,...c}=r;localStorage.setItem(y,JSON.stringify(c))},{deep:!0}),C(()=>{e.processing=!1;const r=localStorage.getItem(y);if(r)try{const l=JSON.parse(r),{processing:c,...o}=l;Object.keys(o).length>0&&(o.title||o.content||o.category_id)?Object.assign(e,o):localStorage.removeItem(y)}catch(l){console.error("Error parsing localStorage data:",l),localStorage.removeItem(y)}e.processing=!1,console.log("Form mounted. Processing:",e.processing),console.log("Form data:",e.data())});const T=()=>{Object.keys(a.value).forEach(r=>{a.value[r]=""}),(!e.title||e.title.trim()==="")&&(a.value.title="Başlık zorunludur."),(!e.slug||e.slug.trim()==="")&&(a.value.slug="Slug zorunludur."),(!e.content||e.content.trim()==="")&&(a.value.content="İçerik zorunludur."),e.category_id||(a.value.category_id="Kategori seçilmelidir."),(!e.summary||e.summary.trim()==="")&&(a.value.summary="Özet önerilir (opsiyonel)."),u.value.date&&u.value.time?e.published_at=`${u.value.date}T${u.value.time}:00`:e.published_at=null,console.log("Validation completed. Errors:",a.value)},Y=()=>{T(),console.log("Form errors:",a.value),console.log("Form data:",e.data()),console.log("Publish date obj:",u.value),["title","slug","content","category_id"].some(c=>a.value[c]!=="")?console.log("Form validation failed - critical errors present"):e.post(route("writes.store"),{onSuccess:()=>{localStorage.removeItem(y),G.visit(route("dashboard"))},onError:c=>{console.log("Server errors:",c)}})},B=()=>{e.reset(),e.processing=!1,Object.keys(a.value).forEach(r=>{a.value[r]=""}),u.value={date:"",time:""},localStorage.removeItem(y),console.log("Form reset completed")};return z(()=>e.title,r=>{const l={ı:"i",İ:"i",ğ:"g",Ğ:"g",ü:"u",Ü:"u",ş:"s",Ş:"s",ö:"o",Ö:"o",ç:"c",Ç:"c"};let c=r;Object.entries(l).forEach(([o,S])=>{c=c.replace(new RegExp(o,"g"),S)}),e.slug=c.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}),(r,l)=>{var c;return n(),i("div",J,[t("div",P,[R,t("form",{onSubmit:M(Y,["prevent"]),class:"space-y-6"},[t("div",W,[t("div",Q,[t("div",q,[X,t("div",Z,[t("input",{type:"text",value:s(e).title,onInput:l[0]||(l[0]=o=>s(e).title=o.target.value),placeholder:"Yazının başlığını girin",class:_(["input-bordered input w-full",{"input-error":a.value.title||s(e).errors.title}])},null,42,ee)]),a.value.title||s(e).errors.title?(n(),i("label",te,[t("span",se,v(a.value.title||s(e).errors.title),1)])):d("",!0)])]),t("div",null,[t("div",le,[ae,t("div",oe,[t("input",{type:"text",value:s(e).slug,onInput:l[1]||(l[1]=o=>s(e).slug=o.target.value),placeholder:"örnek-yazı-slug",class:_(["input-bordered input w-full",{"input-error":a.value.slug||s(e).errors.slug}])},null,42,re)]),a.value.slug||s(e).errors.slug?(n(),i("label",ie,[t("span",ne,v(a.value.slug||s(e).errors.slug),1)])):d("",!0)])]),t("div",null,[t("div",ue,[ce,t("div",de,[k(t("input",{type:"date","onUpdate:modelValue":l[2]||(l[2]=o=>u.value.date=o),class:_(["input-bordered input w-full",{"input-error":a.value.published_at||s(e).errors.published_at}])},null,2),[[w,u.value.date]]),k(t("input",{type:"time","onUpdate:modelValue":l[3]||(l[3]=o=>u.value.time=o),class:_(["input-bordered input w-full",{"input-error":a.value.published_at||s(e).errors.published_at}])},null,2),[[w,u.value.time]])]),a.value.published_at||s(e).errors.published_at?(n(),i("label",ve,[t("span",_e,v(a.value.published_at||s(e).errors.published_at),1)])):d("",!0)])]),t("div",pe,[t("div",me,[be,t("div",ge,[t("textarea",{value:s(e).summary,onInput:l[4]||(l[4]=o=>s(e).summary=o.target.value),placeholder:"Yazının kısa özeti",rows:"3",class:_(["textarea-bordered textarea w-full",{"textarea-error":a.value.summary||s(e).errors.summary}])},null,42,he)]),a.value.summary||s(e).errors.summary?(n(),i("label",ye,[t("span",fe,v(a.value.summary||s(e).errors.summary),1)])):d("",!0)])]),t("div",xe,[U(H,{modelValue:s(e).content,"onUpdate:modelValue":l[5]||(l[5]=o=>s(e).content=o),label:"İçerik",error:a.value.content||s(e).errors.content,placeholder:"İçeriği buraya yazın...",height:"400px"},null,8,["modelValue","error"])]),t("div",null,[ke,t("div",we,[t("div",Se,[k(t("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=o=>p.value=o),onInput:O,placeholder:"Durum seçin veya arayın...",class:_(["input-bordered input w-full pr-10",{"input-error":a.value.status||s(e).errors.status}]),tabindex:"0"},null,34),[[w,p.value]]),p.value?(n(),i("button",{key:0,onClick:D,class:"btn btn-ghost btn-xs btn-circle absolute right-2 top-1/2 -translate-y-1/2"}," ✕ ")):d("",!0)]),x.value.length>0?(n(),i("ul",Ce,[(n(!0),i(E,null,I(x.value,o=>(n(),i("li",{key:o.value},[t("a",{onClick:S=>V(o)},v(o.label),9,ze)]))),128))])):d("",!0)]),a.value.status||s(e).errors.status?(n(),i("label",Ee,[t("span",Ie,v(a.value.status||s(e).errors.status),1)])):d("",!0)]),t("div",null,[Oe,t("div",Fe,[t("div",Ve,[k(t("input",{type:"text","onUpdate:modelValue":l[7]||(l[7]=o=>m.value=o),onInput:F,placeholder:"Kategori seçin veya arayın...",class:_(["input-bordered input w-full pr-10",{"input-error":a.value.category_id||s(e).errors.category_id}]),tabindex:"0"},null,34),[[w,m.value]]),m.value?(n(),i("button",{key:0,onClick:L,class:"btn btn-ghost btn-xs btn-circle absolute right-2 top-1/2 -translate-y-1/2"}," ✕ ")):d("",!0)]),h.value&&h.value.length>0?(n(),i("ul",je,[(n(!0),i(E,null,I(h.value,o=>(n(),i("li",{key:o.id},[t("a",{onClick:S=>j(o)},v(o.name),9,De)]))),128))])):d("",!0)]),a.value.category_id||s(e).errors.category_id?(n(),i("label",Le,[t("span",Te,v(a.value.category_id||s(e).errors.category_id),1)])):d("",!0)]),t("div",null,[t("div",Ye,[Be,t("div",Ke,[t("input",{type:"text",value:s(e).tags,onInput:l[8]||(l[8]=o=>s(e).tags=o.target.value),placeholder:"etiket1, etiket2, etiket3",class:_(["input-bordered input w-full",{"input-error":a.value.tags||s(e).errors.tags}])},null,42,Ne)]),a.value.tags||s(e).errors.tags?(n(),i("label",$e,[t("span",Me,v(a.value.tags||s(e).errors.tags),1)])):d("",!0)])]),t("div",null,[t("div",Ue,[Ae,t("div",Ge,[t("input",{type:"text",value:s(e).seo_keywords,onInput:l[9]||(l[9]=o=>s(e).seo_keywords=o.target.value),placeholder:"anahtar1, anahtar2, anahtar3",class:_(["input-bordered input w-full",{"input-error":a.value.seo_keywords||s(e).errors.seo_keywords}])},null,42,He)]),a.value.seo_keywords||s(e).errors.seo_keywords?(n(),i("label",Je,[t("span",Pe,v(a.value.seo_keywords||s(e).errors.seo_keywords),1)])):d("",!0)])]),t("div",null,[t("div",Re,[We,t("div",Qe,[t("textarea",{value:s(e).meta_description,onInput:l[10]||(l[10]=o=>s(e).meta_description=o.target.value),placeholder:"Arama motorları için kısa bir açıklama (max 160 karakter)",class:_(["textarea-bordered textarea w-full",{"textarea-error":a.value.meta_description||s(e).errors.meta_description}]),maxlength:"160",rows:"2"},null,42,qe),t("div",Xe,v(((c=s(e).meta_description)==null?void 0:c.length)||0)+"/160",1)]),a.value.meta_description||s(e).errors.meta_description?(n(),i("label",Ze,[t("span",et,v(a.value.meta_description||s(e).errors.meta_description),1)])):d("",!0),tt])]),t("div",null,[t("div",st,[lt,t("div",at,[t("input",{type:"number",value:s(e).views_count,onInput:l[11]||(l[11]=o=>s(e).views_count=o.target.value),class:"input-bordered input w-full",readonly:""},null,40,ot)])])]),t("div",rt,[t("label",it,[k(t("input",{type:"checkbox","onUpdate:modelValue":l[12]||(l[12]=o=>s(e).hasDraw=o),class:"checkbox checkbox-neutral"},null,512),[[A,s(e).hasDraw]]),nt])])]),ut,t("div",ct,[t("button",{type:"button",onClick:B,class:"btn btn-outline",disabled:s(e).processing},"Sıfırla",8,dt),t("button",{type:"submit",class:_(["btn btn-primary",{loading:s(e).processing}]),disabled:s(e).processing||!s(e).title||!s(e).slug||!s(e).content||!s(e).category_id,title:s(e).processing?"Kaydediliyor...":!s(e).title||!s(e).slug||!s(e).content||!s(e).category_id?"Lütfen gerekli alanları doldurun":"Yazıyı kaydet"},v(s(e).processing?"Kaydediliyor...":"Yazıyı Kaydet"),11,vt)])],32)])])}}});export{yt as default};
