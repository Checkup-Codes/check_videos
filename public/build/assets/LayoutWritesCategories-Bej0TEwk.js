import{Q as x,e as p,y as f,s as H,p as u,m as P,x as j,Y as _,c as D,b as k,u as c,w as L,a as I,n as W,r as V,j as N,h as z,o as g,_ as A,$ as E,F as K}from"./ssr-B6-2V9vM.js";import{_ as O,a as Q}from"./FlashMessage-DQlSLHln.js";import T from"./SidebarLayoutWrite-BjYG5Ee-.js";import Y from"./SidebarLayoutCategory-D4D_eCKX.js";import{u as q}from"./useSidebar-DKdvn5NF.js";import"./WriteList-CtszrMSA.js";import"./app-DQ2l2dRT.js";/* empty css            */import"./CheckSubsidebar-Cl_8lLbN.js";import"./SubSidebarScreen-DxxsfM3_.js";import"./CategoryTree-BYNurAP2.js";function G(){var i;const{props:d}=x(),o=p(((i=d.flash)==null?void 0:i.success)||"");return f(()=>{var t;return(t=d.flash)==null?void 0:t.success},t=>{t&&(o.value=t,setTimeout(()=>{o.value=""},3e3))}),{flashMessage:o}}const le=Object.assign({name:"LayoutWritesCategories"},{__name:"LayoutWritesCategories",setup(d){var w;const{isCollapsed:o,isMobile:i,sidebarStyle:t}=q(),{flashMessage:M}=G(),v=H(),b=x(),{props:s}=b,l=((w=s.screen)==null?void 0:w.name)||"",B={writes:T,categories:Y},h=u(()=>!!(s.auth&&s.auth.user)),a=u(()=>{var S;if(console.log("LayoutWritesCategories Debug:",{isLoggedIn:h.value,currentUrl:s.url,currentWrite:s.write,writeStatus:(S=s.write)==null?void 0:S.status,screenName:l}),h.value)return console.log("User is logged in, showing sidebar"),!1;const e=b.url||s.url||"",m=e.includes("/writes/")&&!e.includes("/writes/create")&&!e.includes("/writes/edit"),y=e.includes("/categories/")&&!e.includes("/categories/create")&&!e.includes("/categories/edit");if(console.log("Page check:",{currentUrl:e,isWriteShowPage:m,isCategoryShowPage:y}),m||y){const r=s.write;if(console.log("Current write status:",r==null?void 0:r.status),r&&r.status==="link_only")return console.log("Hiding sidebar for link-only write"),!0}return console.log("Showing sidebar (default)"),!1});f(a,e=>{console.log("shouldHideSidebarContent changed:",e)},{immediate:!0});const U=u(()=>o.value&&l&&!a.value&&B[l]||null),n=p(v.getters["Writes/isCollapsed"]);f(()=>v.getters["Writes/isCollapsed"],e=>{n.value=e},{immediate:!0});const $=u(()=>({"transition-all duration-300":!0,"lg:ml-[-200px]":n.value&&!a.value,"lg:ml-[00px]":!n.value&&!a.value,"lg:ml-0":a.value})),F=e=>{n.value=e},C=p(!1);return P(()=>{C.value=!0,document.body.style.overflow="hidden"}),j(()=>{document.body.style.overflow=""}),_("categories",s.categories||[]),_("writes",s.writes||[]),(e,m)=>(g(),D(K,null,[k(O,{message:c(M)},null,8,["message"]),k(Q,{isCollapsed:!a.value},{sidebar:L(()=>[!a.value&&C.value?(g(),N(A,{key:0,max:5,include:["SidebarLayoutWrite","SidebarLayoutCategory"]},[(g(),N(E(U.value),{key:c(l),class:W(c(t)),"onUpdate:isNarrow":F},null,40,["class"]))],1024)):z("",!0)]),default:L(()=>[I("div",{class:W([c(i)?"hidden lg:block":"block",$.value])},[V(e.$slots,"screen")],2)]),_:3},8,["isCollapsed"])],64))}});export{le as default};
