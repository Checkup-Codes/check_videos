import{Q as M,l as h,T as D,x as z,L as g,A as j,g as u,o as d,b as e,p as C,e as L,h as v,j as c,q as m,u as s,n as _,t as p,D as S,F as B,m as N,v as O,N as E}from"./app-DQVzeCX6.js";import{Q as H}from"./quill.snow-BUg6TwNs.js";/* empty css            */const Y={class:"card"},q={class:"card-body p-6"},F=C('<div class="card-title flex items-center justify-between"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg><h2 class="text-gray-800 dark:text-white">Yazıyı Güncelle</h2></div></div>',1),A={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},G={class:"md:col-span-2"},K={class:"form-control w-full"},$=e("label",{class:"label"},[e("span",{class:"label-text"},"Başlık")],-1),I={class:"relative"},Q={key:0,class:"label"},W={class:"label-text-alt text-error"},J={class:"form-control w-full"},P=e("label",{class:"label"},[e("span",{class:"label-text"},"Slug")],-1),R={class:"relative"},X={key:0,class:"label"},Z={class:"label-text-alt text-error"},ee={class:"form-control w-full"},te=e("label",{class:"label"},[e("span",{class:"label-text"},"Yayınlama Tarihi")],-1),se={class:"flex space-x-2"},le={key:0,class:"label"},ae={class:"label-text-alt text-error"},oe={class:"md:col-span-2"},re={class:"form-control w-full"},ie=e("label",{class:"label"},[e("span",{class:"label-text"},"Özet")],-1),ne={class:"relative"},ue={key:0,class:"label"},de={class:"label-text-alt text-error"},ce={class:"md:col-span-2"},_e={class:"form-control w-full"},pe=e("label",{class:"label"},[e("span",{class:"label-text"},"İçerik")],-1),ve={class:"relative"},be={key:0,class:"label"},me={class:"label-text-alt text-error"},he=e("label",{class:"label"},[e("span",{class:"label-text"},"Kategori")],-1),ge=e("option",{value:"",disabled:""},"Kategori seç",-1),ye=["value"],xe={key:0,class:"label"},fe={class:"label-text-alt text-error"},we=e("label",{class:"label"},[e("span",{class:"label-text"},"Durumu")],-1),ke=e("option",{value:"draft"},"Şablon",-1),ze=e("option",{value:"published"},"Yayında",-1),Se=e("option",{value:"private"},"Gizli",-1),Ue=e("option",{value:"link_only"},"Sadece Link",-1),Ve=[ke,ze,Se,Ue],Te={key:0,class:"label"},Me={class:"label-text-alt text-error"},De={class:"form-control w-full"},je=e("label",{class:"label"},[e("span",{class:"label-text"},"Etiketler")],-1),Ce={class:"relative"},Le={key:0,class:"label"},Be={class:"label-text-alt text-error"},Ne={class:"form-control w-full"},Oe=e("label",{class:"label"},[e("span",{class:"label-text"},"SEO Anahtar Kelimeleri")],-1),Ee={class:"relative"},He={key:0,class:"label"},Ye={class:"label-text-alt text-error"},qe={class:"form-control w-full"},Fe=e("label",{class:"label"},[e("span",{class:"label-text"},"SEO Meta Açıklaması")],-1),Ae={class:"relative"},Ge={class:"mt-1 text-xs text-gray-500"},Ke={key:0,class:"label"},$e={class:"label-text-alt text-error"},Ie=e("div",{class:"mt-1 text-xs text-gray-500"},[e("span",null,"İpucu: Bu açıklama arama sonuçlarında gösterilir. Boş bırakırsanız, özet kısmı kullanılacaktır.")],-1),Qe={class:"form-control w-full"},We=e("label",{class:"label"},[e("span",{class:"label-text"},"Görüntülenme Sayısı")],-1),Je={class:"relative"},Pe={class:"flex items-center space-x-2"},Re={class:"label cursor-pointer justify-start gap-2"},Xe=e("span",{class:"label-text"},"Çizim İçerir",-1),Ze=e("div",{class:"divider"},null,-1),et={class:"flex justify-end space-x-3"},tt=["disabled"],rt=Object.assign({name:"WriteUpdateForm"},{__name:"WriteUpdateForm",setup(st){const{props:f}=M(),U=h(f.categories),n=h(f.write),t=D({title:n.value.title||"",slug:n.value.slug||"",content:n.value.content||"",published_at:n.value.published_at||"",summary:n.value.summary||"",status:n.value.status||"draft",category_id:n.value.category_id||"",seo_keywords:n.value.seo_keywords||"",meta_description:n.value.meta_description||"",tags:n.value.tags||"",views_count:n.value.views_count||0,hasDraw:n.value.hasDraw||!1}),l=h({title:"",slug:"",content:"",published_at:"",summary:"",status:"",category_id:"",seo_keywords:"",meta_description:"",tags:""}),i=h({date:"",time:""});z(()=>{if(t.published_at){const r=new Date(t.published_at);isNaN(r.getTime())||(i.value.date=r.toISOString().split("T")[0],i.value.time=r.toTimeString().substring(0,5))}}),g(i.value,()=>{i.value.date&&i.value.time&&(t.published_at=`${i.value.date}T${i.value.time}:00`)},{deep:!0});const V=()=>{l.value.title=t.title?"":"Başlık zorunludur.",l.value.slug=t.slug?"":"Slug zorunludur.",l.value.content=t.content?"":"İçerik zorunludur.",l.value.published_at=i.value.date&&i.value.time?"":"Yayınlama tarihi zorunludur.",l.value.summary=t.summary?"":"Özet zorunludur.",l.value.category_id=t.category_id?"":"Kategori seçilmelidir.",l.value.published_at||(t.published_at=`${i.value.date}T${i.value.time}:00`)},T=()=>{V(),Object.values(l.value).some(r=>r!=="")||t.put(route("writes.update",{write:n.value.slug}),{onSuccess:()=>{E.visit(route("writes.show",{write:t.slug}))}})};let x=!0;g(()=>t.title,r=>{x||(t.slug=r.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim())}),g(()=>t.slug,(r,a)=>{r!==a&&(x=!0)}),g(()=>t.slug,r=>{r===""&&(x=!1)});const y=h(null);let b,w=!1;return z(()=>{b=new H(y.value,{theme:"snow",modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["clean"]]},placeholder:"İçeriği buraya yazın...",bounds:y.value}),b.on("text-change",()=>{try{const r=b.root.innerHTML;t.content=r}catch(r){console.error("Content update error:",r)}}),setTimeout(()=>{if(t.content&&!w)try{b.root.innerHTML=t.content,w=!0}catch(r){console.error("Initial content load error:",r)}},100),y.value.style.height="400px"}),g(()=>t.content,r=>{if(b&&r!==b.root.innerHTML)try{b.root.innerHTML=r||""}catch(a){console.error("Content update error in watcher:",a)}}),j(()=>{b&&(b=null)}),(r,a)=>{var k;return d(),u("div",Y,[e("div",q,[F,e("form",{onSubmit:L(T,["prevent"]),class:"space-y-6"},[e("div",A,[e("div",G,[e("div",K,[$,e("div",I,[c(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>s(t).title=o),placeholder:"Yazının başlığını girin",class:_(["input-bordered input w-full",{"input-error":l.value.title||s(t).errors.title}])},null,2),[[m,s(t).title]])]),l.value.title||s(t).errors.title?(d(),u("label",Q,[e("span",W,p(l.value.title||s(t).errors.title),1)])):v("",!0)])]),e("div",null,[e("div",J,[P,e("div",R,[c(e("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=o=>s(t).slug=o),placeholder:"örnek-yazı-slug",class:_(["input-bordered input w-full",{"input-error":l.value.slug||s(t).errors.slug}])},null,2),[[m,s(t).slug]])]),l.value.slug||s(t).errors.slug?(d(),u("label",X,[e("span",Z,p(l.value.slug||s(t).errors.slug),1)])):v("",!0)])]),e("div",null,[e("div",ee,[te,e("div",se,[c(e("input",{type:"date","onUpdate:modelValue":a[2]||(a[2]=o=>i.value.date=o),class:_(["input-bordered input w-full",{"input-error":l.value.published_at||s(t).errors.published_at}])},null,2),[[m,i.value.date]]),c(e("input",{type:"time","onUpdate:modelValue":a[3]||(a[3]=o=>i.value.time=o),class:_(["input-bordered input w-full",{"input-error":l.value.published_at||s(t).errors.published_at}])},null,2),[[m,i.value.time]])]),l.value.published_at||s(t).errors.published_at?(d(),u("label",le,[e("span",ae,p(l.value.published_at||s(t).errors.published_at),1)])):v("",!0)])]),e("div",oe,[e("div",re,[ie,e("div",ne,[c(e("textarea",{"onUpdate:modelValue":a[4]||(a[4]=o=>s(t).summary=o),rows:"3",placeholder:"Yazının kısa özeti",class:_(["textarea-bordered textarea w-full",{"textarea-error":l.value.summary||s(t).errors.summary}])},null,2),[[m,s(t).summary]])]),l.value.summary||s(t).errors.summary?(d(),u("label",ue,[e("span",de,p(l.value.summary||s(t).errors.summary),1)])):v("",!0)])]),e("div",ce,[e("div",_e,[pe,e("div",ve,[e("div",{ref_key:"quillEditor",ref:y,class:_(["min-h-[300px] rounded border border-base-300 bg-base-100 p-3",{"border-error":l.value.content||s(t).errors.content}]),style:{height:"400px"}},null,2)]),l.value.content||s(t).errors.content?(d(),u("label",be,[e("span",me,p(l.value.content||s(t).errors.content),1)])):v("",!0)])]),e("div",null,[he,c(e("select",{"onUpdate:modelValue":a[5]||(a[5]=o=>s(t).category_id=o),class:_(["select-bordered select w-full",{"select-error":l.value.category_id||s(t).errors.category_id}])},[ge,(d(!0),u(B,null,N(U.value,o=>(d(),u("option",{key:o.id,value:o.id},p(o.name),9,ye))),128))],2),[[S,s(t).category_id]]),l.value.category_id||s(t).errors.category_id?(d(),u("label",xe,[e("span",fe,p(l.value.category_id||s(t).errors.category_id),1)])):v("",!0)]),e("div",null,[we,c(e("select",{"onUpdate:modelValue":a[6]||(a[6]=o=>s(t).status=o),class:_(["select-bordered select w-full",{"select-error":l.value.status||s(t).errors.status}])},Ve,2),[[S,s(t).status]]),l.value.status||s(t).errors.status?(d(),u("label",Te,[e("span",Me,p(l.value.status||s(t).errors.status),1)])):v("",!0)]),e("div",null,[e("div",De,[je,e("div",Ce,[c(e("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=o=>s(t).tags=o),placeholder:"etiket1, etiket2, etiket3",class:_(["input-bordered input w-full",{"input-error":l.value.tags||s(t).errors.tags}])},null,2),[[m,s(t).tags]])]),l.value.tags||s(t).errors.tags?(d(),u("label",Le,[e("span",Be,p(l.value.tags||s(t).errors.tags),1)])):v("",!0)])]),e("div",null,[e("div",Ne,[Oe,e("div",Ee,[c(e("input",{type:"text","onUpdate:modelValue":a[8]||(a[8]=o=>s(t).seo_keywords=o),placeholder:"anahtar1, anahtar2, anahtar3",class:_(["input-bordered input w-full",{"input-error":l.value.seo_keywords||s(t).errors.seo_keywords}])},null,2),[[m,s(t).seo_keywords]])]),l.value.seo_keywords||s(t).errors.seo_keywords?(d(),u("label",He,[e("span",Ye,p(l.value.seo_keywords||s(t).errors.seo_keywords),1)])):v("",!0)])]),e("div",null,[e("div",qe,[Fe,e("div",Ae,[c(e("textarea",{"onUpdate:modelValue":a[9]||(a[9]=o=>s(t).meta_description=o),placeholder:"Arama motorları için kısa bir açıklama (max 160 karakter)",class:_(["textarea-bordered textarea w-full",{"textarea-error":l.value.meta_description||s(t).errors.meta_description}]),maxlength:"160",rows:"2"},null,2),[[m,s(t).meta_description]]),e("div",Ge,p(((k=s(t).meta_description)==null?void 0:k.length)||0)+"/160",1)]),l.value.meta_description||s(t).errors.meta_description?(d(),u("label",Ke,[e("span",$e,p(l.value.meta_description||s(t).errors.meta_description),1)])):v("",!0),Ie])]),e("div",null,[e("div",Qe,[We,e("div",Je,[c(e("input",{type:"number","onUpdate:modelValue":a[10]||(a[10]=o=>s(t).views_count=o),class:"input-bordered input w-full",readonly:""},null,512),[[m,s(t).views_count]])])])]),e("div",Pe,[e("label",Re,[c(e("input",{type:"checkbox","onUpdate:modelValue":a[11]||(a[11]=o=>s(t).hasDraw=o),class:"checkbox checkbox-primary"},null,512),[[O,s(t).hasDraw]]),Xe])])]),Ze,e("div",et,[e("button",{type:"submit",class:_(["btn btn-primary",{loading:s(t).processing}]),disabled:s(t).processing}," Güncelle ",10,tt)])],32)])])}}});export{rt as default};
