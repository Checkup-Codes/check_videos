import{Q as F,g as h,b as G,s as W,H as Q,x as P,y as U,e as J,w as T,a as t,c as i,j as p,n as b,t as c,u as d,f as L,p as O,k as R,o as r,F as j,l as B}from"./ssr-BxLEzc_r.js";import{_ as K}from"./CheckScreen-4n-LYesv.js";const X={class:"space-y-4"},Y={class:"flex items-center justify-between"},Z={class:"text-3xl font-bold text-foreground"},ee={class:"flex gap-2"},te={key:0,class:"text-muted-foreground"},oe={class:"flex flex-wrap gap-4 text-sm text-muted-foreground"},se={class:"flex items-center gap-2"},ne={key:0,class:"flex items-center gap-2"},re={key:1,class:"flex items-center gap-2"},ie={key:0,class:"space-y-4"},le={class:"flex items-center justify-between"},ae=["id"],de={class:"mb-4"},ue={class:"text-sm font-medium text-muted-foreground"},ce={class:"mt-2 whitespace-pre-wrap text-foreground"},fe={class:"space-y-2"},pe={class:"text-sm font-medium text-muted-foreground"},me={class:"whitespace-pre-wrap text-sm text-foreground"},ge={key:0,class:"ml-auto text-xs font-medium text-green-600 dark:text-green-400"},ve={key:0,class:"mt-3 rounded-md bg-muted p-2 text-sm text-muted-foreground"},xe={class:"whitespace-pre-wrap"},he={class:"flex gap-4"},be={class:"flex h-full flex-col"},we={class:"space-y-1"},ke=["onClick"],ye={class:"font-medium"},_e={class:"rounded-lg border border-border bg-popover shadow-lg"},Ce={class:"space-y-1"},je=["onClick"],Be={class:"font-medium"},Te={__name:"Screen",setup(Me){const{props:N}=F(),l=N.test||{};N.isAdmin;const k=h(!1),m=h(!1),v=G(()=>l.questions&&l.questions.length>0&&k.value),x=h(null),M=h(new Map),z=h(null),q=h(null),V=h(!1);let y=null,_=null,w=!1;const E=(s,e)=>{s?M.value.set(e,s):M.value.delete(e)},C=()=>{m.value=!m.value},$=s=>{if(!s)return;const e=document.getElementById(`question-${s}`);if(!e)return;const o=e.closest(".overflow-y-auto");if(!o)return;w=!0,x.value=s,Q(()=>{I()});const n=o.getBoundingClientRect(),a=e.getBoundingClientRect(),u=o.scrollTop,f=a.top-n.top+u;o.scrollTo({top:f-80,behavior:"smooth"}),setTimeout(()=>{w=!1},600),window.innerWidth<1280&&(m.value=!1)},I=()=>{if(!x.value)return;const s=M.value.get(x.value);if(!s)return;const e=window.innerWidth>=1280?q.value:z.value;if(!e)return;const o=e.getBoundingClientRect(),n=s.getBoundingClientRect(),a=n.top<o.top,u=n.bottom>o.bottom;if(a||u){e.scrollTop;const f=s.offsetTop,g=e.clientHeight,S=s.offsetHeight,D=f-g/2+S/2;e.scrollTo({top:D,behavior:"smooth"})}},A=()=>{if(!l.questions||l.questions.length===0)return;const s=l.questions.map(n=>document.getElementById(`question-${n.id}`)).filter(Boolean);if(s.length===0)return;const e=80,o=()=>{if(w)return;let n=null,a=1/0;s.forEach(u=>{if(!u)return;const f=u.getBoundingClientRect(),g=f.top-e;f.top<=e+50&&f.bottom>0&&g<=50&&Math.abs(g)<a&&(a=Math.abs(g),n=u.id.replace("question-",""))}),n||s.forEach(u=>{if(!u)return;const f=u.getBoundingClientRect();if(f.top<e+200&&f.bottom>0){const g=Math.abs(f.top-e);g<a&&(a=g,n=u.id.replace("question-",""))}}),n&&x.value!==n&&(x.value=n)};y=new IntersectionObserver(()=>{w||o()},{root:null,rootMargin:`-${e+10}px 0px -60% 0px`,threshold:[0,.1,.25,.5,.75,1]}),s.forEach(n=>{n&&y.observe(n)}),_=()=>{w||o()},window.addEventListener("scroll",_,{passive:!0}),o()},H=()=>{const s=window.innerWidth>=1280;V.value=s,s&&v.value?m.value=!0:s||(m.value=!1)};return W(()=>{H(),Q(()=>{v.value&&A()});const s=()=>{H()};window.addEventListener("resize",s)}),P(()=>{y&&(y.disconnect(),y=null),_&&(window.removeEventListener("scroll",_),_=null)}),U(x,(s,e)=>{s&&s!==e&&!w&&Q(()=>{I()})}),(s,e)=>(r(),J(K,null,{default:T(()=>[t("div",{class:b(["space-y-6 p-3 pt-6 transition-all duration-300 max-w-full sm:p-6 sm:pt-12 lg:max-w-[800px] lg:pt-16",{"xl:-translate-x-[100px]":v.value&&m.value}])},[t("div",X,[t("div",Y,[t("h1",Z,c(d(l).title),1),t("div",ee,[L(d(O),{href:`/tests/${d(l).slug}/take`,class:"inline-flex h-9 items-center justify-center rounded-md bg-primary px-4 text-sm font-medium text-primary-foreground hover:bg-primary/90"},{default:T(()=>[...e[2]||(e[2]=[R(" Testi Çöz ",-1)])]),_:1},8,["href"])])]),d(l).description?(r(),i("div",te,c(d(l).description),1)):p("",!0),t("div",oe,[t("div",se,[e[3]||(e[3]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),t("span",null,c(d(l).total_questions)+" soru",1)]),d(l).total_points?(r(),i("div",ne,[e[4]||(e[4]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})],-1)),t("span",null,c(d(l).total_points)+" puan",1)])):p("",!0),d(l).time_limit?(r(),i("div",re,[e[5]||(e[5]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",null,c(d(l).time_limit)+" dakika",1)])):p("",!0)])]),d(l).questions&&d(l).questions.length>0?(r(),i("div",ie,[t("div",le,[e[6]||(e[6]=t("h2",{class:"text-xl font-semibold text-foreground"},"Sorular",-1)),k.value?(r(),i("button",{key:1,onClick:e[1]||(e[1]=o=>k.value=!1),class:"inline-flex h-9 items-center justify-center rounded-md border border-input bg-background px-4 text-sm font-medium text-foreground hover:bg-accent hover:text-accent-foreground"}," Soruları Gizle ")):(r(),i("button",{key:0,onClick:e[0]||(e[0]=o=>k.value=!0),class:"inline-flex h-9 items-center justify-center rounded-md border border-input bg-background px-4 text-sm font-medium text-foreground hover:bg-accent hover:text-accent-foreground"}," Soruları Göster "))]),t("div",{class:b(["space-y-6 max-w-full lg:max-w-[800px]",{"blur-sm select-none pointer-events-none":!k.value}])},[(r(!0),i(j,null,B(d(l).questions,(o,n)=>(r(),i("div",{key:o.id,id:`question-${o.id}`,class:"scroll-mt-24 rounded-lg border border-border bg-card p-4"},[t("div",de,[t("span",ue,"Soru "+c(n+1),1),t("p",ce,c(o.question_text),1)]),t("div",fe,[(r(!0),i(j,null,B(o.options,(a,u)=>(r(),i("div",{key:a.id,class:b(["flex items-center gap-2 rounded-md border border-border bg-background p-2",a.is_correct?"border-green-500 bg-green-50 dark:bg-green-950":""])},[t("span",pe,c(String.fromCharCode(65+u))+".",1),t("span",me,c(a.option_text),1),a.is_correct?(r(),i("span",ge," ✓ Doğru ")):p("",!0)],2))),128))]),o.explanation?(r(),i("div",ve,[e[7]||(e[7]=t("strong",null,"Açıklama:",-1)),e[8]||(e[8]=R()),t("span",xe,c(o.explanation),1)])):p("",!0)],8,ae))),128))],2)])):p("",!0),t("div",he,[L(d(O),{href:"/tests",class:"inline-flex h-10 items-center justify-center rounded-md border border-input bg-background px-6 text-sm font-medium text-foreground hover:bg-accent hover:text-accent-foreground"},{default:T(()=>[...e[9]||(e[9]=[R(" Geri Dön ",-1)])]),_:1})])],2),v.value?(r(),i("button",{key:0,onClick:C,class:"fixed right-4 top-1/2 z-50 flex h-10 w-10 -translate-y-1/2 items-center justify-center rounded-full bg-primary text-primary-foreground shadow-lg transition-colors hover:bg-primary/90 xl:hidden"},[...e[10]||(e[10]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-5 w-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1)])])):p("",!0),v.value?(r(),i("div",{key:1,class:b(["fixed right-0 top-12 z-40 h-[calc(100vh-3rem)] w-80 transform border-l border-border bg-popover shadow-2xl transition-transform duration-300 lg:h-[calc(100vh-5.5rem)] xl:hidden",{"translate-x-full":!m.value}])},[t("div",be,[t("div",{class:"flex items-center justify-between border-b border-border p-4"},[e[12]||(e[12]=t("h3",{class:"text-lg font-semibold text-foreground"},"Sorular",-1)),t("button",{onClick:C,class:"inline-flex h-8 w-8 items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"},[...e[11]||(e[11]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",{ref_key:"mobileQuestionNavScrollRef",ref:z,class:"flex-1 overflow-y-auto p-4"},[t("nav",we,[(r(!0),i(j,null,B(d(l).questions,(o,n)=>(r(),i("button",{key:o.id,ref_for:!0,ref:a=>E(a,o.id),onClick:a=>$(o.id),class:b(["flex w-full items-center justify-between rounded-md px-3 py-2 text-sm transition-colors",[x.value===o.id?"bg-accent font-medium text-accent-foreground":"text-muted-foreground hover:bg-accent/50 hover:text-foreground"]])},[t("span",ye,"Soru "+c(n+1),1)],10,ke))),128))])],512)])],2)):p("",!0),v.value?(r(),i("button",{key:2,onClick:C,class:"fixed right-4 top-28 z-50 hidden h-10 w-10 items-center justify-center rounded-full bg-primary text-primary-foreground shadow-lg transition-colors hover:bg-primary/90 xl:flex"},[...e[13]||(e[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-5 w-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1)])])):p("",!0),v.value?(r(),i("div",{key:3,class:b(["fixed right-4 top-28 z-30 hidden w-64 transition-all duration-300 ease-in-out xl:block",m.value?"translate-x-0 opacity-100":"pointer-events-none translate-x-full opacity-0"])},[t("div",_e,[t("div",{class:"flex items-center justify-between border-b border-border p-3"},[e[15]||(e[15]=t("h3",{class:"text-sm font-semibold text-foreground"},"Sorular",-1)),t("button",{onClick:C,class:"inline-flex h-6 w-6 items-center justify-center rounded-md text-xs font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"},[...e[14]||(e[14]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",{ref_key:"desktopQuestionNavScrollRef",ref:q,class:"overflow-y-auto p-3",style:{"max-height":"calc(100vh - 220px)"}},[t("nav",Ce,[(r(!0),i(j,null,B(d(l).questions,(o,n)=>(r(),i("button",{key:o.id,ref_for:!0,ref:a=>E(a,o.id),onClick:a=>$(o.id),class:b(["flex w-full items-center justify-between rounded-md px-2 py-1.5 text-xs transition-colors",[x.value===o.id?"bg-accent font-medium text-accent-foreground":"text-muted-foreground hover:bg-accent/50 hover:text-foreground"]])},[t("span",Be,"Soru "+c(n+1),1)],10,je))),128))])],512)])],2)):p("",!0),v.value&&m.value?(r(),i("div",{key:4,onClick:C,class:"fixed inset-0 z-30 bg-black/20 xl:hidden"})):p("",!0)]),_:1}))}};export{Te as default};
