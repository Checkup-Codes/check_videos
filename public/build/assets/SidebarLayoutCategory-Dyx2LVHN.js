import{s as I,Q as V,p as u,U as E,e as g,y as $,m as b,j as y,w as p,a as r,b as v,c as f,h,u as C,i as k,n as m,o as i,t as R}from"./ssr-B00CJT2V.js";import{_ as W}from"./CheckSubsidebar-DSWkQCTt.js";import{_ as D}from"./SubSidebarScreen-DDCF6P20.js";import z from"./CategoryTree-DvRZFBJz.js";import{u as G}from"./useSidebar-c5lGNvW2.js";import{_ as H}from"./app-KO3EYfs6.js";/* empty css            */const K={class:"shrink-0 border-b border-border bg-background/95 p-2"},O={class:"flex items-center justify-between gap-2"},Q={class:"flex items-center gap-1"},U={key:0},q={key:0},F={key:0,class:"flex items-center gap-1"},J=["title"],P={class:"text-xs"},X=Object.assign({name:"SidebarLayoutCategory"},{__name:"SidebarLayoutCategory",emits:["update:isNarrow"],setup(Y,{emit:S}){G();const c=I(),s=V(),A=u(()=>!!(s.props.auth&&s.props.auth.user)),x=u(()=>{const e=s.url;return e.startsWith("/writes")&&!e.startsWith("/categories")}),d=E("categories",[]),L=u(()=>d&&Array.isArray(d)&&d.length>0?d:s.props.categories&&Array.isArray(s.props.categories)&&s.props.categories.length>0?s.props.categories:[]),n=u(()=>c.getters["CategorySidebar/collapsedSet"].size===0),j=()=>"",M=g(!0),N=g(null),l=g(c.getters["Writes/isCollapsed"]),o=g(null),T=S;$(l,e=>{T("update:isNarrow",e)});const w=e=>{if(!e||!Array.isArray(e)||e.length===0)return[];let t=[];return e.forEach(a=>{a&&a.id&&(t.push(a.id),a.children&&Array.isArray(a.children)&&a.children.length>0&&(t=t.concat(w(a.children))))}),t},B=()=>{const e=L.value;if(!e||e.length===0){console.warn("Categories not available for toggle");return}if(n.value){const t=w(e);t.length>0&&c.dispatch("CategorySidebar/collapseAll",t)}else c.dispatch("CategorySidebar/expandAll")};b(()=>{l.value=c.getters["Writes/isCollapsed"]});const _=e=>{const t=e.target.scrollTop;localStorage.setItem("categorySidebarScroll",t)};return b(()=>{if(o.value&&(o.value.addEventListener&&o.value.addEventListener("scroll",_),o.value.$el)){o.value.$el.addEventListener("scroll",_);const e=localStorage.getItem("categorySidebarScroll");e&&(o.value.$el.scrollTop=parseInt(e,10))}}),(e,t)=>(i(),y(W,{isNarrow:l.value},{default:p(()=>[r("div",K,[r("div",O,[r("div",Q,[v(C(k),{href:e.route("writes.index"),class:m(["inline-flex h-6 items-center gap-1 rounded px-2 text-xs transition-colors",x.value?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"]),title:"Liste görünümü"},{default:p(()=>[t[0]||(t[0]=r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6h16M4 12h16M4 18h16"})],-1)),l.value?h("",!0):(i(),f("span",U,"Liste"))]),_:1},8,["href","class"]),v(C(k),{href:e.route("categories.index"),class:m(["inline-flex h-6 items-center gap-1 rounded px-2 text-xs transition-colors",x.value?"text-muted-foreground hover:bg-accent hover:text-accent-foreground":"bg-accent text-accent-foreground"]),title:"Kategori görünümü"},{default:p(()=>[t[1]||(t[1]=r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)),l.value?h("",!0):(i(),f("span",q,"Kategori"))]),_:1},8,["href","class"])]),A.value?(i(),f("div",F,[r("button",{onClick:B,class:m(["inline-flex h-6 items-center gap-1 rounded px-2 text-xs text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground",{"bg-accent text-accent-foreground":n.value}]),title:n.value?"Tümünü Daralt":"Tümünü Genişlet"},[(i(),f("svg",{xmlns:"http://www.w3.org/2000/svg",class:m(["h-3 w-3 transition-transform duration-200",{"rotate-180":n.value}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[...t[2]||(t[2]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 9l-7 7-7-7"},null,-1)])],2)),r("span",P,R(n.value?"Daralt":"Genişlet"),1)],10,J)])):h("",!0)])]),v(D,{ref_key:"scrollableRef",ref:o,class:"sidebar-content-embedded min-h-0 flex-1",infoClass:"flex-1 min-h-0 overflow-y-auto overscroll-none"},{default:p(()=>[M.value?(i(),y(z,{key:0,ref_key:"categoryTreeRef",ref:N,getLinkClasses:j,expandAll:n.value,isCollapsed:l.value},null,8,["expandAll","isCollapsed"])):h("",!0)]),_:1},512)]),_:1},8,["isNarrow"]))}}),ne=H(X,[["__scopeId","data-v-38c2fabc"]]);export{ne as default};
